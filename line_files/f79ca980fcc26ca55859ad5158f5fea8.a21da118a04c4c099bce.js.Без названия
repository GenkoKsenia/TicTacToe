(self.webpackChunkvk=self.webpackChunkvk||[]).push([[31848],{911650:(e,t,i)=>{"use strict";i.d(t,{default:()=>s});const s=(0,i(28178).makeIcon)("Icon16CrownCheckFillPurple","crown_check_fill_purple_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="crown_check_fill_purple_16"><path fill="#735CE6" fill-rule="evenodd" d="M14.28 10.216a.75.75 0 0 1 0 1.06l-3 3a.75.75 0 0 1-1.06 0l-1.5-1.5a.75.75 0 0 1 1.06-1.06l.97.97 2.47-2.47a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd" /><path fill="#A393F5" fill-rule="evenodd" d="M12.717 9.1a.5.5 0 0 0 .127-.217l.37-1.298.043.001a1.2 1.2 0 0 0 .621-.167 1.28 1.28 0 0 0 .453-.448 1.19 1.19 0 0 0 .169-.625c0-.227-.056-.433-.167-.62a1.257 1.257 0 0 0-.45-.449 1.211 1.211 0 0 0-.626-.167c-.226 0-.432.056-.617.167a1.264 1.264 0 0 0-.444.451c-.111.19-.167.395-.167.618 0 .183.036.354.107.51l.019.038-1.47 1.064c-.144.102-.263.084-.354-.053L8.602 5.32l.02-.01a1.264 1.264 0 0 0 .447-.449c.11-.187.166-.396.166-.626 0-.222-.055-.428-.166-.617a1.257 1.257 0 0 0-.447-.451A1.188 1.188 0 0 0 8.002 3c-.229 0-.437.056-.624.167a1.264 1.264 0 0 0-.447.448 1.193 1.193 0 0 0-.166.62c0 .23.056.439.169.626.113.187.263.337.45.448l.017.01-1.732 2.596a.25.25 0 0 1-.14.109c-.051.012-.117-.01-.198-.066L3.85 6.884l.014-.028a1.22 1.22 0 0 0 .107-.51c0-.223-.056-.429-.167-.618a1.257 1.257 0 0 0-.447-.45 1.188 1.188 0 0 0-.619-.168c-.23 0-.437.056-.624.167a1.264 1.264 0 0 0-.447.448 1.194 1.194 0 0 0-.167.62c0 .23.056.439.17.626a1.294 1.294 0 0 0 .446.448c.186.112.393.167.622.167l.054-.002L3.484 10h8.125a.5.5 0 0 0 .354-.146l.754-.755ZM7.577 11c.086 0 .134.102.085.172a2.038 2.038 0 0 0-.28 1.693c.018.067-.03.135-.1.135H5.3c-.423 0-.751-.102-.984-.307-.233-.205-.399-.51-.498-.912L3.664 11h3.913Z" clip-rule="evenodd" /></symbol>',16,16,!1,void 0)},812095:(e,t,i)=>{"use strict";i.d(t,{default:()=>s});const s=(0,i(28178).makeIcon)("Icon28VmojiOutline","vmoji_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="vmoji_outline_28"><g fill="currentColor"><path d="M12 3a1 1 0 0 1-1 1 7 7 0 0 0-7 7 1 1 0 1 1-2 0 9 9 0 0 1 9-9 1 1 0 0 1 1 1zM12 25a1 1 0 0 0-1-1 7 7 0 0 1-7-7 1 1 0 1 0-2 0 9 9 0 0 0 9 9 1 1 0 0 0 1-1zM9.75 11a1.75 1.75 0 1 1 0 3.5 1.75 1.75 0 0 1 0-3.5zm7.145.878c1.033-.556 2.224-.556 3.274.385.41.368.444.998.074 1.407s-1.001.442-1.412.074l-.1-.082c-.298-.22-.565-.203-.885-.03-.097.051-.162.1-.177.112l-.099.078a1.003 1.003 0 0 1-1.313-.152.994.994 0 0 1 .074-1.407c.124-.111.314-.25.564-.385zM16 16.5c.552 0 1 .45.921.996-.037.26-.087.501-.15.652a3 3 0 0 1-5.543 0 3.007 3.007 0 0 1-.15-.652c-.077-.546.37-.996.922-.996zM16 3a1 1 0 0 0 1 1 7 7 0 0 1 7 7 1 1 0 1 0 2 0 9 9 0 0 0-9-9 1 1 0 0 0-1 1zM16 25a1 1 0 0 1 1-1 7 7 0 0 0 7-7 1 1 0 1 1 2 0 9 9 0 0 1-9 9 1 1 0 0 1-1-1z" /></g></symbol>',28,28,!1,void 0)},480758:(e,t,i)=>{"use strict";i.d(t,{default:()=>s});const s=(0,i(28178).makeIcon)("Icon16Crown","crown_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="crown_16"><path fill="currentColor" d="M8.786 4.778a1.5 1.5 0 1 0-1.572 0L5.259 7.7a.5.5 0 0 1-.708.127L2.87 6.612A1.495 1.495 0 0 0 3 6a1.5 1.5 0 1 0-1.41 1.497L2.327 10h11.372l.734-2.502.068.002a1.5 1.5 0 1 0-1.364-.875l-1.68 1.214a.5.5 0 0 1-.708-.127L8.786 4.778Zm4.565 6.722H2.646l.255 1.15A1.723 1.723 0 0 0 4.583 14h6.832a1.723 1.723 0 0 0 1.683-1.352l.252-1.148Z" /></symbol>',16,16,!1,void 0)},846499:(e,t,i)=>{"use strict";i.d(t,{default:()=>s});const s=(0,i(28178).makeIcon)("Icon16Lock","lock_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="lock_16"><path fill="currentColor" fill-rule="evenodd" d="M14 10v1c0 1.4 0 2.1-.273 2.635a2.5 2.5 0 0 1-1.092 1.093C12.1 15 11.4 15 10 15H6c-1.4 0-2.1 0-2.635-.273a2.5 2.5 0 0 1-1.093-1.092C2 13.1 2 12.4 2 11v-1c0-1.4 0-2.1.273-2.635a2.5 2.5 0 0 1 1.092-1.093c.185-.094.389-.155.635-.196V5a4 4 0 0 1 8 0v1.077c.246.04.45.102.635.196a2.5 2.5 0 0 1 1.093 1.092C14 7.9 14 8.6 14 10Zm-4-5v1H6V5a2 2 0 1 1 4 0Z" clip-rule="evenodd" /></symbol>',16,16,!1,void 0)},138163:(e,t,i)=>{"use strict";i.d(t,{default:()=>s});const s=(0,i(28178).makeIcon)("Icon16LockOpen","lock_open_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="lock_open_16"><path fill="currentColor" d="M6 6h4c1.4 0 2.1 0 2.635.273a2.5 2.5 0 0 1 1.093 1.092C14 7.9 14 8.6 14 10v1c0 1.4 0 2.1-.273 2.635a2.5 2.5 0 0 1-1.092 1.093C12.1 15 11.4 15 10 15H6c-1.4 0-2.1 0-2.635-.273a2.5 2.5 0 0 1-1.093-1.092C2 13.1 2 12.4 2 11v-1c0-1.4 0-2.1.273-2.635a2.5 2.5 0 0 1 1.092-1.093c.185-.094.389-.155.635-.196V5a4 4 0 0 1 6.981-2.667 1 1 0 0 1-1.49 1.334A2 2 0 0 0 6 5v1Z" /></symbol>',16,16,!1,void 0)},621748:(e,t,i)=>{"use strict";i.d(t,{default:()=>s});const s=(0,i(28178).makeIcon)("Icon24BrushOutline","brush_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="brush_outline_24"><path d="M20.377 3.467a1.857 1.857 0 0 0-2.558.09l-6.93 6.866a.911.911 0 0 0-.007 1.285.904.904 0 0 0 1.281.008l6.935-6.87c.044-.045.117-.018.07.04l-6.154 7.74a.911.911 0 0 0 .143 1.278.904.904 0 0 0 1.273-.143l6.15-7.735a1.85 1.85 0 0 0-.203-2.56Z" /><path fill-rule="evenodd" d="M8.488 12.624c-2.003 0-3.476 1.63-3.56 3.533-.043.938-.454 1.416-.83 1.732-.382.321-.894.553-1.052 1.065-.13.418.033.863.373 1.128.763.593 2.355 1.343 4.654.622 2.399-.752 3.977-2.509 3.977-4.506a3.568 3.568 0 0 0-3.562-3.574Zm-1.75 3.614c.046-1.037.82-1.796 1.75-1.796.967 0 1.75.786 1.75 1.756 0 .947-.789 2.17-2.705 2.77-.866.272-1.549.249-2.057.123.59-.56 1.198-1.442 1.261-2.853Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},364185:(e,t,i)=>{"use strict";i.d(t,{default:()=>s});const s=(0,i(28178).makeIcon)("Icon24HangerOutline","hanger_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="hanger_outline_24"><path stroke="#3f8ae0" stroke-width="1.8" d="M19.238 18.1H4.762a1.762 1.762 0 0 1-.747-3.357L12 11.01l7.985 3.734a1.761 1.761 0 0 1-.747 3.358z" /><path fill="#3f8ae0" d="M9.1 6.904a.9.9 0 1 0 1.8 0zm2 4.096v.9h1.8V11zm-.2-4.096a1.1 1.1 0 0 1 1.1-1.1v-1.8a2.9 2.9 0 0 0-2.9 2.9zm1.1-1.1a1.1 1.1 0 0 1 1.1 1.1h1.8a2.9 2.9 0 0 0-2.9-2.9zm1.1 1.1c0 .664-.303 1.097-.783 1.658C11.9 9.05 11.1 9.845 11.1 11h1.8c0-.345.2-.586.783-1.267.52-.606 1.217-1.471 1.217-2.829z" /><path fill="currentColor" fill-rule="evenodd" d="M10.9 6.904a1.1 1.1 0 0 1 2.2 0c0 .664-.303 1.097-.784 1.658l-.122.14c-.346.395-.838.955-1.021 1.7l-7.539 3.526A2.661 2.661 0 0 0 4.761 19h14.477a2.662 2.662 0 0 0 1.128-5.072l-7.305-3.416c.122-.192.321-.427.623-.779.519-.606 1.216-1.471 1.216-2.829a2.9 2.9 0 0 0-5.8 0 .9.9 0 1 0 1.8 0zM4.397 15.56 12 12.003l7.603 3.556a.861.861 0 0 1-.365 1.642H4.762a.862.862 0 0 1-.365-1.642z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},281536:(e,t,i)=>{"use strict";i.d(t,{default:()=>s});const s=(0,i(28178).makeIcon)("Icon24MoreHorizontal","more_horizontal_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="more_horizontal_24"><g fill="none" fill-rule="evenodd"><path d="M24 0H0v24h24z" /><path fill="currentColor" d="M18 10c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2Zm-6 4c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2Zm-6 0c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2Z" /></g></symbol>',24,24,!1,void 0)},571285:(e,t,i)=>{"use strict";i.d(t,{default:()=>s});const s=(0,i(28178).makeIcon)("Icon28MoreHorizontal","more_horizontal_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 28 28" id="more_horizontal_28"><path d="M8.5 14a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Zm8 0a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Zm5.5 2.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z" /></symbol>',28,28,!1,void 0)},661795:(e,t,i)=>{"use strict";i.d(t,{default:()=>s});const s=(0,i(28178).makeIcon)("Icon28ShareOutline","share_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="share_outline_28"><path fill="currentColor" fill-rule="evenodd" d="M13.476 6.513c0-.442.485-.651.797-.406l9.532 7.483a.52.52 0 0 1 0 .812l-9.532 7.484a.495.495 0 0 1-.797-.406v-4.485a1 1 0 0 0-1-1c-3.565 0-6.252 1.449-8.26 3.267.362-2.161 1.153-3.807 2.225-5.046 1.497-1.73 3.637-2.78 6.22-3.264a1 1 0 0 0 .815-.983zm2.032-1.979c-1.654-1.298-4.032-.093-4.032 1.979V9.16c-2.565.61-4.854 1.79-6.548 3.749C3.051 15.079 2 18.093 2 22.05a1 1 0 0 0 1.788.616c1.741-2.226 4.175-4.292 7.688-4.625v3.438c0 2.072 2.378 3.277 4.032 1.978l9.532-7.483a2.518 2.518 0 0 0 0-3.957z" clip-rule="evenodd" /></symbol>',28,28,!1,void 0)},58255:(e,t,i)=>{"use strict";i.d(t,{default:()=>a});var s=i(111132);function a(e,t){e.classList?e.classList.add(t):(0,s.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}},111132:(e,t,i)=>{"use strict";function s(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}i.d(t,{default:()=>s})},374277:(e,t,i)=>{"use strict";function s(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function a(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=s(e.className,t):e.setAttribute("class",s(e.className&&e.className.baseVal||"",t))}i.d(t,{default:()=>a})},429697:(e,t,i)=>{"use strict";i.d(t,{default:()=>v});var s=i(722122),a=i(419756),r=i(841788),o=i(58255),n=i(374277),c=i(667294),d=i(696630),l=i(559391),u=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,n.default)(e,t)}))},m=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,i){var s=t.resolveArguments(e,i),a=s[0],r=s[1];t.removeClasses(a,"exit"),t.addClass(a,r?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,i)},t.onEntering=function(e,i){var s=t.resolveArguments(e,i),a=s[0],r=s[1]?"appear":"enter";t.addClass(a,r,"active"),t.props.onEntering&&t.props.onEntering(e,i)},t.onEntered=function(e,i){var s=t.resolveArguments(e,i),a=s[0],r=s[1]?"appear":"enter";t.removeClasses(a,r),t.addClass(a,r,"done"),t.props.onEntered&&t.props.onEntered(e,i)},t.onExit=function(e){var i=t.resolveArguments(e)[0];t.removeClasses(i,"appear"),t.removeClasses(i,"enter"),t.addClass(i,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var i=t.resolveArguments(e)[0];t.addClass(i,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var i=t.resolveArguments(e)[0];t.removeClasses(i,"exit"),t.addClass(i,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,i){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,i]},t.getClassNames=function(e){var i=t.props.classNames,s="string"==typeof i,a=s?""+(s&&i?i+"-":"")+e:i[e];return{baseClassName:a,activeClassName:s?a+"-active":i[e+"Active"],doneClassName:s?a+"-done":i[e+"Done"]}},t}(0,r.default)(t,e);var i=t.prototype;return i.addClass=function(e,t,i){var s=this.getClassNames(t)[i+"ClassName"],a=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===i&&a&&(s+=" "+a),"active"===i&&e&&(0,l.forceReflow)(e),s&&(this.appliedClasses[t][i]=s,function(e,t){e&&t&&t.split(" ").forEach((function(t){return(0,o.default)(e,t)}))}(e,s))},i.removeClasses=function(e,t){var i=this.appliedClasses[t],s=i.base,a=i.active,r=i.done;this.appliedClasses[t]={},s&&u(e,s),a&&u(e,a),r&&u(e,r)},i.render=function(){var e=this.props,t=(e.classNames,(0,a.default)(e,["classNames"]));return c.createElement(d.default,(0,s.default)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(c.Component);m.defaultProps={classNames:""},m.propTypes={};const v=m},696630:(e,t,i)=>{"use strict";i.d(t,{default:()=>j});var s=i(419756),a=i(841788),r=i(667294),o=i(973935),n=i(806035),c=i(500220),d=i(559391),l="unmounted",u="exited",m="entering",v="entered",h="exiting",g=function(e){function t(t,i){var s;s=e.call(this,t,i)||this;var a,r=i&&!i.isMounting?t.enter:t.appear;return s.appearStatus=null,t.in?r?(a=u,s.appearStatus=m):a=v:a=t.unmountOnExit||t.mountOnEnter?l:u,s.state={status:a},s.nextCallback=null,s}(0,a.default)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===l?{status:u}:null};var i=t.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(e){var t=null;if(e!==this.props){var i=this.state.status;this.props.in?i!==m&&i!==v&&(t=m):i!==m&&i!==v||(t=h)}this.updateStatus(!1,t)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var e,t,i,s=this.props.timeout;return e=t=i=s,null!=s&&"number"!=typeof s&&(e=s.exit,t=s.enter,i=void 0!==s.appear?s.appear:t),{exit:e,enter:t,appear:i}},i.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===m){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:o.findDOMNode(this);i&&(0,d.forceReflow)(i)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===u&&this.setState({status:l})},i.performEnter=function(e){var t=this,i=this.props.enter,s=this.context?this.context.isMounting:e,a=this.props.nodeRef?[s]:[o.findDOMNode(this),s],r=a[0],c=a[1],d=this.getTimeouts(),l=s?d.appear:d.enter;!e&&!i||n.default.disabled?this.safeSetState({status:v},(function(){t.props.onEntered(r)})):(this.props.onEnter(r,c),this.safeSetState({status:m},(function(){t.props.onEntering(r,c),t.onTransitionEnd(l,(function(){t.safeSetState({status:v},(function(){t.props.onEntered(r,c)}))}))})))},i.performExit=function(){var e=this,t=this.props.exit,i=this.getTimeouts(),s=this.props.nodeRef?void 0:o.findDOMNode(this);t&&!n.default.disabled?(this.props.onExit(s),this.safeSetState({status:h},(function(){e.props.onExiting(s),e.onTransitionEnd(i.exit,(function(){e.safeSetState({status:u},(function(){e.props.onExited(s)}))}))}))):this.safeSetState({status:u},(function(){e.props.onExited(s)}))},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},i.setNextCallback=function(e){var t=this,i=!0;return this.nextCallback=function(s){i&&(i=!1,t.nextCallback=null,e(s))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},i.onTransitionEnd=function(e,t){this.setNextCallback(t);var i=this.props.nodeRef?this.props.nodeRef.current:o.findDOMNode(this),s=null==e&&!this.props.addEndListener;if(i&&!s){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],r=a[0],n=a[1];this.props.addEndListener(r,n)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},i.render=function(){var e=this.state.status;if(e===l)return null;var t=this.props,i=t.children,a=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,s.default)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.createElement(c.default.Provider,{value:null},"function"==typeof i?i(e,a):r.cloneElement(r.Children.only(i),a))},t}(r.Component);function p(){}g.contextType=c.default,g.propTypes={},g.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:p,onEntering:p,onEntered:p,onExit:p,onExiting:p,onExited:p},g.UNMOUNTED=l,g.EXITED=u,g.ENTERING=m,g.ENTERED=v,g.EXITING=h;const j=g},500220:(e,t,i)=>{"use strict";i.d(t,{default:()=>s});const s=i(667294).createContext(null)},806035:(e,t,i)=>{"use strict";i.d(t,{default:()=>s});const s={disabled:!1}},559391:(e,t,i)=>{"use strict";i.d(t,{forceReflow:()=>s});var s=function(e){return e.scrollTop}},295308:(e,t,i)=>{"use strict";i.d(t,{VmojiAvatarModal:()=>L});var s=i(785893),a=i(667294),r=i(575867),o=i(70580),n=i(605382),c=i(944340),d=i(781402),l=i(468916),u=i(258668),m=i(702272),v=i(639792),h=i(928424),g=i(193413),p=i(664590),j=i(912860),_=i(262038),k=i(872289),x=i(296825),f=i(26363),b=i(622323),P=i(590359),w=i(656294),S=i(661795),C=i(571285),V=i(511417),E=i(506770),N=i(70162),y=i(659397),O=i(146143),I=i(226323);class L extends a.Component{constructor(e){super(e),this.updateStickerRenders=e=>{this.setState({stickerRenders:Object.assign(Object.assign({},this.state.stickerRenders),this.stickerRendersToDictionary(e))})},this.handleProductClick=(e,t)=>{e.stopPropagation(),t.is_purchased||this.state.selectedProductId===t.id||(this.setActiveProduct(t.id),this.setState({showProductSnackbar:!0}))},this.handleModalClick=e=>{const{selectedProductId:t}=this.state,{target:i}=e;t&&i&&(i.closest(".VmojiAvatarModal__selectedProduct")||i.closest(".VmojiProductPreview")||this.setState({showProductSnackbar:!1}))},this.handleKeyDown=e=>{const{showGrid:t,showProductFitting:i,showProductSnackbar:s}=this.state,a="none"!==t||i||s;"Escape"==e.key&&a&&(e.preventDefault(),e.stopPropagation(),i?this.setIsProductPreview(!1):"none"!==t?this.setActiveGrid("none"):s&&this.setState({showProductSnackbar:!1}))},this.state={stickerRenders:this.stickerRendersToDictionary(e.stickerRenders),stickerPacks:Object.assign(Object.assign({},this.filterStickersPackPreview(e.stickerPacks.previews)),{nextFrom:e.stickerPacks.next_from}),isAvatarActive:!e.canEdit||!!e.avatar.is_active,showProductFitting:!1,showProductSnackbar:!1,selectedProductId:null,showGrid:"none",showGridBlockId:null}}componentDidMount(){window.addEventListener("keydown",this.handleKeyDown,{capture:!0}),(0,r.vmojiSubscribeToQueue)().then((({key:e,ts:t})=>{(0,o.subscribeToQueue)(e,t,(e=>{this.updateStickerRenders(e)}))})).catch((e=>{console.error(e)}))}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown,{capture:!0})}render(){return(0,s.jsxs)("div",Object.assign({className:"VmojiAvatarModal",onClick:this.handleModalClick},{children:[this.renderCloseButton(),(0,s.jsxs)("div",Object.assign({className:"VmojiAvatarModal__container"},{children:[this.renderHeader(),(0,s.jsxs)(d.default.Body,Object.assign({hasScroll:!1},{children:[this.renderContent(),this.renderGrid(),this.renderSnackbar()]}),void 0),this.renderFitting()]}),void 0)]}),void 0)}renderCloseButton(){return(0,s.jsx)("a",Object.assign({className:"VmojiAvatarModal__close",onClick:this.props.close},{children:(0,s.jsx)(w.default,{},void 0)}),void 0)}renderContent(){return this.props.canEdit?this.renderOwnCharacter():this.renderCharacter()}renderOwnCharacter(){const{nextFrom:e}=this.state.stickerPacks;return(0,s.jsxs)(l.default,Object.assign({className:"VmojiAvatarModal__scroll",hasMore:!!e,loadMore:()=>this.fetchStickerPacks()},{children:[this.renderAvatar(),this.renderRecommendations(),this.renderStickerPacks()]}),void 0)}renderCharacter(){return(0,s.jsxs)("div",Object.assign({className:"VmojiAvatarModal__scroll"},{children:[this.renderAvatar(),this.renderProducts(),this.renderStickerPacks(),this.renderRecommendations()]}),void 0)}renderAvatar(){const{isOwn:e,canEdit:t,hasOwnAvatar:i,avatar:a,restore:r}=this.props,{isAvatarActive:o}=this.state,n=(0,y.classNames)("VmojiAvatarModal__preview",{"VmojiAvatarModal__preview--border":i});return(0,s.jsxs)(m.VmojiModalSection,Object.assign({className:n},{children:[(0,s.jsx)("div",Object.assign({className:"VmojiAvatarModal__actions"},{children:this.renderActions()}),void 0),(0,s.jsx)(h.VmojiCharacterPreview,{url:this.getCharacterPreviewUrl(),color:this.getCharacterPreviewColor(),disabled:!o||e&&!t},void 0),(0,s.jsx)("span",Object.assign({className:"VmojiAvatarModal__avatarTitle"},{children:a.name}),void 0),t&&(0,s.jsxs)(s.Fragment,{children:[!o&&(0,s.jsx)("span",Object.assign({className:"VmojiAvatarModal__avatarDescription"},{children:N.getLang("vmoji_layer_hidden_character")}),void 0),(0,s.jsx)(g.VmojiCharacterEditLink,Object.assign({className:"VmojiAvatarModal__editLink",onClick:({nativeEvent:e})=>(0,c.showVmojiConstructor)(e,{character_id:a.character_id},r)},{children:N.getLang("vmoji_layer_edit_link")}),void 0)]},void 0),e&&!t&&(0,s.jsx)(g.VmojiCharacterEditLink,Object.assign({className:"VmojiAvatarModal__editLink",onClick:({nativeEvent:e})=>(0,c.showVmojiConstructor)(e,{character_id:a.character_id},r)},{children:N.getLang("vmoji_layer_open_link")}),void 0),!i&&(0,s.jsx)(p.VmojiCharacterCreationSuggest,{className:"VmojiAvatarModal__creationSuggest",onClick:({nativeEvent:e})=>(0,c.showVmojiConstructor)(e,{create:""},r)},void 0)]}),void 0)}renderProducts(){const{products:e}=this.props;if(!e.length)return null;let t;return e.length>5&&(t={title:N.getLang("vmoji_layer_show_all"),onclick:()=>this.setActiveGrid("products")}),(0,s.jsxs)(m.VmojiModalSection,{children:[(0,s.jsx)(v.VmojiModalSectionHeader,{title:N.getLang("vmoji_layer_products_title"),link:t},void 0),(0,s.jsx)("div",Object.assign({className:"VmojiAvatarModal__products"},{children:(this.getCurrentCharacter().product_ids||[]).slice(0,5).map((e=>{const t=this.getProductById(e);return(0,s.jsx)(j.VmojiProductItem,{product:t,small:!0,isActive:this.state.selectedProductId===t.id,onClick:e=>this.handleProductClick(e,t)},t.id)}))}),void 0)]},void 0)}renderStickerPacks(){const{canEdit:e}=this.props,{activeStickerPacks:t,hiddenStickerPacks:i}=this.state.stickerPacks,a=e?t:t.slice(0,1);return(0,s.jsxs)(s.Fragment,{children:[a.length>0&&(0,s.jsxs)(m.VmojiModalSection,{children:[(0,s.jsx)(v.VmojiModalSectionHeader,{title:e?N.getLang("vmoji_layer_my_packs_title"):N.getLang("vmoji_layer_packs_title")},void 0),a.map((t=>(0,s.jsx)(_.VmojiStickerPackExtended,{className:"VmojiAvatarModal__stickerPacks",isActive:t.is_active,stickersPack:t,canManage:e,toggleStickerPack:e=>this.toggleStickerPack(e)},t.id)))]},void 0),e&&i.length>0&&(0,s.jsxs)(m.VmojiModalSection,{children:[(0,s.jsx)(v.VmojiModalSectionHeader,{title:N.getLang("vmoji_layer_hidden_packs_title")},void 0),i.map((t=>(0,s.jsx)(_.VmojiStickerPackExtended,{className:"VmojiAvatarModal__stickerPacks",isActive:t.is_active,stickersPack:t,canManage:e,toggleStickerPack:e=>this.toggleStickerPack(e)},t.id)))]},void 0)]},void 0)}renderRecommendations(){const{blocks:e}=this.props.recommendations;return e.map((e=>(0,s.jsxs)(m.VmojiModalSection,{children:[(0,s.jsx)(v.VmojiModalSectionHeader,{title:e.title,link:e.pack_ids.length>5?{title:N.getLang("vmoji_layer_show_all"),onclick:()=>this.setActiveGrid("stickers",e.id)}:void 0},void 0),(0,s.jsx)("div",Object.assign({className:"VmojiAvatarModal__blocks"},{children:e.pack_ids.slice(0,5).map((e=>(0,s.jsx)(k.VmojiStickerPack,{stickerPack:this.getRecommendationsPackById(e)},e)))}),void 0)]},e.id)))}renderActions(){const{canEdit:e}=this.props,t=(0,E.partConfigEnabled)("vmoji_web2_show_share_box");return(0,s.jsxs)(s.Fragment,{children:[t&&(0,s.jsx)("span",Object.assign({className:"VmojiAvatarModal__action",onClick:()=>this.shareBox()},{children:(0,s.jsx)(S.default,{},void 0)}),void 0),e&&(0,s.jsx)(u.default,Object.assign({position:"b",align:"right",trigger:"hover",appearance:"fancy",data:this.getActions()},{children:(0,s.jsx)("span",Object.assign({className:"VmojiAvatarModal__action","aria-hidden":!0},{children:(0,s.jsx)(C.default,{},void 0)}),void 0)}),void 0)]},void 0)}renderFitting(){const{showProductFitting:e,stickerRenders:t}=this.state,i=this.getCurrentProduct();return e&&i?(0,s.jsx)(b.VmojiProductPreview,{className:"VmojiAvatarModal__fitting",product:i,close:()=>this.setIsProductPreview(!1),stickerRenders:t,updateStickerRenders:this.updateStickerRenders},void 0):null}renderSnackbar(){const{showProductSnackbar:e}=this.state,t=this.getCurrentProduct();return(0,s.jsx)(x.VmojiSnackbar,Object.assign({isShown:e,onExited:()=>this.setActiveProduct(null)},{children:(0,s.jsx)("div",Object.assign({className:"VmojiAvatarModal__selectedProduct"},{children:t&&(0,s.jsx)(f.VmojiSelectedProduct,{product:t,buyProduct:()=>(0,P.sendProduct)(t.id),tryProduct:()=>this.setIsProductPreview(!0)},void 0)}),void 0)}),void 0)}renderGrid(){const{showGrid:e}=this.state;return"products"===e?this.renderProductsGrid():"stickers"===e?this.renderStickersGrid():void 0}renderProductsGrid(){var e;const t=this.getCurrentCharacter();return(0,s.jsx)("div",Object.assign({className:"VmojiAvatarModal__grid"},{children:null===(e=t.product_ids)||void 0===e?void 0:e.map((e=>{const t=this.getProductById(e);return(0,s.jsx)(j.VmojiProductItem,{product:t,small:!1,isActive:this.state.selectedProductId===t.id,onClick:e=>this.handleProductClick(e,t)},t.id)}))}),void 0)}renderStickersGrid(){const{showGridBlockId:e}=this.state;if(!e)return null;const t=this.getBlockById(e);return(0,s.jsx)("div",Object.assign({className:"VmojiAvatarModal__grid"},{children:t.pack_ids.map((e=>(0,s.jsx)(k.VmojiStickerPack,{stickerPack:this.getRecommendationsPackById(e),size:"large"},e)))}),void 0)}renderHeader(){const{showGrid:e,showGridBlockId:t}=this.state;if("none"===e)return null;let i="";if("products"===e)i=N.getLang("vmoji_layer_products_title");else if("stickers"===e&&t){i=this.getBlockById(t).title}return(0,s.jsx)(d.default.Header,{title:i,backText:N.getLang("vmoji_layer_back"),onBack:()=>this.setActiveGrid("none"),onClose:()=>{}},void 0)}stickerRendersToDictionary(e){return e.reduce(((e,t)=>t.id?Object.assign(Object.assign({},e),{[t.id]:t}):e),{})}filterStickersPackPreview(e){const t=[],i=[];return e.forEach((e=>e.is_active?t.push(e):i.push(e))),{activeStickerPacks:t,hiddenStickerPacks:i}}getCharacterById(e){return this.props.characters.find((t=>t.id===e))}getCurrentCharacter(){return this.getCharacterById(this.props.avatar.character_id)}getCharacterPreviewUrl(){const{stickerRenders:e}=this.props,{preview:t}=this.getCurrentCharacter();if(!t||!t.body)return"/images/svg_icons/vmoji/vmoji_stub_body.svg";const i=null==e?void 0:e.find((e=>e.id===t.body));return i&&!i.is_stub&&i.images?(0,n.getImageSize)(i.images,180,"light"):"/images/svg_icons/vmoji/vmoji_stub_body.svg"}getCharacterPreviewColor(){const{preview:e}=this.getCurrentCharacter();if(!e)return"";const{background_color:t}=e;return t?(0,n.argb2rgba)(V.colorScheme.isDarkScheme()?t.dark:t.light):""}getActions(){const{restore:e}=this.props,{isAvatarActive:t}=this.state;return[{text:N.getLang("vmoji_layer_recreate_character"),onClick:({nativeEvent:t})=>(0,c.showVmojiConstructor)(t,{create:""},e)},{text:t?N.getLang("vmoji_layer_deactivate_character"):N.getLang("vmoji_layer_activate_character"),negative:t,onClick:()=>this.toggleCharacter()}]}getProductById(e){return this.props.products.find((t=>t.id===e))}getStickerPackById(e){const{stickerPacks:t}=this.state;return[...t.activeStickerPacks,...t.hiddenStickerPacks].find((t=>t.id===e))}getRecommendationsPackById(e){var t;return null===(t=this.props.recommendations.packs)||void 0===t?void 0:t.find((t=>t.id===e))}getCurrentProduct(){const{selectedProductId:e}=this.state;return e?this.getProductById(e):null}getBlockById(e){const{blocks:t}=this.props.recommendations;return t.find((t=>t.id===e))}fetchStickerPacks(){const{nextFrom:e,activeStickerPacks:t,hiddenStickerPacks:i}=this.state.stickerPacks;return e?new Promise(((s,a)=>{(0,r.vmojiGetStickerPacks)({start_from:e}).then((({next_from:e,previews:a})=>{const{activeStickerPacks:r,hiddenStickerPacks:o}=this.filterStickersPackPreview(a);return this.setState({stickerPacks:{nextFrom:e,activeStickerPacks:[...t,...r],hiddenStickerPacks:[...i,...o]}}),s(!0)})).catch((()=>a()))})):Promise.resolve()}shareBox(){const{avatar:e,packId:t}=this.props;(0,O.showBox)("like.php",{act:"publish_box",object:`vmoji${e.id}${t?`_${t}`:""}`})}toggleCharacter(){const{userId:e,avatar:t}=this.props,{isAvatarActive:i}=this.state;(0,r.vmojiSetAvatarState)(`${e}_${t.character_id}`,!i).then((()=>{this.setState({isAvatarActive:!i})})).catch((e=>{var t;(0,I.topError)((null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.error_msg)||N.getLang("global_unknown_error"))}))}setActiveGrid(e,t=null){this.setState({showGrid:e,showGridBlockId:t})}setActiveProduct(e){this.setState({selectedProductId:e})}toggleStickerPack(e){const t=this.getStickerPackById(e);t&&(t.is_active?r.storeDeactivateProduct:r.storeActivateProduct)(e).then((()=>{const{activeStickerPacks:t,hiddenStickerPacks:i,nextFrom:s}=this.state.stickerPacks,a=JSON.parse(JSON.stringify([...t,...i])),r=a.find((t=>t.id===e));r.is_active=!r.is_active;const{activeStickerPacks:o,hiddenStickerPacks:n}=this.filterStickersPackPreview(a);this.setState({stickerPacks:{activeStickerPacks:o,hiddenStickerPacks:n,nextFrom:s}})})).catch((e=>{var t;(0,I.topError)((null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.error_msg)||N.getLang("global_unknown_error"))}))}setIsProductPreview(e){this.setState({showProductFitting:e})}fetchRecommendationBlockById(e){return new Promise(((t,i)=>{(0,r.vmojiGetStickerPacksRecommendationBlock)(e).then((({block:e,packs:i})=>(console.log(e,i),t(!0)))).catch((()=>i()))}))}}},823535:(e,t,i)=>{"use strict";i.d(t,{VmojiBadge:()=>a});var s=i(785893);const a=({className:e="",text:t,type:i})=>(0,s.jsx)("div",Object.assign({className:`VmojiBadge VmojiBadge--${i} ${e}`},{children:t}),void 0)},664590:(e,t,i)=>{"use strict";i.d(t,{VmojiCharacterCreationSuggest:()=>n});var s=i(785893),a=i(70162),r=i(812095),o=i(783199);const n=({className:e="",onClick:t})=>(0,s.jsxs)("div",Object.assign({className:`VmojiCharacterCreationSuggest ${e}`,onClick:t},{children:[(0,s.jsxs)("div",Object.assign({className:"VmojiCharacterCreationSuggest__content"},{children:[(0,s.jsx)(r.default,{className:"VmojiCharacterCreationSuggest__icon"},void 0),(0,s.jsx)("span",Object.assign({className:"VmojiCharacterCreationSuggest__text"},{children:a.getLang("vmoji_layer_new_character")}),void 0)]}),void 0),(0,s.jsx)(o.default,{className:"VmojiCharacterCreationSuggest__arrow"},void 0)]}),void 0)},193413:(e,t,i)=>{"use strict";i.d(t,{VmojiCharacterEditLink:()=>n});var s=i(570655),a=i(785893),r=i(621748),o=i(86894);const n=e=>{var{children:t,className:i}=e,n=(0,s.__rest)(e,["children","className"]);return(0,a.jsx)(o.Button,Object.assign({className:`VmojiCharacterEditLink__button ${i}`,size:"s",mode:"tertiary",appearance:"accent",before:(0,a.jsx)(r.default,{},void 0)},n,{children:(0,a.jsx)(o.Text,Object.assign({weight:"2"},{children:t}),void 0)}),void 0)}},928424:(e,t,i)=>{"use strict";i.d(t,{VmojiCharacterPreview:()=>r});var s=i(785893),a=i(659397);const r=({color:e,url:t,size:i=180,disabled:r=!1})=>{const o=(0,a.classNames)("VmojiCharacterPreview",`VmojiCharacterPreview--${i}`,{"VmojiCharacterPreview--disable":r});return(0,s.jsx)("div",{className:o,style:{backgroundImage:`url('${t}')`,backgroundColor:e}},void 0)}},702272:(e,t,i)=>{"use strict";i.d(t,{VmojiModalSection:()=>r});var s=i(785893),a=i(659397);const r=({className:e="",children:t})=>(0,s.jsx)("div",Object.assign({className:(0,a.classNames)("VmojiModalSection",e)},{children:t}),void 0)},639792:(e,t,i)=>{"use strict";i.d(t,{VmojiModalSectionHeader:()=>r});var s=i(785893),a=i(91574);const r=({title:e,link:t})=>(0,s.jsxs)("div",Object.assign({className:"VmojiModalSectionHeader"},{children:[(0,s.jsx)("span",Object.assign({className:"VmojiModalSectionHeader__title"},{children:e}),void 0),t&&(0,s.jsx)(a.default,Object.assign({className:"VmojiModalSectionHeader__link",onClick:t.onclick},{children:t.title}),void 0)]}),void 0)},912860:(e,t,i)=>{"use strict";i.d(t,{VmojiProductItem:()=>v});var s=i(785893),a=i(823535),r=i(605382),o=i(70162),n=i(659397),c=i(138163),d=i(846499),l=i(480758),u=i(911650),m=i(511417);const v=({product:e,onClick:t,isActive:i=!1,small:v})=>{const{title:h,price:g,images:p}=e,j=m.colorScheme.isDarkScheme()?"dark":"light",_=(0,r.getImageSize)(p||[],v?72:98,j),k="VmojiProductItem__icon";let x="",f=null;const{is_locked:b,is_unlocked:P,is_purchased:w}=e;b?P||w?(f=(0,s.jsx)(c.default,{className:`${k} ${k}--green`},void 0),x=o.getLang("vmoji_layer_item_available")):(f=(0,s.jsx)(d.default,{className:`${k} ${k}--gray`},void 0),x=o.getLang("vmoji_layer_item_locked")):w?(f=(0,s.jsx)(u.default,{className:`${k} ${k}--purple`},void 0),x=o.getLang("vmoji_layer_item_already_purchased")):(f=(0,s.jsx)(l.default,{className:`${k} ${k}--purple`},void 0),x=o.getLang("vmoji_layer_item_price",e.price.current));const S=(0,n.classNames)("VmojiProductItem",{"VmojiProductItem--active":i,"VmojiProductItem--small":v,"VmojiProductItem--purchased":e.is_purchased});return(0,s.jsxs)("div",Object.assign({className:S,onClick:t},{children:[(0,s.jsxs)("div",Object.assign({className:"VmojiProductItem__inner",style:{backgroundImage:`url(${_})`}},{children:[(()=>{const{badge:t}=e;return t?(0,s.jsx)(a.VmojiBadge,{className:"VmojiProductItem__badge",type:t.type,text:t.text||t.type},void 0):null})(),f]}),void 0),!v&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",Object.assign({className:"VmojiProductItem__title"},{children:h}),void 0),!e.is_purchased&&!e.is_locked&&g.regular&&(0,s.jsx)("span",Object.assign({className:"VmojiProductItem__oldPrice"},{children:o.getLang("vmoji_layer_item_price",g.regular)}),void 0),(0,s.jsx)("span",Object.assign({className:"VmojiProductItem__price"},{children:x}),void 0)]},void 0)]}),void 0)}},622323:(e,t,i)=>{"use strict";i.d(t,{VmojiProductPreview:()=>j});var s=i(785893),a=i(86894),r=i(733024),o=i(659397),n=i(667294),c=i(288420),d=i(740733),l=i(575867),u=i(928424),m=i(590359),v=i(608021),h=i(70162),g=i(605382),p=i(511417);const j=({className:e,product:t,close:i,stickerRenders:j,updateStickerRenders:_})=>{var k,x,f,b;const[P,w]=(0,n.useState)();(0,n.useEffect)((()=>{var e;(0,l.vmojiGetCharacterById)((null===(e=t.preview)||void 0===e?void 0:e.character_id)||"",!0).then((({character:e,sticker_renders:t})=>{_(t||[]),w(e)})).catch((e=>{console.log(e)}))}),[]);const S=e=>j[e];let C="";if(P&&P.preview){const{background_color:e}=P.preview;e&&(C=(0,g.argb2rgba)(p.colorScheme.isDarkScheme()?e.dark:e.light))}const V=S((null===(k=null==P?void 0:P.preview)||void 0===k?void 0:k.body)||"");let E="/images/svg_icons/vmoji/vmoji_stub_body.svg";!V||V.is_stub||V.is_rendering||(E=(0,g.getImageSize)(V.images||[],164));const N=t.price.current,y=0===N,O=null===(x=t.preview)||void 0===x?void 0:x.caption,I=(0,o.classNames)("VmojiProductPreview",e);return(0,s.jsxs)("div",Object.assign({className:I},{children:[(0,s.jsx)("div",{className:"VmojiProductPreview__overlay",onClick:i},void 0),(0,s.jsxs)("div",Object.assign({className:"VmojiProductPreview__inner"},{children:[(0,s.jsx)(r.default,{className:"VmojiProductPreview__close",onClick:i},void 0),P&&j&&V?(0,s.jsxs)(s.Fragment,{children:[O&&(0,s.jsx)(a.Caption,Object.assign({className:"VmojiProductPreview__title"},{children:O}),void 0),(0,s.jsx)(u.VmojiCharacterPreview,{url:E,color:C,size:164},void 0),(0,s.jsx)("div",Object.assign({className:"VmojiProductPreview__previews"},{children:null===(b=null===(f=P.preview)||void 0===f?void 0:f.stickers)||void 0===b?void 0:b.slice(0,3).map((e=>{const t=S(e);let i="/images/svg_icons/vmoji/vmoji_stub_sticker.svg";if(t){const e=(0,g.getImageSize)(t.images,96);e&&(i=e)}return(0,s.jsx)("img",{src:i,className:"VmojiProductPreview__preview"},e)}))}),void 0),(0,s.jsx)(c.default,Object.assign({appearance:y?"primary":"positive",onClick:()=>(0,m.sendProduct)(t.id)},{children:y?h.getLang("vmoji_layer_item_free"):(0,v.langStr)(h.getLang("vmoji_layer_buy_at_price"),"price",h.getLang("vmoji_layer_item_price",N))}),void 0)]},void 0):(0,s.jsx)(d.default,{},void 0)]}),void 0)]}),void 0)}},235808:(e,t,i)=>{"use strict";i.d(t,{VmojiPurchaseBox:()=>v});var s=i(785893),a=i(667294),r=i(70162),o=i(146143),n=i(41929),c=i(288420),d=i(118690),l=i(575867),u=i(605382),m=i(501389);function v({product:e,balance:t,onDone:i,onClose:v}){const{title:h,images:g,price:{current:p}}=e,j=0===p,[_,k]=(0,a.useState)(!1),x=e=>{var t;null===(t=(0,m.curBox)())||void 0===t||t.hide(),v(e)},f=j?(0,s.jsxs)("span",Object.assign({className:"VmojiPurchaseBoxHeader__cost"},{children:[r.getLang("vmoji_price_label")," ",r.getLang("vmoji_price_free")]}),void 0):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",Object.assign({className:"VmojiPurchaseBoxHeader__cost"},{children:[r.getLang("vmoji_price_label")," ",r.getLang("vmoji_price",p)]}),void 0),(0,s.jsx)("span",Object.assign({className:"VmojiPurchaseBoxHeader__balance"},{children:r.getLang("vmoji_balance",t)}),void 0)]},void 0),b=(0,s.jsxs)("div",Object.assign({className:"VmojiPurchaseBoxHeader"},{children:[(0,s.jsx)("div",{className:"VmojiPurchaseBoxHeader__preview",style:{backgroundImage:`url(${(0,u.getImageSize)(g||[],64)})`}},void 0),(0,s.jsxs)("div",Object.assign({className:"VmojiPurchaseBoxHeader__content"},{children:[(0,s.jsx)("p",Object.assign({className:"VmojiPurchaseBoxHeader__title"},{children:h}),void 0),f]}),void 0)]}),void 0),P=[(0,s.jsx)(c.default,Object.assign({appearance:"secondary",onClick:x},{children:r.getLang("global_cancel")}),1),(0,s.jsx)(d.default,Object.assign({loading:_,onClick:()=>{k(!0),(0,l.vmojiPurchaseProduct)(e.id,!0).then((e=>{i(e),x()})).catch((e=>{(0,o.showFastBox)(r.getLang("global_error"),r.getLang("global_error")),x(e)})).finally((()=>{k(!1)}))}},{children:j?r.getLang("vmoji_get"):r.getLang("vmoji_pay")}),2)];return(0,s.jsx)(n.BoxModal,Object.assign({className:"VmojiPurchaseBox",hasScroll:!1,title:b,onClose:x,actionButtons:P},{children:(0,s.jsx)("div",Object.assign({className:"VmojiPurchaseBox__content"},{children:(0,s.jsx)("p",Object.assign({className:"VmojiPurchaseBox__message"},{children:j?r.getLang("vmoji_confirmation_message_free"):r.getLang("vmoji_confirmation_message_sum",p)}),void 0)}),void 0)}),void 0)}},590359:(e,t,i)=>{"use strict";i.d(t,{sendProduct:()=>n});var s=i(785893),a=i(261508),r=i(235808),o=i(575867);const n=e=>new Promise(((t,i)=>{const n=e=>{t(e)},c=()=>{t(!1)};Promise.all([(0,o.vmojiPurchaseProduct)(e),(0,o.vmojiGetLangs)(o.VmojiLangSection.PURCHASE)]).then((([{confirmation:e}])=>{if(!e)throw new Error("Confirmation is undefined");const{product:t,balance:i}=e;(0,a.showComponentInBox)((0,s.jsx)(r.VmojiPurchaseBox,{product:t,balance:i,onDone:n,onClose:c},void 0),{width:520,onDestroy:c})})).catch((s=>{var a;504!==(null===(a=null==s?void 0:s.error)||void 0===a?void 0:a.error_code)?i(s):(e=>new Promise(((t,i)=>{window.ajax.post("al_payments.php",{act:"getvotes_box",product_id:e},{onDone:()=>{t(!0)},onFail:e=>(i(e),!0)})})))(e).then((()=>{(0,o.vmojiPurchaseProduct)(e,!0).then(t).catch(i)})).catch(i)}))}))},26363:(e,t,i)=>{"use strict";i.d(t,{VmojiSelectedProduct:()=>c});var s=i(785893),a=i(288420),r=i(364185),o=i(70162),n=i(605382);const c=({product:e,buyProduct:t,tryProduct:i})=>{const{unlock_info:c}=e;return(0,s.jsxs)("div",Object.assign({className:"VmojiSelectedProduct"},{children:[(0,s.jsxs)("div",Object.assign({className:"VmojiSelectedProduct__inner"},{children:[(0,s.jsx)("div",{className:"VmojiSelectedProduct__preview",style:{backgroundImage:`url(${(0,n.getImageSize)(e.images||[],72)})`}},void 0),(0,s.jsxs)("div",Object.assign({className:"VmojiSelectedProduct__content"},{children:[(0,s.jsx)("span",Object.assign({className:"VmojiSelectedProduct__name"},{children:c?c.title:e.title}),void 0),(0,s.jsx)("span",Object.assign({className:"VmojiSelectedProduct__description"},{children:c?c.text:e.description}),void 0)]}),void 0)]}),void 0),(0,s.jsxs)("div",Object.assign({className:"VmojiSelectedProduct__actions"},{children:[e.is_locked&&!e.is_unlocked?(()=>{const{unlock_info:t}=e;if(!t)return null;const{button:i}=t;return i&&i.action?(0,s.jsx)(a.default,Object.assign({appearance:"primary",onClick:()=>{var e;return window.open(null===(e=i.action)||void 0===e?void 0:e.url,"_blank")}},{children:i.title}),void 0):null})():(()=>{const i=e.price.current,r=0===i;return(0,s.jsx)(a.default,Object.assign({appearance:r?"primary":"positive",onClick:()=>t(e.id)},{children:o.getLang(r?"vmoji_layer_item_free":"vmoji_layer_item_price",i)}),void 0)})(),e.preview&&(0,s.jsx)(a.default,Object.assign({className:"VmojiSelectedProduct__tryButton",appearance:"secondary",onClick:()=>i()},{children:(0,s.jsx)(r.default,{className:"VmojiSelectedProduct__tryButtonIcon"},void 0)}),void 0)]}),void 0)]}),void 0)}},296825:(e,t,i)=>{"use strict";i.d(t,{VmojiSnackbar:()=>r});var s=i(785893),a=i(429697);const r=({isShown:e,onExited:t,children:i})=>(0,s.jsx)(a.default,Object.assign({in:e,classNames:{enter:"VmojiSnackbar--enter",enterActive:"VmojiSnackbar--enterActive",exitActive:"VmojiSnackbar--exitActive",exit:"VmojiSnackbar--exit"},onExited:t,addEndListener:(e,t)=>{e.addEventListener("transitionend",(e=>{e.target===e.currentTarget&&t()}),!1)},unmountOnExit:!0},{children:i}),void 0)},872289:(e,t,i)=>{"use strict";i.d(t,{VmojiStickerPack:()=>d});var s=i(785893),a=i(823535),r=i(605382),o=i(659397),n=i(70162),c=i(342269);const d=({className:e="",stickerPack:t,size:i="regular"})=>{var d,l;const u=(0,o.classNames)("VmojiStickerPack",{"VmojiStickerPack--large":"large"===i},e);return(0,s.jsxs)("div",Object.assign({className:u,onClick:()=>window.Emoji.previewSticker(t.id),title:t.title,style:{width:i}},{children:[(0,s.jsx)("div",Object.assign({className:"VmojiStickerPack__preview",style:{backgroundImage:`url(${(()=>{const{icon:e}=t;return e?(0,r.getStickerIconUrl)(e,(0,c.isRetina)()?"square_2x.png":"square.png"):""})()})`,height:i}},{children:(()=>{const{badge:e}=t;if(!e)return null;const{subtype:i,text:r}=e;return i?(0,s.jsx)(a.VmojiBadge,{className:"VmojiStickerPack__badge",type:i,text:r||i},void 0):null})()}),void 0),(0,s.jsx)("div",Object.assign({className:"VmojiStickerPack__name"},{children:t.title}),void 0),!t.is_purchased&&(null===(d=t.price)||void 0===d?void 0:d.discount)&&(null===(l=t.price)||void 0===l?void 0:l.regular)&&(0,s.jsx)("div",Object.assign({className:"VmojiStickerPack__discount"},{children:n.getLang("vmoji_layer_item_price",t.price.regular)}),void 0),(0,s.jsx)("div",Object.assign({className:"VmojiStickerPack__price"},{children:t.is_purchased?n.getLang("vmoji_layer_item_already_purchased"):t.is_active?t.price&&0!==t.price.current?n.getLang("vmoji_layer_item_price",t.price.current):n.getLang("vmoji_layer_item_free"):n.getLang("vmoji_layer_item_locked")}),void 0)]}),void 0)}},262038:(e,t,i)=>{"use strict";i.d(t,{VmojiStickerPackExtended:()=>m});var s=i(785893),a=i(288420),r=i(258668),o=i(659397),n=i(70162),c=i(605382),d=i(342269),l=i(511417),u=i(281536);const m=({className:e="",stickersPack:t,isActive:i,canManage:m,toggleStickerPack:v})=>{var h;const g=(0,o.classNames)("VmojiStickerPackExtended",e,{"VmojiStickerPackExtended--disabled":!i});return(0,s.jsxs)("div",Object.assign({className:g,onClick:()=>i?window.Emoji.previewSticker(t.id):null},{children:[(0,s.jsxs)("div",Object.assign({className:"VmojiStickerPackExtended__header"},{children:[(0,s.jsxs)("div",Object.assign({className:"VmojiStickerPackExtended__left"},{children:[!i&&(0,s.jsx)("img",{src:(()=>{const{icon:e}=t;return e?(0,c.getStickerIconUrl)(e,(0,d.isRetina)()?"square_2x.png":"square.png"):""})(),className:"VmojiStickerPackExtended__preview"},void 0),(0,s.jsxs)("div",Object.assign({className:"VmojiStickerPackExtended__content"},{children:[(0,s.jsx)("span",Object.assign({className:"VmojiStickerPackExtended__name"},{children:t.title}),void 0),(0,s.jsx)("span",Object.assign({className:"VmojiStickerPackExtended__description"},{children:t.description}),void 0)]}),void 0)]}),void 0),(0,s.jsx)("div",Object.assign({className:"VmojiStickerPackExtended__right"},{children:m&&t.is_purchased?(()=>{const e=[{text:t.is_active?n.getLang("vmoji_layer_hide"):n.getLang("vmoji_layer_show_again"),negative:t.is_active,onClick:e=>{e.preventDefault(),e.stopPropagation(),v(t.id)}}];return(0,s.jsx)(r.default,Object.assign({position:"b",align:"right",trigger:"hover",appearance:"fancy",data:e},{children:(0,s.jsx)("div",Object.assign({className:"VmojiStickerPackExtended__more","aria-hidden":!0},{children:(0,s.jsx)(u.default,{},void 0)}),void 0)}),void 0)})():(0,s.jsx)(a.default,Object.assign({appearance:"secondary"},{children:n.getLang("vmoji_layer_show_sticker_pack")}),void 0)}),void 0)]}),void 0),i&&(0,s.jsx)("div",Object.assign({className:"VmojiStickerPackExtended__items"},{children:null===(h=t.stickers)||void 0===h?void 0:h.map((e=>(0,s.jsx)("img",{src:(0,c.getImageSize)((l.colorScheme.isDarkScheme()?e.images_with_background:e.images)||[],88),className:"VmojiStickerPackExtended__item"},e.sticker_id)))}),void 0)]}),void 0)}},605382:(e,t,i)=>{"use strict";i.d(t,{getImageSize:()=>r,getStickerIconUrl:()=>o,argb2rgba:()=>n});var s=i(342269),a=i(511417);function r(e,t,i){let r;e.sort(((e,t)=>e.width-t.width)),(0,s.isRetina)()&&(t*=2),void 0===i&&(i=a.colorScheme.isDarkScheme()?"dark":"light");for(const s of e)if(s.url){if(s.width>=t&&(!i||s.theme===i))return s.url;r=s}return r?r.url:""}function o(e,t){return`${null==e?void 0:e.base_url}/${t}${e.version?`?${e.version}`:""}`}function n(e=""){return e.replace(/#(..)(......)/,"#$2$1")}},944340:(e,t,i)=>{"use strict";i.d(t,{showVmojiAvatarBox:()=>l,showVmojiConstructor:()=>u});var s=i(785893),a=i(501389),r=i(575867),o=i(295308),n=i(261508),c=i(226323),d=i(274642);function l(e,t,i){const d=`${e}_${t}`,u=(0,a.showBoxLoader)();Promise.all([(0,r.vmojiGetAvatar)(),(0,r.vmojiGetAvatar)(d)]).then((([d,m])=>{if((0,a.isBoxLoadingCancelled)(u))return;const{avatar:v,characters:h,products:g,sticker_renders:p}=m;if(!v)return(0,c.topError)("Avatar is undefined"),void(0,a.hideBoxLoader)();if(!(null==h?void 0:h.length))return(0,c.topError)("Character is undefined"),void(0,a.hideBoxLoader)();const{avatar:j}=d,_=e===window.vk.id,k=void 0!==j&&(null==j?void 0:j.id)===v.id,x={};_||(x.ref_user_id=e);const f={character_id:v.character_id};k||(void 0!==i?f.pack_ids=String(i):f.filter="default"),Promise.all([(0,r.vmojiGetStickerPacksRecommendationBlocks)(x),(0,r.vmojiGetStickerPacks)(f),(0,r.vmojiGetLangs)(r.VmojiLangSection.LAYER)]).then((([r,c])=>{(0,a.isBoxLoadingCancelled)(u)||((0,a.hideBoxLoader)(),(0,n.showComponentInBox)((0,s.jsx)(o.VmojiAvatarModal,{close:()=>{var e;return null===(e=(0,a.curBox)())||void 0===e?void 0:e.hide()},isOwn:_,canEdit:k,userId:window.vk.id,hasOwnAvatar:void 0!==j,packId:i,avatar:v,characters:h||[],products:g||[],stickerRenders:p||[],recommendations:Object.assign({},r),stickerPacks:Object.assign({},c),restore:()=>{l(e,t,i)}},void 0),{width:630}))})).catch((e=>{(0,c.topError)(e)}))})).catch((e=>{(0,c.topError)(e)}))}function u(e,t,i){const s={layer:!0,onHide:()=>{null==i||i()}};t=Object.assign(Object.assign({},t),{disableshare:""}),s.urlHash=new URLSearchParams(Object.entries(t)).toString().replace(/=(?=&|$)/gm,""),(0,d.showApp)(e,7929683,!1,null,null,s)}},70580:(e,t,i)=>{"use strict";i.d(t,{subscribeToQueue:()=>a});var s=i(997109);const a=(e,t,i)=>{if(!window.Notifier)return;const a=setInterval((()=>{window.Notifier.addKey({key:e,ts:t},((e,t)=>{((e,t)=>{e&&e.events&&e.events.length&&e.events.forEach((({entity_type:e,data:i})=>{"vmoji"===e&&i&&"stickers"===i.type&&t(i.sticker_renders||[])}))})(t,i)}))}),1e4);(0,s.pushNavDestroy)((()=>clearInterval(a)))}}}]);try{stManager.done("dist/f79ca980fcc26ca55859ad5158f5fea8.a21da118a04c4c099bce.js")}catch(e){}