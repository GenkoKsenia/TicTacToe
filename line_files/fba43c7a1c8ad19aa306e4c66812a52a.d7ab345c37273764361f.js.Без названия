/*! For license information please see fba43c7a1c8ad19aa306e4c66812a52a.d7ab345c37273764361f.js.LICENSE.txt */
(self.webpackChunkvk=self.webpackChunkvk||[]).push([[882],{10536:(e,t,r)=>{"use strict";function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},i.apply(this,arguments)}r.d(t,{extends:()=>i})},154289:(e,t,r)=>{"use strict";r.d(t,{useVirtualizer:()=>c});var i=r(10536),s=r(667294),a=r(135432),n="undefined"!=typeof document?s.useLayoutEffect:s.useEffect;function o(e){var t=s.useReducer((function(){return{}}),{})[1],r=(0,i.extends)({},e,{onChange:function(r){t(),null==e.onChange||e.onChange(r)}}),o=s.useState((function(){return new a.Virtualizer(r)}))[0];return o.setOptions(r),s.useEffect((function(){return o._didMount()}),[]),n((function(){return o._willUpdate()})),o}function c(e){return o((0,i.extends)({observeElementRect:a.observeElementRect,observeElementOffset:a.observeElementOffset,scrollToFn:a.elementScroll},e))}},883349:(e,t,r)=>{"use strict";function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},i.apply(this,arguments)}r.d(t,{extends:()=>i})},135432:(e,t,r)=>{"use strict";r.d(t,{Virtualizer:()=>h,defaultRangeExtractor:()=>n,elementScroll:()=>v,observeElementOffset:()=>l,observeElementRect:()=>o,observeWindowOffset:()=>d,observeWindowRect:()=>c,windowScroll:()=>m});var i=r(883349),s=r(496610),a=function(e){return e},n=function(e){for(var t=Math.max(e.startIndex-e.overscan,0),r=Math.min(e.endIndex+e.overscan,e.count-1),i=[],s=t;s<=r;s++)i.push(s);return i},o=function(e,t){var r=e.scrollElement;if(r){var i=function(e){var r=e.width,i=e.height;t({width:Math.round(r),height:Math.round(i)})};i(r.getBoundingClientRect());var s=new ResizeObserver((function(e){var t=e[0];if(null!=t&&t.borderBoxSize){var s=t.borderBoxSize[0];if(s)return void i({width:s.inlineSize,height:s.blockSize})}i(r.getBoundingClientRect())}));return s.observe(r,{box:"border-box"}),function(){s.unobserve(r)}}},c=function(e,t){var r=e.scrollElement;if(r){var i=function(){t({width:r.innerWidth,height:r.innerHeight})};return i(),r.addEventListener("resize",i,{passive:!0}),function(){r.removeEventListener("resize",i)}}},l=function(e,t){var r=e.scrollElement;if(r){var i=function(){t(r[e.options.horizontal?"scrollLeft":"scrollTop"])};return i(),r.addEventListener("scroll",i,{passive:!0}),function(){r.removeEventListener("scroll",i)}}},d=function(e,t){var r=e.scrollElement;if(r){var i=function(){t(r[e.options.horizontal?"scrollX":"scrollY"])};return i(),r.addEventListener("scroll",i,{passive:!0}),function(){r.removeEventListener("scroll",i)}}},u=function(e,t,r){if(null!=t&&t.borderBoxSize){var i=t.borderBoxSize[0];if(i)return Math.round(i[r.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[r.options.horizontal?"width":"height"])},m=function(e,t,r){var i,s,a=t.adjustments,n=void 0===a?0:a,o=t.behavior,c=e+n;null==(i=r.scrollElement)||null==i.scrollTo||i.scrollTo(((s={})[r.options.horizontal?"left":"top"]=c,s.behavior=o,s))},v=function(e,t,r){var i,s,a=t.adjustments,n=void 0===a?0:a,o=t.behavior,c=e+n;null==(i=r.scrollElement)||null==i.scrollTo||i.scrollTo(((s={})[r.options.horizontal?"left":"top"]=c,s.behavior=o,s))},h=function(e){var t,r,o=this;this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=(t=null,r=function(){return t||("undefined"!=typeof ResizeObserver?t=new ResizeObserver((function(e){e.forEach((function(e){o._measureElement(e.target,e)}))})):null)},{disconnect:function(){var e;return null==(e=r())?void 0:e.disconnect()},observe:function(e){var t;return null==(t=r())?void 0:t.observe(e,{box:"border-box"})},unobserve:function(e){var t;return null==(t=r())?void 0:t.unobserve(e)}}),this.range={startIndex:0,endIndex:0},this.setOptions=function(e){Object.entries(e).forEach((function(t){var r=t[0];void 0===t[1]&&delete e[r]})),o.options=(0,i.extends)({debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:a,rangeExtractor:n,onChange:function(){},measureElement:u,initialRect:{width:0,height:0},scrollMargin:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1},e)},this.notify=function(){null==o.options.onChange||o.options.onChange(o)},this.cleanup=function(){o.unsubs.filter(Boolean).forEach((function(e){return e()})),o.unsubs=[],o.scrollElement=null},this._didMount=function(){return o.measureElementCache.forEach(o.observer.observe),function(){o.observer.disconnect(),o.cleanup()}},this._willUpdate=function(){var e=o.options.getScrollElement();o.scrollElement!==e&&(o.cleanup(),o.scrollElement=e,o._scrollToOffset(o.scrollOffset,{adjustments:void 0,behavior:void 0}),o.unsubs.push(o.options.observeElementRect(o,(function(e){var t=o.scrollRect;o.scrollRect=e,(o.options.horizontal?e.width!==t.width:e.height!==t.height)&&o.maybeNotify()}))),o.unsubs.push(o.options.observeElementOffset(o,(function(e){o.scrollAdjustments=0,o.scrollOffset!==e&&(null!==o.isScrollingTimeoutId&&(clearTimeout(o.isScrollingTimeoutId),o.isScrollingTimeoutId=null),o.isScrolling=!0,o.scrollDirection=o.scrollOffset<e?"forward":"backward",o.scrollOffset=e,o.maybeNotify(),o.isScrollingTimeoutId=setTimeout((function(){o.isScrollingTimeoutId=null,o.isScrolling=!1,o.scrollDirection=null,o.maybeNotify()}),o.options.scrollingDelay))}))))},this.getSize=function(){return o.scrollRect[o.options.horizontal?"width":"height"]},this.memoOptions=(0,s.memo)((function(){return[o.options.count,o.options.paddingStart,o.options.scrollMargin,o.options.getItemKey]}),(function(e,t,r,i){return o.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:t,scrollMargin:r,getItemKey:i}}),{key:!1}),this.getFurthestMeasurement=function(e,t){for(var r=new Map,i=new Map,s=t-1;s>=0;s--){var a=e[s];if(!r.has(a.lane)){var n=i.get(a.lane);if(null==n||a.end>n.end?i.set(a.lane,a):a.end<n.end&&r.set(a.lane,!0),r.size===o.options.lanes)break}}return i.size===o.options.lanes?Array.from(i.values()).sort((function(e,t){return e.end-t.end}))[0]:void 0},this.getMeasurements=(0,s.memo)((function(){return[o.memoOptions(),o.itemSizeCache]}),(function(e,t){var r=e.count,i=e.paddingStart,s=e.scrollMargin,a=e.getItemKey,n=o.pendingMeasuredCacheIndexes.length>0?Math.min.apply(Math,o.pendingMeasuredCacheIndexes):0;o.pendingMeasuredCacheIndexes=[];for(var c=o.measurementsCache.slice(0,n),l=n;l<r;l++){var d=a(l),u=1===o.options.lanes?c[l-1]:o.getFurthestMeasurement(c,l),m=u?u.end:i+s,v=t.get(d),h="number"==typeof v?v:o.options.estimateSize(l),f=m+h,p=u?u.lane:l%o.options.lanes;c[l]={index:l,start:m,size:h,end:f,key:d,lane:p}}return o.measurementsCache=c,c}),{key:!1,debug:function(){return o.options.debug}}),this.calculateRange=(0,s.memo)((function(){return[o.getMeasurements(),o.getSize(),o.scrollOffset]}),(function(e,t,r){return o.range=function(e){var t=e.measurements,r=e.outerSize,i=e.scrollOffset,s=t.length-1,a=f(0,s,(function(e){return t[e].start}),i),n=a;for(;n<s&&t[n].end<i+r;)n++;return{startIndex:a,endIndex:n}}({measurements:e,outerSize:t,scrollOffset:r})}),{key:!1,debug:function(){return o.options.debug}}),this.maybeNotify=(0,s.memo)((function(){var e=o.calculateRange();return[e.startIndex,e.endIndex,o.isScrolling]}),(function(){o.notify()}),{key:!1,debug:function(){return o.options.debug},initialDeps:[this.range.startIndex,this.range.endIndex,this.isScrolling]}),this.getIndexes=(0,s.memo)((function(){return[o.options.rangeExtractor,o.calculateRange(),o.options.overscan,o.options.count]}),(function(e,t,r,s){return e((0,i.extends)({},t,{overscan:r,count:s}))}),{key:!1,debug:function(){return o.options.debug}}),this.indexFromElement=function(e){var t=o.options.indexAttribute,r=e.getAttribute(t);return r?parseInt(r,10):(console.warn("Missing attribute name '"+t+"={index}' on measured element."),-1)},this._measureElement=function(e,t){var r,i=o.indexFromElement(e),s=o.measurementsCache[i];if(s){var a=o.measureElementCache.get(s.key);if(!e.isConnected)return o.observer.unobserve(e),void(e===a&&o.measureElementCache.delete(s.key));a!==e&&(a&&o.observer.unobserve(a),o.observer.observe(e),o.measureElementCache.set(s.key,e));var n=o.options.measureElement(e,t,o),c=n-(null!=(r=o.itemSizeCache.get(s.key))?r:s.size);0!==c&&(s.start<o.scrollOffset&&o._scrollToOffset(o.scrollOffset,{adjustments:o.scrollAdjustments+=c,behavior:void 0}),o.pendingMeasuredCacheIndexes.push(i),o.itemSizeCache=new Map(o.itemSizeCache.set(s.key,n)),o.notify())}},this.measureElement=function(e){e&&o._measureElement(e,void 0)},this.getVirtualItems=(0,s.memo)((function(){return[o.getIndexes(),o.getMeasurements()]}),(function(e,t){for(var r=[],i=0,s=e.length;i<s;i++){var a=t[e[i]];r.push(a)}return r}),{key:!1,debug:function(){return o.options.debug}}),this.getVirtualItemForOffset=function(e){var t=o.getMeasurements();return(0,s.notUndefined)(t[f(0,t.length-1,(function(e){return(0,s.notUndefined)(t[e]).start}),e)])},this.getOffsetForAlignment=function(e,t){var r=o.getSize();"auto"===t&&(t=e<=o.scrollOffset?"start":e>=o.scrollOffset+r?"end":"start"),"start"===t||("end"===t?e-=r:"center"===t&&(e-=r/2));var i=o.options.horizontal?"scrollWidth":"scrollHeight",s=(o.scrollElement?"document"in o.scrollElement?o.scrollElement.document.documentElement[i]:o.scrollElement[i]:0)-o.getSize();return Math.max(Math.min(s,e),0)},this.getOffsetForIndex=function(e,t){void 0===t&&(t="auto"),e=Math.max(0,Math.min(e,o.options.count-1));var r=(0,s.notUndefined)(o.getMeasurements()[e]);if("auto"===t)if(r.end>=o.scrollOffset+o.getSize()-o.options.scrollPaddingEnd)t="end";else{if(!(r.start<=o.scrollOffset+o.options.scrollPaddingStart))return[o.scrollOffset,t];t="start"}var i="end"===t?r.end+o.options.scrollPaddingEnd:r.start-o.options.scrollPaddingStart;return[o.getOffsetForAlignment(i,t),t]},this.isDynamicMode=function(){return o.measureElementCache.size>0},this.cancelScrollToIndex=function(){null!==o.scrollToIndexTimeoutId&&(clearTimeout(o.scrollToIndexTimeoutId),o.scrollToIndexTimeoutId=null)},this.scrollToOffset=function(e,t){var r=void 0===t?{}:t,i=r.align,s=void 0===i?"start":i,a=r.behavior;o.cancelScrollToIndex(),"smooth"===a&&o.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),o._scrollToOffset(o.getOffsetForAlignment(e,s),{adjustments:void 0,behavior:a})},this.scrollToIndex=function(e,t){var r=void 0===t?{}:t,i=r.align,a=void 0===i?"auto":i,n=r.behavior;e=Math.max(0,Math.min(e,o.options.count-1)),o.cancelScrollToIndex(),"smooth"===n&&o.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");var c=o.getOffsetForIndex(e,a),l=c[0],d=c[1];o._scrollToOffset(l,{adjustments:void 0,behavior:n}),"smooth"!==n&&o.isDynamicMode()&&(o.scrollToIndexTimeoutId=setTimeout((function(){if(o.scrollToIndexTimeoutId=null,o.measureElementCache.has(o.options.getItemKey(e))){var t=o.getOffsetForIndex(e,d)[0];(0,s.approxEqual)(t,o.scrollOffset)||o.scrollToIndex(e,{align:d,behavior:n})}else o.scrollToIndex(e,{align:d,behavior:n})})))},this.scrollBy=function(e,t){var r=(void 0===t?{}:t).behavior;o.cancelScrollToIndex(),"smooth"===r&&o.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),o._scrollToOffset(o.scrollOffset+e,{adjustments:void 0,behavior:r})},this.getTotalSize=function(){var e;return((null==(e=o.getMeasurements()[o.options.count-1])?void 0:e.end)||o.options.paddingStart)-o.options.scrollMargin+o.options.paddingEnd},this._scrollToOffset=function(e,t){var r=t.adjustments,i=t.behavior;o.options.scrollToFn(e,{behavior:i,adjustments:r},o)},this.measure=function(){o.itemSizeCache=new Map,o.notify()},this.setOptions(e),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach((function(e){o.itemSizeCache.set(e.key,e.size)})),this.maybeNotify()},f=function(e,t,r,i){for(;e<=t;){var s=(e+t)/2|0,a=r(s);if(a<i)e=s+1;else{if(!(a>i))return s;t=s-1}}return e>0?e-1:0}},496610:(e,t,r)=>{"use strict";function i(e,t,r){var i,s,a=null!=(i=r.initialDeps)?i:[];return function(){var i;r.key&&null!=r.debug&&r.debug()&&(i=Date.now());var n,o=e();if(!(o.length!==a.length||o.some((function(e,t){return a[t]!==e}))))return s;if(a=o,r.key&&null!=r.debug&&r.debug()&&(n=Date.now()),s=t.apply(void 0,o),r.key&&null!=r.debug&&r.debug()){var c=Math.round(100*(Date.now()-i))/100,l=Math.round(100*(Date.now()-n))/100,d=l/16,u=function(e,t){for(e=String(e);e.length<t;)e=" "+e;return e};console.info("%c⏱ "+u(l,5)+" /"+u(c,5)+" ms","\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl("+Math.max(0,Math.min(120-120*d,120))+"deg 100% 31%);",null==r?void 0:r.key)}return null==r||null==r.onChange||r.onChange(s),s}}function s(e,t){if(void 0===e)throw new Error("Unexpected undefined"+(t?": "+t:""));return e}r.d(t,{approxEqual:()=>a,memo:()=>i,notUndefined:()=>s});var a=function(e,t){return Math.abs(e-t)<1}},180271:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i=(0,r(28178).makeIcon)("Icon24VmojiOutline","vmoji_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="vmoji_outline_24"><path d="M9.998 2.9a.9.9 0 0 1-.9.9A5.306 5.306 0 0 0 3.8 9.107.9.9 0 0 1 2 9.1C2.005 5.185 5.18 2 9.098 2a.9.9 0 0 1 .9.9ZM8.5 9.549a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm5.956.754c.872-.445 1.878-.445 2.764.308a.766.766 0 0 1 .063 1.125.88.88 0 0 1-1.192.06l-.085-.066c-.252-.177-.477-.163-.748-.025a.977.977 0 0 0-.149.09l-.083.063a.881.881 0 0 1-1.11-.122.766.766 0 0 1 .063-1.125c.106-.09.266-.2.477-.309Zm-.1 4.692c.1-.543-.354-.995-.906-.995h-2.9c-.552 0-1.006.451-.906.995.026.138.057.26.093.347a2.442 2.442 0 0 0 1.325 1.322c.298.123.616.188.938.188a2.457 2.457 0 0 0 2.264-1.51 1.84 1.84 0 0 0 .092-.347ZM2 14.901a.9.9 0 0 1 1.8-.008A5.306 5.306 0 0 0 9.098 20.2a.9.9 0 1 1 0 1.8C5.178 22 2.005 18.815 2 14.901ZM14.002 2.9a.9.9 0 0 0 .9.9A5.306 5.306 0 0 1 20.2 9.107a.9.9 0 0 0 .9.892.91.91 0 0 0 .9-.9C21.995 5.185 18.821 2 14.902 2a.9.9 0 0 0-.9.9ZM21.1 14.001a.9.9 0 0 0-.9.892 5.306 5.306 0 0 1-5.298 5.307.9.9 0 1 0 0 1.8c3.92 0 7.093-3.185 7.098-7.099 0-.49-.41-.9-.9-.9Z" /></symbol>',24,24,!1,void 0)},641308:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i=(0,r(28178).makeIcon)("Icon12CheckCircleFill","check_circle_fill_12","0 0 12 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 12" id="check_circle_fill_12"><path fill="#99a2ad" d="M6 12A6 6 0 1 0 6 0a6 6 0 0 0 0 12z" /><path fill="#fff" fill-rule="evenodd" d="M8.78 3.97a.75.75 0 0 1 0 1.06L5.53 8.28a.75.75 0 0 1-1.06 0L3.22 7.03a.75.75 0 0 1 1.06-1.06l.72.72 2.72-2.72a.75.75 0 0 1 1.06 0z" clip-rule="evenodd" /></symbol>',12,12,!1,void 0)},975803:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i=(0,r(28178).makeIcon)("Icon16ChevronOutline","chevron_outline_16","0 0 12 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 16" id="chevron_outline_16"><path fill="currentColor" fill-rule="evenodd" d="M4.22 3.47a.75.75 0 0 1 1.06 0l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06-1.06L7.69 8 4.22 4.53a.75.75 0 0 1 0-1.06z" clip-rule="evenodd" /></symbol>',12,16,!1,void 0)},31221:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i=(0,r(28178).makeIcon)("Icon20BrushOutline","brush_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="brush_outline_20"><path fill-rule="evenodd" d="M6.667 12.493c-1.006 0-1.77.77-1.814 1.726-.064 1.352-.707 2.16-1.285 2.65.528.155 1.268.213 2.226-.072 1.903-.567 2.687-1.724 2.687-2.613 0-.897-.775-1.69-1.814-1.69ZM3.36 14.148a3.295 3.295 0 0 1 3.308-3.156c1.791 0 3.31 1.392 3.31 3.192 0 1.806-1.499 3.38-3.758 4.052-2.157.642-3.64-.025-4.348-.548a.921.921 0 0 1-.293-.353.839.839 0 0 1-.036-.614c.15-.46.637-.658.987-.938.382-.305.789-.761.83-1.635ZM15.702 2.001a1.608 1.608 0 0 1 2.261-.07 1.69 1.69 0 0 1 .17 2.287l-6.08 7.498a.746.746 0 0 1-1.052.108.753.753 0 0 1-.108-1.056l6.074-7.491a.185.185 0 0 0-.017-.242c-.067-.061-.133-.026-.202.04L9.745 9.783a.746.746 0 0 1-1.057-.025.753.753 0 0 1 .025-1.061L15.702 2Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},961943:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i=(0,r(28178).makeIcon)("Icon20GearOutline","gear_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="gear_outline_20"><path fill-rule="evenodd" d="m7.222 3.378.01-.033a4.147 4.147 0 0 1 .17-.476c.358-.821.944-1.285 1.854-1.36l.166-.009h1.208c1.051.033 1.735.608 2.095 1.692l.057.186.044.166c.016.064.037.132.06.203l.05.137.03.015.06-.02.116-.044.135-.059a5.36 5.36 0 0 1 .168-.074l.036-.015a4.23 4.23 0 0 1 .424-.15c.932-.27 1.685-.075 2.32.618l.108.125.714.88c.636.833.617 1.723-.004 2.683l-.109.161-.102.139c-.04.054-.082.113-.123.177l-.062.1-.029.05.004.017.08.052.11.066.133.072c1.209.614 1.707 1.42 1.515 2.541l-.032.162-.213.916c-.137.593-.245.873-.67 1.258a2.135 2.135 0 0 1-1.059.518l-.01.003a3.917 3.917 0 0 1-.438.059l-.191.012-.173.006-.052.001h-.006c-.05.002-.102.006-.156.01l-.158.02.012.123.011.083.029.154c.068.322.101.618.098.89v.012c-.015.84-.38 1.45-1.132 1.87l-.147.076-1.023.494c-.901.403-1.722.234-2.484-.467a3.934 3.934 0 0 1-.144-.14l-.133-.142-.113-.13a2.938 2.938 0 0 0-.147-.161l-.085-.083-.043-.04-.08.076-.091.093-.103.115c-.828.981-1.703 1.334-2.763.923l-.153-.063-.915-.443-.271-.138c-.415-.225-.647-.44-.874-.918a2.153 2.153 0 0 1-.209-1.01v-.016c.006-.19.03-.388.07-.603l.038-.195.001-.004c.014-.064.025-.133.035-.206l.016-.148-.003-.003-.09-.012-.128-.012-.151-.006a4.145 4.145 0 0 1-.862-.098l-.012-.003c-.837-.198-1.363-.69-1.608-1.524l-.043-.16-.254-1.102c-.204-1.026.205-1.818 1.186-2.41l.17-.098.152-.08c.06-.03.123-.065.188-.105l.134-.087.004-.017-.055-.093-.07-.108-.089-.124a5.194 5.194 0 0 1-.286-.423c-.54-.905-.534-1.72.046-2.523l.1-.132.717-.877c.687-.792 1.566-.958 2.64-.554l.18.072.158.07a2.9 2.9 0 0 0 .193.08l.118.042.032-.014.029-.077.04-.12.04-.143c.013-.056.028-.112.044-.166Zm4.24.841.013.038.05.138a1.5 1.5 0 0 0 .743.833l.03.014a1.5 1.5 0 0 0 1.136.082l.06-.02a1.47 1.47 0 0 0 .065-.023l.117-.044.062-.025.135-.059.035-.015a2.698 2.698 0 0 1 .415-.16c.268-.078.407-.06.47-.043.057.015.16.056.314.22l.077.09.682.84c.138.185.15.295.15.359 0 .084-.03.267-.225.573l-.082.122-.08.108a4.406 4.406 0 0 0-.18.26l-.014.022-.062.099-.008.013-.01.018-.03.05a1.5 1.5 0 0 0-.178 1.056l.004.017a1.5 1.5 0 0 0 .648.959l.08.052.05.032.11.066.06.034.133.072.034.018c.456.231.62.421.676.516.036.06.084.162.042.417l-.023.117-.207.892c-.066.285-.095.35-.105.369 0 0 0 .003-.01.013a.974.974 0 0 1-.101.103c-.082.074-.166.124-.354.161a2.357 2.357 0 0 1-.257.035l-.153.01-.138.004-.071.002a4.554 4.554 0 0 0-.28.02l-.158.019a1.5 1.5 0 0 0-1.318 1.628l.011.123.008.07.012.083.01.06.028.154.008.045c.05.236.068.419.066.557-.003.206-.046.301-.073.348-.028.046-.094.131-.276.235l-.105.056-.977.471c-.204.088-.317.082-.382.07-.076-.015-.228-.068-.456-.279a2.382 2.382 0 0 1-.08-.076l-.1-.107-.088-.102a4.389 4.389 0 0 0-.217-.236l-.018-.018-.084-.082a1.433 1.433 0 0 0-.036-.034l-.043-.04a1.5 1.5 0 0 0-2.047.014l-.08.075a1.43 1.43 0 0 0-.042.041l-.09.094a1.534 1.534 0 0 0-.048.05l-.103.116-.025.03c-.315.371-.532.495-.646.535-.073.025-.183.05-.415-.038l-.094-.039-.864-.418-.238-.12a1.186 1.186 0 0 1-.13-.083l-.004-.003-.003-.003a1.077 1.077 0 0 1-.083-.147.666.666 0 0 1-.063-.34c.003-.09.015-.207.043-.365l.035-.174a4.384 4.384 0 0 0 .058-.35l.016-.149a1.5 1.5 0 0 0-.434-1.224l-.004-.003a1.5 1.5 0 0 0-.86-.423l-.09-.012a1.405 1.405 0 0 0-.064-.008l-.128-.01a1.539 1.539 0 0 0-.068-.005l-.15-.007-.04-.001a2.663 2.663 0 0 1-.549-.06c-.215-.05-.305-.115-.346-.154-.04-.038-.109-.12-.17-.319l-.03-.114-.242-1.052c-.042-.224-.006-.329.023-.387.038-.076.146-.23.459-.42l.128-.074.119-.063a4.431 4.431 0 0 0 .316-.179l.134-.087a1.5 1.5 0 0 0 .65-.947l.004-.017a1.5 1.5 0 0 0-.171-1.066l-.055-.093a1.49 1.49 0 0 0-.037-.062l-.07-.108a1.496 1.496 0 0 0-.04-.057l-.088-.124a1.516 1.516 0 0 0-.024-.031c-.307-.406-.369-.647-.378-.754-.006-.067-.004-.18.148-.395l.072-.094.684-.838c.154-.173.262-.211.33-.225.09-.018.28-.027.623.1l.138.055.123.055a4.42 4.42 0 0 0 .316.13l.118.042a1.5 1.5 0 0 0 1.134-.058l.031-.015a1.5 1.5 0 0 0 .764-.823l.03-.077.023-.066.04-.12.02-.065.04-.143.01-.037.03-.119c.037-.128.076-.235.114-.323.1-.23.192-.319.243-.357.044-.033.134-.086.343-.105l.1-.006h1.14c.234.01.333.071.386.114.067.056.192.195.308.538l.043.14.034.129c.026.1.056.2.088.298ZM10 11.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm0 1.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},986536:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i=(0,r(28178).makeIcon)("Icon20GiftOutline","gift_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="gift_outline_20"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z" /><path fill="currentColor" fill-rule="nonzero" d="M14.846 2.314c1.026 1.026 1.23 2.875-.257 4.186h.911a3 3 0 0 1 3 3v.49c0 .827-.093 1.16-.267 1.487-.174.326-.43.582-.756.756a1.88 1.88 0 0 1-.477.182v1.618c0 1.56-.162 2.126-.467 2.696a3.18 3.18 0 0 1-1.324 1.324l-.202.101c-.48.224-1.037.349-2.229.364l-5.291.002c-1.56 0-2.126-.162-2.696-.467a3.18 3.18 0 0 1-1.324-1.324l-.101-.202c-.224-.48-.349-1.037-.364-2.229L3 12.415a1.88 1.88 0 0 1-.477-.182 1.817 1.817 0 0 1-.756-.756c-.16-.299-.251-.605-.265-1.29L1.5 9.5a3 3 0 0 1 3-3h.911c-1.487-1.31-1.283-3.16-.257-4.186C6.369 1.099 8.738 1.038 10 3.569c1.262-2.531 3.631-2.47 4.846-1.255ZM9.25 12.499 4.5 12.5l.001 1.762.009.399c.021.604.083.924.202 1.2l.078.161c.165.309.399.543.708.708l.162.078c.33.143.724.203 1.598.211l1.991-.001v-4.519Zm6.251.001-4.751-.001v4.519l1.993.001.399-.009c.604-.021.924-.083 1.2-.202l.161-.078a1.68 1.68 0 0 0 .708-.708c.186-.348.267-.688.286-1.551l.004-.438V12.5ZM9.159 7.999 4.5 8A1.5 1.5 0 0 0 3 9.5v.638l.007.232c.012.227.037.315.083.4a.319.319 0 0 0 .14.14c.11.059.223.085.632.09l5.387-.001.002-3L9.16 8l-.001-.001ZM15.5 8l-4.661-.001h-.09v3h5.39c.408-.004.521-.03.63-.089a.319.319 0 0 0 .141-.14c.065-.122.09-.248.09-.78V9.5A1.5 1.5 0 0 0 15.5 8ZM9.223 6.159c-.43-3.101-1.96-3.834-3.009-2.785C5.165 4.424 5.898 5.952 9 6.384l.257.032Zm1.554 0-.024.191.007.062.241-.029c3.101-.43 3.834-1.96 2.785-3.009-1.05-1.049-2.578-.316-3.01 2.785Z" /></g></symbol>',20,20,!1,void 0)},823347:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i=(0,r(28178).makeIcon)("Icon24FavoriteOutline","favorite_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="favorite_outline_24"><path fill-rule="evenodd" d="M12.554 4.694a.6.6 0 0 0-1.108 0l-1.614 3.9a.9.9 0 0 1-.774.554l-4.125.266a.6.6 0 0 0-.357 1.05l3.267 2.859a.9.9 0 0 1 .282.888l-.93 3.852a.6.6 0 0 0 .883.66l3.472-2.003a.9.9 0 0 1 .9 0l3.472 2.004a.6.6 0 0 0 .883-.661l-.93-3.852a.9.9 0 0 1 .282-.888l3.267-2.858a.6.6 0 0 0-.357-1.05l-4.125-.267a.9.9 0 0 1-.774-.554l-1.614-3.9Zm-2.772-.689c.818-1.976 3.618-1.976 4.436 0l1.4 3.383 3.565.23c2.136.138 3.037 2.792 1.426 4.201l-2.856 2.5.802 3.322c.494 2.05-1.706 3.696-3.533 2.642L12 18.539l-3.022 1.744C7.15 21.337 4.95 19.69 5.445 17.64l.802-3.322-2.856-2.5c-1.611-1.41-.71-4.063 1.426-4.201l3.566-.23 1.4-3.383Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},94566:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i=(0,r(28178).makeIcon)("Icon24RecentOutline","recent_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="recent_outline_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path fill="currentColor" fill-rule="nonzero" d="M12 21.428A9.428 9.428 0 0 1 2.571 12 9.428 9.428 0 0 1 12 2.57c5.206 0 9.429 4.221 9.429 9.429 0 5.207-4.223 9.428-9.429 9.428Zm0-1.8a7.63 7.63 0 1 0-.001-15.258A7.63 7.63 0 0 0 12 19.628Zm4.085-6.387a.9.9 0 1 1-.575 1.706l-4.226-1.427a.9.9 0 0 1-.613-.853V8.353a.9.9 0 1 1 1.8 0v3.668l3.614 1.22Z" /></g></symbol>',24,24,!1,void 0)},147650:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i=(0,r(28178).makeIcon)("Icon24SmileOutline","smile_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="smile_outline_24"><path d="M8.438 14.297a.9.9 0 0 1 1.259.133c.013.016.196.223.53.432.383.24.97.488 1.773.488a3.3 3.3 0 0 0 1.773-.488c.191-.12.382-.26.53-.432a.9.9 0 0 1 1.4 1.132 4.045 4.045 0 0 1-.976.826A5.094 5.094 0 0 1 12 17.15a5.094 5.094 0 0 1-2.727-.762 3.987 3.987 0 0 1-.976-.826.9.9 0 0 1 .14-1.265Zm1.812-4.047a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0ZM15 11.5A1.25 1.25 0 1 0 15 9a1.25 1.25 0 0 0 0 2.5Zm-3-9.4c-5.468 0-9.9 4.432-9.9 9.9s4.432 9.9 9.9 9.9 9.9-4.432 9.9-9.9-4.432-9.9-9.9-9.9ZM3.9 12a8.1 8.1 0 1 1 16.2 0 8.1 8.1 0 0 1-16.2 0Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},393657:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i=(0,r(28178).makeIcon)("Icon24StickerSmileOutline","sticker_smile_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="sticker_smile_outline_24"><path d="M11.295 10.25a1.256 1.256 0 0 1-1.255 1.251c-.69 0-1.248-.56-1.245-1.25C8.798 9.56 9.36 9 10.05 9s1.248.56 1.245 1.25Zm4.244.251c.69 0 1.25-.56 1.254-1.25A1.244 1.244 0 0 0 15.549 8c-.69 0-1.251.56-1.254 1.25a1.244 1.244 0 0 0 1.244 1.251Z" /><path fill-rule="evenodd" d="m11.452 21.295-.005-.025-.399.056c-.845.12-1.406.198-1.906.167a4.886 4.886 0 0 1-4.296-3.245c-.167-.472-.244-1.033-.361-1.879l-.662-4.784c-.149-1.076-.268-1.939-.308-2.644-.04-.724-.003-1.361.208-1.972a4.916 4.916 0 0 1 1.828-2.42c.53-.37 1.132-.58 1.84-.74.689-.155 1.55-.276 2.627-.427l5.096-.717c.783-.11 1.302-.183 1.765-.16a4.885 4.885 0 0 1 4.394 3.317c.148.44.22.96.328 1.742l.02.142h.002l.247 1.655c.024.163.034.324.031.483.082.726.117 1.292.09 1.816a9.93 9.93 0 0 1-6.718 8.896c-.765.26-1.666.407-3.1.612l-.721.127Zm5.336-16.992c-.27-.013-.607.03-1.53.16l-4.954.696c-1.124.158-1.914.27-2.522.407-.599.135-.945.278-1.202.458a3.11 3.11 0 0 0-1.156 1.53c-.103.298-.146.67-.112 1.282.035.623.143 1.413.299 2.537l.64 4.635c.139.996.194 1.36.291 1.635a3.09 3.09 0 0 0 2.718 2.053c.292.018.656-.028 1.652-.168l.17-.024.82-.116 1.603-.283c.6-.106 1-.68.893-1.28l-.236-1.324c-1.403.152-3.005.008-4.27-.857a.9.9 0 0 1 1.017-1.487c.817.559 2.008.694 3.23.534a4.413 4.413 0 0 1 3.43-3.475l1.655-.345c.48-.1.824-.499.872-.965a99.95 99.95 0 0 0-.263-1.989c-.128-.922-.178-1.258-.265-1.515a3.09 3.09 0 0 0-2.78-2.1Zm-.576 13.853a8.128 8.128 0 0 0 3.885-5.677 2.903 2.903 0 0 1-.51.155l-1.655.345a2.606 2.606 0 0 0-2.034 3.008l.271 1.52c.04.218.053.436.043.649Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},569456:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i=(0,r(28178).makeIcon)("Icon24StorefrontOutline","storefront_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="storefront_outline_24"><path fill-rule="evenodd" d="M7 14a.9.9 0 0 1 .9.9v4.2h8.2v-4.2a.9.9 0 0 1 1.8 0V20a.9.9 0 0 1-.9.9H7a.9.9 0 0 1-.9-.9v-5.1A.9.9 0 0 1 7 14Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M3 20a.9.9 0 0 1 .9-.9h16.2a.9.9 0 1 1 0 1.8H3.9A.9.9 0 0 1 3 20Zm13.9-10a1.1 1.1 0 0 0 2.2 0h1.8a2.9 2.9 0 0 1-5.8 0h1.8Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M16 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 1 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M12 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 1 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M8 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 1 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M4 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 0 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M8.703 3.1h6.594c.553 0 1.019-.001 1.453.137a2.9 2.9 0 0 1 1.033.585c.342.301.581.7.865 1.175l.056.094 1.612 2.686.027.045c.143.239.264.44.352.66.077.195.133.397.167.604.038.234.038.47.038.747V10h-1.8v-.114c0-.358-.003-.438-.014-.51a1.1 1.1 0 0 0-.064-.228c-.027-.068-.066-.138-.25-.445L17.16 6.017c-.37-.618-.462-.752-.566-.843a1.1 1.1 0 0 0-.392-.222c-.131-.042-.294-.052-1.014-.052H8.812c-.72 0-.883.01-1.014.052a1.1 1.1 0 0 0-.392.222c-.104.091-.196.225-.566.843L5.228 8.703c-.185.307-.223.377-.25.445a1.1 1.1 0 0 0-.064.228c-.011.072-.014.152-.014.51V10H3.1v-.167c0-.278 0-.513.038-.747a2.9 2.9 0 0 1 .167-.603c.088-.22.209-.422.352-.66l.027-.046L5.296 5.09l.056-.094c.284-.474.523-.874.865-1.175a2.9 2.9 0 0 1 1.033-.585c.434-.138.9-.138 1.453-.137Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},256116:(e,t,r)=>{"use strict";r.d(t,{APIProvider:()=>c});var i=r(419756),s=r(785893),a=r(667294),n=r(194182),o=r(928525);function c(e){var t=e.userId,r=e.onAPIRequest,c=(0,i.default)(e,["userId","onAPIRequest"]),l=(0,a.useState)(new o.API({userId:t,onAPIRequest:r})),d=l[0],u=l[1];return(0,a.useEffect)((()=>{var e=new o.API({userId:t,onAPIRequest:r});return u(e),e.cache.reload(),()=>{e.cache.destroy()}}),[t,r]),(0,s.jsx)(n.APIContext.Provider,Object.assign({value:d},c),void 0)}},611982:(e,t,r)=>{"use strict";r.d(t,{Emoji:()=>c});var i=r(419756),s=r(785893),a=r(659397),n=r(358456),o=r(876863);function c(e){var t=e.emoji,r=e.className,c=(0,i.default)(e,["emoji","className"]);return(0,s.jsx)("i",Object.assign({className:(0,a.classNames)(o.default.emoji,`@${(0,n.unicodeToByteHex)(t)}`,r),"data-emoji":t},c),void 0)}},43124:(e,t,r)=>{"use strict";r.d(t,{EmojiItem:()=>c});var i=r(419756),s=r(785893),a=r(659397),n=r(611982),o=r(774319);function c(e){var t=e.emoji,r=e.active,c=e.onEmojiClick,l=e.className,d=e.onClick,u=(0,i.default)(e,["emoji","active","onEmojiClick","className","onClick"]);return(0,s.jsx)("div",Object.assign({className:(0,a.classNames)(l,o.default.item,{[o.default.itemActive]:r}),onClick:e=>{null==d||d(e),null==c||c(t)}},u,{children:(0,s.jsx)(n.Emoji,{emoji:t},void 0)}),void 0)}},691834:(e,t,r)=>{"use strict";r.d(t,{EmojiKeyboard:()=>I});var i,s,a=r(722122),n=r(419756),o=r(785893),c=r(86894),l=r(659397),d=r(135432),u=r(154289),m=r(667294),v=r(705361),h=r(543730),f=r(454195),p=r(364759),b=r(933712);!function(e){e.ROW="row",e.HEADER="header"}(i||(i={})),function(e){e.ENTER="Enter",e.ARROW_UP="ArrowUp",e.ARROW_DOWN="ArrowDown",e.ARROW_LEFT="ArrowLeft",e.ARROW_RIGHT="ArrowRight"}(s||(s={}));var k=Object.values(s);function I(e){var t=e.isVisible,r=e.className,I=(0,n.default)(e,["isVisible","className"]),E=(0,p.useEmojiKeyboard)(),S=E.emojiCountPerRow,_=E.emojiSections,g=E.emojiPadding,j=E.insertEmoji,y=E.selectedEmoji,C=E.setSelectedEmoji,T=(0,m.useRef)(null),w=(0,m.useRef)(0),x=(0,m.useMemo)((()=>{var e=[];return _.forEach(((t,r)=>{var s=t[0],a=t[1];e.push({type:i.HEADER,element:(0,o.jsx)(f.EmojiKeyboardHeader,{title:s},s)}),(0,l.chunkArray)(a,S).forEach(((t,a)=>{e.push({type:i.ROW,element:(0,o.jsx)(v.EmojiKeyboardRow,{"data-section-index":r,"data-row-index":a,emoji:t,onEmojiClick:j},`${s}${t[0]}`)})}))})),e}),[_,S]),R=(0,m.useMemo)((()=>x.reduce(((e,t,r)=>(t.type===i.HEADER&&e.push(r),e)),[])),[x]),O=e=>R.includes(e),A=e=>w.current===e,N=(0,m.useCallback)((e=>(w.current=[...R].reverse().find((t=>e.startIndex>=t))||0,[...new Set([w.current,...(0,d.defaultRangeExtractor)(e)])].sort(((e,t)=>e-t)))),[R]),K=(0,u.useVirtualizer)({overscan:5,rangeExtractor:N,count:x.length,getScrollElement:()=>T.current,estimateSize:()=>h.EMOJI_SIZE}),P=(null==y?void 0:y.emojiIndex)||0,M=(null==y?void 0:y.sectionIndex)||0,V=Math.floor(P/S),H=(e,t)=>{var r=R[M]+V;K.scrollToIndex(r,{align:"center",behavior:"auto"}),C({sectionIndex:e,emojiIndex:t})};return(0,m.useEffect)((()=>{if(t){var e=e=>{var t=e.key,r=y;if(k.includes(t))if((e=>{e.preventDefault(),e.stopPropagation()})(e),r)switch(t){case s.ENTER:var i;if(!y)return;var a=y.sectionIndex,n=y.emojiIndex,o=null==(i=_[a])?void 0:i[1][n];return void(o&&j(o));case s.ARROW_UP:if(!y)return;if(Number(r.emojiIndex)>=S)return void H(r.sectionIndex,r.emojiIndex-S);if(r.sectionIndex){var c,l=(null==(c=_[r.sectionIndex-1])?void 0:c[1].length)||0;if(l){var d=r.emojiIndex%S,u=l-1,m=u%S,v=u-u%S+Math.min(d,m);H(r.sectionIndex-1,v)}}return;case s.ARROW_DOWN:var h,f=(null==(h=_[r.sectionIndex])?void 0:h[1].length)||0;return r.emojiIndex-r.emojiIndex%S!=f-1-(f-1)%S?void H(r.sectionIndex,Math.min(r.emojiIndex+S,f-1)):void(r.sectionIndex!==_.length-1&&H(r.sectionIndex+1,r.emojiIndex%S));case s.ARROW_LEFT:if(r.emojiIndex)return void H(r.sectionIndex,r.emojiIndex-1);if(r.sectionIndex){var p,b=(null==(p=_[r.sectionIndex-1])?void 0:p[1].length)||0;b&&H(r.sectionIndex-1,b-1)}return;case s.ARROW_RIGHT:var I,E=(null==(I=_[r.sectionIndex])?void 0:I[1].length)||0;return r.emojiIndex!==E-1?void H(r.sectionIndex,r.emojiIndex+1):void(r.sectionIndex!==_.length-1&&H(r.sectionIndex+1,0))}else H(0,0)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}}),[t,y,_]),(0,o.jsx)("div",Object.assign({className:(0,l.classNames)(b.default.keyboard,r),style:{"--emoji-size":`${h.EMOJI_SIZE}px`,"--emoji-padding":`${g}px`}},I,{children:(0,o.jsx)(c.CustomScrollView,Object.assign({boxRef:T,className:b.default.scroll,autoHideScrollbar:!0},{children:(0,o.jsx)("div",Object.assign({className:b.default.in,style:{height:K.getTotalSize()}},{children:x.length?K.getVirtualItems().map((e=>{var t=e.key,r=e.index,i=e.start;return(0,o.jsx)("div",Object.assign({"data-index":r,ref:K.measureElement,className:(0,l.classNames)(b.default.item,{[b.default.itemHeader]:O(r)}),style:(0,a.default)({},A(r)?{position:"sticky"}:{position:"absolute",transform:`translateY(${i}px)`})},{children:x[r].element}),t)})):void 0}),void 0)}),void 0)}),void 0)}},454195:(e,t,r)=>{"use strict";r.d(t,{EmojiKeyboardHeader:()=>u});var i=r(419756),s=r(785893),a=r(86894),n=r(659397),o=r(393930),c=r(127927),l=r(899031),d={[c.StickerEmojiKeyboardVariant.WIDE]:l.default.headerWide,[c.StickerEmojiKeyboardVariant.COMPACT]:l.default.headerCompact,[c.StickerEmojiKeyboardVariant.REGULAR]:l.default.headerRegular};function u(e){var t=e.title,r=e.className,u=(0,i.default)(e,["title","className"]),m=(0,o.useLang)().translate,v=(0,c.useStickersEmojiKeyboard)().variant;return(0,s.jsx)("div",Object.assign({className:(0,n.classNames)(l.default.header,d[v],r)},u,{children:(0,s.jsx)(a.Subhead,Object.assign({className:l.default.title,weight:"3"},{children:m(t)}),void 0)}),void 0)}},543730:(e,t,r)=>{"use strict";r.d(t,{EMOJI_SIZE:()=>v,EmojiKeyboardProvider:()=>p});var i=r(887757),s=r(692137),a=r(722122),n=r(419756),o=r(785893),c=r(667294),l=r(567793),d=r(194182),u=r(364759),m=r(127927),v=16,h={[m.StickerEmojiKeyboardVariant.WIDE]:9,[m.StickerEmojiKeyboardVariant.COMPACT]:8,[m.StickerEmojiKeyboardVariant.REGULAR]:12},f={[m.StickerEmojiKeyboardVariant.WIDE]:15,[m.StickerEmojiKeyboardVariant.COMPACT]:11,[m.StickerEmojiKeyboardVariant.REGULAR]:11};function p(e){var t=e.onEmojiInsert,r=(0,n.default)(e,["onEmojiInsert"]),v=(0,d.useAPI)(),p=(0,m.useStickersEmojiKeyboard)(),b=p.variant,k=p.isVisible,I=e=>e?e.sort(((e,t)=>{var r=e[1];return t[1]-r})).map((e=>e[0])):[],E=(0,c.useState)(),S=E[0],_=E[1],g=(0,c.useState)(Object.entries((0,a.default)({stickers_picker_recently_used:I(v.cache.recentEmoji)},l.sections))),j=g[0],y=g[1],C=j.filter((e=>e[1].length)),T=(0,c.useState)([]),w=T[0],x=T[1],R=function(){var e=(0,s.default)(i.mark((function e(){var t;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=v.cache.recentEmoji){e.next=3;break}return e.abrupt("return");case 3:x(t),y((e=>(e[0][1]=I(t),e)));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((()=>{k||(R(),_(void 0))}),[v,k]);var O=f[b],A=h[b];return(0,o.jsx)(u.EmojiKeyboardContext.Provider,Object.assign({value:{emojiPadding:A,emojiCountPerRow:O,selectedEmoji:S,setSelectedEmoji:_,emojiSections:C,recentEmoji:w,setRecentEmoji:x,onEmojiInsert:t}},r),void 0)}},567793:(e,t,r)=>{"use strict";r.d(t,{sections:()=>i});var i={stickers_picker_emotions:["😀","😃","😄","😁","😅","😆","😂","🤣","😉","😊","☺","🙂","🙃","😇","😗","😙","😚","😘","😍","🥰","🤩","🤗","😋","😜","🤪","😛","😝","🤑","🤭","🤐","🤫","😶","🤔","🤨","🧐","😐","😑","🙄","😬","🤥","😏","😌","🤤","😴","🤓","😎","🥳","🤠","😒","😔","😪","😕","😟","🙁","☹","😮","😯","😲","😳","🥺","😦","😧","😨","😰","😥","😢","😭","😱","😖","😣","😞","😓","😩","😫","😷","🤒","🤕","🤢","🤮","🤧","🥶","🥵","🥴","😵","🤯","😤","😠","😡","🤬","😈","👿","💀","☠","💩","🤡","👹","👺","👻","👽","👾","🤖","😺","😸","😹","😻","😼","😽","🙀","😿","😾","🙈","🙉","🙊","🦠"],stickers_picker_gestures_and_people:["👍","👎","👌","✌","🤞","🤟","🤘","🤙","🖕","✊","👊","🤛","🤜","👈","👉","👆","👇","☝","👋","🤚","🖐","✋","🖖","👏","🙌","👐","🤲","🤝","🙏","💪","🦵","🦶","👂","👃","🧠","🦷","🦴","👀","👁","👅","👄","✍","💅","🤳","👫","👭","👬","👩‍❤️‍💋‍👨","👨‍❤️‍💋‍👨","👩‍❤️‍💋‍👩","👩‍❤️‍👨","👨‍❤️‍👨","👩‍❤️‍👩","👪","👶","🧒","👦","👧","🧑","👱","👨","🧔","👱‍♂️","👨‍🦰","👨‍🦱","👨‍🦳","👨‍🦲","👩","👱‍♀️","👩‍🦰","👩‍🦱","👩‍🦳","👩‍🦲","🧓️","🙍‍♂️️","🙍‍♀️️","🙎‍♂️","🙎‍♀️️","🙅‍♂️","🙅‍♀️","🙆‍♂️","🙆‍♀️","💁‍♂️","💁‍♀️️","🙋‍♂️","🙋‍♀️️","🙇‍♂️","🙇‍♀️️","🤦‍♂️","🤦‍♀️","🤷‍♂️","🤷‍♀️","💆‍♂️️","💆‍♀️","💇‍♂️️","💇‍♀️","🚶‍♂️️","🚶‍♀️️","🏃‍♂️️","🏃‍♀️","💃","🕺","🕴️","👯‍♂️️","👯‍♀️","🧖‍♂️","🧖‍♀️️","👼","🎅","🤶","🦸‍♂️","🦸‍♀️","🦹‍♂️","🦹‍♀️","🧙‍♂️","🧙‍♀️","🧚‍♂️","🧚‍♀️","🧛‍♂️","🧛‍♀️","🧜‍♂️","🧜‍♀️","🧝‍♂️","🧝‍♀️","🧞‍♂️","🧞‍♀️","🧟‍♂️","🧟‍♀️","👨‍⚕️","👩‍⚕️","👨‍🎓","👩‍🎓","👨‍🏫","👩‍🏫","👨‍⚖️","👩‍⚖️","👨‍🌾","👩‍🌾","👨‍🍳","👩‍🍳","👨‍🔧","👩‍🔧","👨‍🏭","👩‍🏭","👨‍💼","👩‍💼","👨‍🔬","👩‍🔬","👨‍💻","👩‍💻","👨‍🎤","👩‍🎤","👨‍🎨","👩‍🎨","👨‍✈️","👩‍✈️","👨‍🚀","👩‍🚀","👨‍🚒","👩‍🚒","👮‍♂️","👮‍♀️","🕵️‍♂️","🕵️‍♀️","💂‍♂️","💂‍♀️","👷‍♂️","👷‍♀️","🤴","👸","👳‍♂️","👳‍♀️","👲","🧕","🤵","👰","🤰","🤱","🛀","🛌"],stickers_picker_symbols:["💋","❤","💔","❣","💘","💝","💖","💗","💓","💞","💕","💟","💜","🧡","💛","💚","💙","🖤","💯","💢","💥","💫","🕳","💣","💬","👁️‍🗨️","🗨","🗯","💭","💤","🗣","👤","👥","👣","🔇","🔊","📢","📣","🔔","🔕","🎼","🎵","🎶","⚠","🚸","☢","☣","🆚","🆓","🆕","🚮","🚾","🚭","✅","♻","⚕","🔱","‼","⁉","❓","❗","🆘","⛔","🚫","🚳","🚯","🚱","🚷","📵","🔞"],stickers_picker_animals_and_plants:["🐵","🐒","🦍","🐶","🐕","🐩","🐺","🦊","🦝","🐱","🐈","🦁","🐯","🐅","🐆","🐴","🐎","🦄","🦓","🦌","🐮","🐂","🐃","🐄","🐷","🐽","🐖","🐗","🐏","🐑","🐐","🐪","🐫","🦙","🦒","🐘","🦏","🦛","🐭","🐁","🐀","🐹","🐰","🐇","🐿","🦔","🦇","🐻","🐨","🐼","🦘","🦡","🐾","🦃","🐔","🐓","🐣","🐤","🐥","🐦","🐧","🕊","🦅","🦆","🦢","🦉","🦚","🦜","🐸","🐊","🐢","🦎","🐍","🐲","🐉","🦕","🦖","🐳","🐋","🐬","🐟","🐠","🐡","🦈","🐙","🦀","🦞","🦐","🦑","🐚","🐌","🦋","🐛","🐜","🐝","🐞","🦗","🕷","🕸","🦂","🦟","💐","🌸","💮","🏵","🌹","🥀","🌺","🌻","🌼","🌷","🌳","🌲","🎄","🌴","🌵","🌾","🌱","🌿","☘","🍀","🍁","🍂","🍃","🌑","🌒","🌓","🌔","🌕","🌖","🌗","🌘","🌙","🌚","🌛","🌜","🌡","☀","🌝","🌞","⭐","🌟","🌠","☁","⛅","⛈","🌤","🌥","🌦","🌧","🌨","🌩","🌪","🌫","🌬","💨","🌀","🌈","🌂","☂","☔","⛱","⚡","❄","☃","⛄","☄","🔥","💦","💧","🌊"],stickers_picker_food_and_drink:["🍏","🍎","🍐","🍅","🥝","🍑","🍒","🍓","🍇","🍈","🍉","🍊","🍋","🍌","🍍","🥭","🥥","🥑","🍆","🥔","🥕","🌽","🌶","🥒","🥬","🥦","🍄","🥜","🌰","🍞","🥐","🥖","🥨","🥯","🥞","🧀","🍖","🍗","🥩","🥓","🍔","🍟","🍕","🌭","🥪","🌮","🌯","🥙","🥚","🍳","🥘","🍲","🥣","🥗","🍿","🧂","🥫","🍱","🍘","🍙","🍚","🍛","🍜","🍝","🍠","🍢","🍣","🍤","🍥","🥮","🍡","🥟","🥠","🥡","🍦","🍧","🍨","🍩","🍪","🎂","🍰","🧁","🥧","🍫","🍬","🍭","🍮","🍯","🍼","🥛","☕","🍵","🍶","🍾","🍷","🍸","🍹","🍺","🍻","🥂","🥃","🥤","🥢","🍽","🍴","🥄"],stickers_picker_sport_and_activities:["⚽","⚾","🥎","🏀","🏐","🏈","🏉","🎾","🥏","🎳","🏏","🏑","🏒","🥍","🏓","🏸","🥊","🥋","🥅","⛳","⛸","🎣","🎽","🛹","🎿","🛷","🥌","🎯","🎱","🎮","🕹","🎰","🎲","🧩","♟","🧗‍♂️️","🧗‍♀️","🤺","🏇","⛷","🏂","🏌️‍♂️","🏌️‍♀️","🏄‍♂️","🏄‍♀️","🚣‍♂️","🚣‍♀️","🏊‍♂️","🏊‍♀️","⛹️‍♂️","⛹️‍♀️","🏋️‍♂️","🏋️‍♀️","🚴‍♂️","🚴‍♀️","🚵‍♂️","🚵‍♀️","🤸","🤼‍♂️","🤼‍♀️","🤽‍♂️","🤽‍♀️","🤾‍♂️","🤾‍♀️","🤹‍♂️","🤹‍♀️","🧘‍♂️","🧘‍♀️","🎖","🏆","🏅","🥇","🥈","🥉"],stickers_picker_travel_and_transport:["🚂","🚃","🚄","🚅","🚆","🚇","🚈","🚉","🚊","🚝","🚞","🚋","🚌","🚍","🚎","🚐","🚑","🚒","🚓","🚔","🚕","🚖","🚗","🚘","🚙","🚚","🚛","🚜","🏎","🏍","🛵","🚲","🛴","🚏","🛣","🛤","🛢","⛽","🚨","🚥","🚦","🛑","🚧","⚓","⛵","🛶","🚤","🛳","⛴","🛥","🚢","✈","🛩","🛫","🛬","💺","🚁","🚟","🚠","🚡","🛰","🚀","🛸","🌍","🌎","🌏","🌐","🗺","🗾","🧭","🏔","⛰","🌋","🗻","🏕","🏖","🏜","🏝","🏞","🏟","🏛","🏗","🧱","🏘","🏚","🏠","🏡","🏢","🏣","🏤","🏥","🏦","🏨","🏩","🏪","🏫","🏬","🏭","🏯","🏰","💒","🗼","🗽","⛪","🕌","🕍","⛩","🕋","⛲","⛺","🌁","🌃","🏙","🌄","🌅","🌆","🌇","🌉","♨","🌌","🎠","🎡","🎢","💈","🎪"],stickers_picker_subjects:["🎙","🎚","🎛","🎤","🎧","📻","🎷","🎸","🎹","🎺","🎻","🥁","📯","🎭","🖼","🎨","🧵","🧶","🔮","🧿","🧸","🃏","🀄","🎴","🎃","🎆","🎇","🧨","✨","🎈","🎉","🎊","🎋","🎍","🎎","🎏","🎐","🎑","🧧","🎀","🎁","🎗","🎟","🎫","🛎","🧳","⌛","⏳","⌚","⏰","⏱","⏲","🕰","👓","🕶","🥽","🥼","👔","👕","👖","🧣","🧤","🧥","🧦","👗","👘","👙","👚","👛","👜","👝","🛍","🎒","👞","👟","🥾","🥿","👠","👡","👢","👑","👒","🎩","🎓","🧢","⛑","📿","💄","💍","💎","📱","📲","☎","📞","📟","📠","🔋","🔌","💻","🖥","🖨","⌨","🖱","🖲","💽","💾","💿","📀","🧮","🎥","🎞","📽","🎬","📺","📷","📸","📹","📼","🔍","🔎","🕯","💡","🔦","🏮","📔","📕","📖","📗","📘","📙","📚","📓","📒","📃","📜","📄","📰","🗞","📑","🔖","🏷","💰","💴","💵","💶","💷","💸","💳","🧾","💹","💱","💲","✉","💌","📧","📨","📩","📤","📥","📦","📫","📪","📬","📭","📮","🗳","✏","✒","🖋","🖊","🖌","🖍","📝","💼","📁","📂","🗂","📅","📆","🗒","🗓","📇","📈","📉","📊","📋","📌","📍","📎","🖇","📏","📐","✂","🗃","🗄","🗑","🔒","🔓","🔏","🔐","🔑","🗝","🔨","⛏","⚒","🛠","🗡","⚔","🔪","🔫","🏹","🛡","🔧","🔩","⚙","🗜","⚖","🔗","⛓","🧰","🧲","⚗","🧪","🧫","🧬","🔬","🔭","📡","💉","💊","🚪","🛏","🛋","🚽","🚿","🛁","🧴","🧷","🧹","🧺","🧻","🧼","🧽","🧯","🛒","🚬","⚰","⚱","🏺","🗿"],stickers_picker_flags:["🇷🇺","🇰🇿","🇧🇾","🇺🇦","🇲🇳","🇬🇪","🇦🇿","🇹🇯","🇧🇷","🇱🇹","🇱🇻","🇪🇪","🇦🇲","🏁","🚩","🎌","🏴","🏳","🏳️‍🌈","🏴‍☠️","🇦🇨","🇦🇩","🇦🇪","🇦🇫","🇦🇬","🇦🇮","🇦🇱","🇦🇴","🇦🇶","🇦🇷","🇦🇸","🇦🇹","🇦🇺","🇦🇼","🇦🇽","🇧🇦","🇧🇧","🇧🇩","🇧🇪","🇧🇫","🇧🇬","🇧🇭","🇧🇮","🇧🇯","🇧🇱","🇧🇲","🇧🇳","🇧🇴","🇧🇶","🇧🇸","🇧🇹","🇧🇻","🇧🇼","🇧🇿","🇨🇦","🇨🇨","🇨🇩","🇨🇫","🇨🇬","🇨🇭","🇨🇮","🇨🇰","🇨🇱","🇨🇲","🇨🇳","🇨🇴","🇨🇵","🇨🇷","🇨🇺","🇨🇻","🇨🇼","🇨🇽","🇨🇾","🇨🇿","🇩🇪","🇩🇬","🇩🇯","🇩🇰","🇩🇲","🇩🇴","🇩🇿","🇪🇨","🇪🇬","🇪🇭","🇪🇷","🇪🇸","🇪🇹","🇪🇺","🇫🇮","🇫🇯","🇫🇰","🇫🇲","🇫🇴","🇫🇷","🇬🇦","🇬🇧","🇬🇩","🇬🇫","🇬🇬","🇬🇭","🇬🇮","🇬🇱","🇬🇲","🇬🇳","🇬🇵","🇬🇶","🇬🇷","🇬🇸","🇬🇹","🇬🇺","🇬🇼","🇬🇾","🇭🇰","🇭🇲","🇭🇳","🇭🇷","🇭🇹","🇭🇺","🇮🇨","🇮🇩","🇮🇪","🇮🇱","🇮🇲","🇮🇳","🇮🇴","🇮🇶","🇮🇷","🇮🇸","🇮🇹","🇯🇪","🇯🇲","🇯🇴","🇯🇵","🇰🇪","🇰🇬","🇰🇭","🇰🇮","🇰🇲","🇰🇳","🇰🇵","🇰🇷","🇰🇼","🇰🇾","🇱🇦","🇱🇧","🇱🇨","🇱🇮","🇱🇰","🇱🇷","🇱🇸","🇱🇺","🇱🇾","🇲🇦","🇲🇨","🇲🇩","🇲🇪","🇲🇫","🇲🇬","🇲🇭","🇲🇰","🇲🇱","🇲🇲","🇲🇴","🇲🇵","🇲🇶","🇲🇷","🇲🇸","🇲🇹","🇲🇺","🇲🇻","🇲🇼","🇲🇽","🇲🇾","🇲🇿","🇳🇦","🇳🇨","🇳🇪","🇳🇫","🇳🇬","🇳🇮","🇳🇱","🇳🇴","🇳🇵","🇳🇷","🇳🇺","🇳🇿","🇴🇲","🇵🇦","🇵🇪","🇵🇫","🇵🇬","🇵🇭","🇵🇰","🇵🇱","🇵🇲","🇵🇳","🇵🇷","🇵🇸","🇵🇹","🇵🇼","🇵🇾","🇶🇦","🇷🇪","🇷🇴","🇷🇸","🇷🇼","🇸🇦","🇸🇧","🇸🇨","🇸🇩","🇸🇪","🇸🇬","🇸🇭","🇸🇮","🇸🇯","🇸🇰","🇸🇱","🇸🇲","🇸🇳","🇸🇴","🇸🇷","🇸🇸","🇸🇹","🇸🇻","🇸🇽","🇸🇾","🇸🇿","🇹🇦","🇹🇨","🇹🇩","🇹🇫","🇹🇬","🇹🇭","🇹🇰","🇹🇱","🇹🇲","🇹🇳","🇹🇴","🇹🇷","🇹🇹","🇹🇻","🇹🇼","🇹🇿","🇺🇬","🇺🇲","🇺🇳","🇺🇾","🇺🇿","🇻🇦","🇻🇨","🇻🇪","🇻🇬","🇻🇮","🇻🇳","🇻🇺","🇼🇫","🇼🇸","🇽🇰","🇾🇪","🇾🇹","🇿🇦","🇿🇲","🇿🇼"]}},705361:(e,t,r)=>{"use strict";r.d(t,{EmojiKeyboardRow:()=>m});var i=r(419756),s=r(785893),a=r(659397),n=r(667294),o=r(43124),c=r(364759),l=r(127927),d=r(979693),u={[l.StickerEmojiKeyboardVariant.WIDE]:d.default.rowWide,[l.StickerEmojiKeyboardVariant.COMPACT]:d.default.rowCompact,[l.StickerEmojiKeyboardVariant.REGULAR]:d.default.rowRegular};function m(e){var t=e.emoji,r=e.onEmojiClick,m=e.className,v=(0,i.default)(e,["emoji","onEmojiClick","className"]),h=(0,l.useStickersEmojiKeyboard)().variant,f=(0,c.useEmojiKeyboard)(),p=f.emojiSections,b=f.selectedEmoji,k=null==b?void 0:b.emojiIndex,I=null==b?void 0:b.sectionIndex,E=void 0!==k&&void 0!==I?p[I][1][k]:void 0,S=(0,n.useMemo)((()=>t.map((e=>(0,s.jsx)(o.EmojiItem,{className:d.default.emoji,emoji:e,active:e===E,onEmojiClick:r},e)))),[t,E,r]);return(0,s.jsx)("div",Object.assign({className:(0,a.classNames)(d.default.row,u[h],m)},v,{children:S}),void 0)}},401164:(e,t,r)=>{"use strict";r.d(t,{HelpHintsProvider:()=>d});var i=r(887757),s=r(692137),a=r(785893),n=r(667294),o=r(194182),c=r(248961),l=r(490472);function d(e){var t=(0,o.useAPI)(),r=(0,n.useState)(void 0),d=r[0],u=r[1],m=function(){var e=(0,s.default)(i.mark((function e(){var r;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.cache.getHelpHints();case 2:r=e.sent,u(r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,n.useEffect)((()=>{m();var e=function(){var e=(0,s.default)(i.mark((function e(t){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===c.CacheKey.HELP_HINTS){e.next=2;break}return e.abrupt("return");case 2:m();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t.cache.addEventListener("change",e),()=>{t.cache.removeEventListener("change",e)}}),[t]),(0,a.jsx)(l.HelpHintsContext.Provider,Object.assign({value:d},e),void 0)}},49720:(e,t,r)=>{"use strict";r.d(t,{LangProvider:()=>o});var i=r(785893),s=r(667294),a=r(440941),n=r(393930);function o(e){var t=(0,s.useState)(a.Lang.pack),r=t[0],o=t[1];return(0,s.useEffect)((()=>a.Lang.subscribe((()=>{o(a.Lang.pack)}))),[]),(0,i.jsx)(n.LangContext.Provider,Object.assign({value:r},e),void 0)}},991751:(e,t,r)=>{"use strict";r.d(t,{PeerInfoProvider:()=>n});var i=r(419756),s=r(785893),a=r(763840);function n(e){var t=e.peerInfo,r=(0,i.default)(e,["peerInfo"]);return(0,s.jsx)(a.PeerInfoContext.Provider,Object.assign({value:{peerInfo:t}},r),void 0)}},52653:(e,t,r)=>{"use strict";r.d(t,{Skeleton:()=>n});var i=r(785893),s=r(659397),a=r(661083);function n(e){var t=e.width,r=e.height,n=e.borderRadius,o=e.className;return(0,i.jsx)("div",{className:(0,s.classNames)(a.default.skeleton,o),style:{width:t,height:r,borderRadius:n}},void 0)}},521005:(e,t,r)=>{"use strict";r.d(t,{StickersEmojiKeyboard:()=>j});var i=r(419756),s=r(785893),a=r(659397),n=r(667294),o=r(541978),c=r(398785),l=r(256116),d=r(49720),u=r(691834),m=r(928708),v=r(986779),h=r(991751),f=r(543730),p=r(789706),b=r(795078),k=r(401164),I=r(248961),E=r(855636),S=r(127927),_=r(476001),g={[S.StickerEmojiKeyboardVariant.WIDE]:_.default.keyboardWide,[S.StickerEmojiKeyboardVariant.COMPACT]:_.default.keyboardCompact,[S.StickerEmojiKeyboardVariant.REGULAR]:_.default.keyboardRegular};function j(e){var t=e.queue,r=e.userId,a=e.variant,n=e.isVisible,o=e.visibleTab,c=e.onAPIRequest,u=e.activeProductId,m=e.onTabChange,v=e.peerInfo,I=e.onStickerSend,E=e.onEmojiInsert,S=e.onVmojiEditClick,_=e.onVmojiCreateClick,g=e.onStockItemGiftClick,j=e.onStockItemSettingsClick,C=(0,i.default)(e,["queue","userId","variant","isVisible","visibleTab","onAPIRequest","activeProductId","onTabChange","peerInfo","onStickerSend","onEmojiInsert","onVmojiEditClick","onVmojiCreateClick","onStockItemGiftClick","onStockItemSettingsClick"]);return(0,s.jsx)(d.LangProvider,{children:(0,s.jsx)(h.PeerInfoProvider,Object.assign({peerInfo:v},{children:(0,s.jsx)(l.APIProvider,Object.assign({userId:r,onAPIRequest:c},{children:(0,s.jsx)(k.HelpHintsProvider,{children:(0,s.jsx)(b.StickersEmojiKeyboardProvider,Object.assign({variant:a,isVisible:n,visibleTab:o,onTabChange:m},{children:(0,s.jsx)(p.StickersKeyboardProvider,Object.assign({queue:t,activeProductId:u,onStickerSend:I,onVmojiEditClick:S,onVmojiCreateClick:_,onStockItemGiftClick:g,onStockItemSettingsClick:j},{children:(0,s.jsx)(f.EmojiKeyboardProvider,Object.assign({onEmojiInsert:E},{children:(0,s.jsx)(y,Object.assign({},C),void 0)}),void 0)}),void 0)}),void 0)},void 0)}),void 0)}),void 0)},void 0)}function y(e){var t=e.onShopClick,r=e.className,l=(0,i.default)(e,["onShopClick","className"]),d=(0,E.useStickersKeyboard)().storeNewItemsCount,h=(0,S.useStickersEmojiKeyboard)(),f=h.variant,p=h.visibleTab,b=h.activeTab,k=h.isVisible,j=h.setActiveTab,y=h.onTabChange;(0,n.useEffect)((()=>{o.LottieManager.init()}),[]),(0,n.useEffect)((()=>{p&&j(p)}),[p,j]);var C=b===I.Tab.STICKERS;return(0,s.jsx)("div",Object.assign({className:(0,a.classNames)(r,_.default.keyboard,g[f])},l,{children:(0,s.jsxs)("div",Object.assign({className:_.default.in},{children:[(0,s.jsxs)("div",Object.assign({className:(0,a.classNames)(_.default.content)},{children:[(!p||p===I.Tab.EMOJI)&&(0,s.jsx)(u.EmojiKeyboard,{isVisible:k&&b===I.Tab.EMOJI,className:(0,a.classNames)(_.default.item,{[_.default.itemTransformed]:C&&!p})},void 0),(!p||p===I.Tab.STICKERS)&&(0,s.jsx)(v.StickersKeyboard,{className:(0,a.classNames)(_.default.item,{[_.default.itemTransformed]:C&&!p})},void 0)]}),void 0),!p&&(0,s.jsx)(c.Tabbar,{activeTab:b,shopIndicatorMode:d?m.TabbarItemIndicator.DESTRUCTIVE:void 0,onShopClick:t,onTabChange:e=>{j(e),null==y||y({tab:e})}},void 0)]}),void 0)}),void 0)}},795078:(e,t,r)=>{"use strict";r.d(t,{StickersEmojiKeyboardProvider:()=>l});var i=r(419756),s=r(785893),a=r(667294),n=r(194182),o=r(248961),c=r(127927);function l(e){var t=e.variant,r=e.isVisible,l=e.visibleTab,d=e.onTabChange,u=(0,i.default)(e,["variant","isVisible","visibleTab","onTabChange"]),m=(0,n.useAPI)(),v=m.cache.tabbarActiveTab,h=(0,a.useState)(v||o.Tab.EMOJI),f=h[0],p=h[1];return(0,a.useEffect)((()=>{v!==f&&m.cache.setTabbarActiveTab(f)}),[f,v]),(0,s.jsx)(c.StickersEmojiKeyboardContext.Provider,Object.assign({value:{variant:t,isVisible:r,visibleTab:l,activeTab:f,setActiveTab:p,onTabChange:d}},u),void 0)}},986779:(e,t,r)=>{"use strict";r.d(t,{StickersKeyboard:()=>g});var i,s=r(722122),a=r(419756),n=r(785893),o=r(86894),c=r(659397),l=r(135432),d=r(154289),u=r(667294),m=r(448882),v=r(601137),h=r(905213),f=r(618759),p=r(940821),b=r(194182),k=r(248961),I=r(127927),E=r(855636),S=r(887886);!function(e){e.ROW="row",e.HEADER="header"}(i||(i={}));var _=[{type:i.HEADER,element:(0,n.jsx)(h.StickersKeyboardHeader,{},Math.random())},...(0,c.createArray)(6).map((e=>({type:i.ROW,element:(0,n.jsx)(m.StickersKeyboardRow,{},e)})))];function g(e){var t=e.className,r=(0,a.default)(e,["className"]),g=(0,b.useAPI)(),j=(0,I.useStickersEmojiKeyboard)(),y=j.isVisible,C=j.setActiveTab,T=(0,E.useStickersKeyboard)(),w=T.stickersSize,x=T.activeProductId,R=T.stockItemsMap,O=T.stickersCountPerRow,A=T.stickersVerticalGap,N=T.stickersHorizontalGap,K=T.selectedStockItemId,P=T.setSelectedStockItemId,M=(0,u.useRef)(null),V=(0,u.useRef)(0),H=(0,u.useRef)([]),L=(0,u.useRef)(!1),G=(0,u.useMemo)((()=>{if(!R)return _;var e=[];return[...R.values()].forEach((t=>{var r=t.id,s=t.product.stickers;e.push({type:i.HEADER,element:(0,n.jsx)(h.StickersKeyboardHeader,{stockItem:t},r)}),r===k.Tab.VMOJI&&e.push({type:i.ROW,element:(0,n.jsx)(f.StickersKeyboardVmojiRow,{},k.Tab.VMOJI)}),s&&(0,c.chunkArray)(s,O).forEach(((s,a)=>{e.push({type:i.ROW,element:(0,n.jsx)(m.StickersKeyboardRow,{stickers:s,stockItem:t},`${r}${a}`)})}))})),e}),[R,O]),D=(0,u.useMemo)((()=>{var e=H.current,t=G.reduce(((e,t,r)=>(t.type===i.HEADER&&e.push(r),e)),[]);return(0,c.isEqual)(t,e)||!t.length?e:(H.current=t,t)}),[G]),z=e=>D.includes(e),B=e=>V.current===e,F=(0,u.useCallback)((e=>(V.current=[...D].reverse().find((t=>e.startIndex>=t))||0,[...new Set([V.current,...(0,l.defaultRangeExtractor)(e)])].sort(((e,t)=>e-t)))),[D]),U=(0,d.useVirtualizer)({rangeExtractor:F,count:G.length,estimateSize:()=>w,getScrollElement:()=>M.current}),W=U.range,Z=e=>{var t=null==R?void 0:R.get(e);if(t){var r=t.index,i=D[r];K!==e&&(P(e),U.scrollToIndex(i,{align:"start",behavior:"auto"}))}};return(0,u.useEffect)((()=>{var e=M.current;if(e&&!R)return e.style.setProperty("overflow","hidden","important"),()=>{e.style.removeProperty("overflow")}}),[M,R]),(0,u.useEffect)((()=>{void 0!==x&&C(k.Tab.STICKERS)}),[x]),(0,u.useEffect)((()=>{var e=g.cache.stickersActiveTab;R&&(L.current=!1,x||e?(Z(x||e),L.current=!0):L.current=!0)}),[D,R,x,y]),(0,u.useEffect)((()=>{var e=L.current,t=U.calculateRange(),r=t.startIndex,i=t.endIndex;if((r||i)&&D.length&&R&&e){var s=[...R.values()],a=D.findIndex((e=>e>=r)),n=D.findIndex((e=>e>=i)),o=s[a-Number(a===n&&r!==i)];if(o){var c=o.id;P(c)}}}),[W,D]),(0,n.jsx)(p.StickersKeyboardSelectProvider,Object.assign({selectStockItem:Z},{children:(0,n.jsxs)("div",Object.assign({className:(0,c.classNames)(S.default.keyboard,t),style:{"--stickers-size":`${w}px`,"--stickers-vertical-gap":`${A}px`,"--stickers-horizontal-gap":`${N}px`}},r,{children:[(0,n.jsx)(o.CustomScrollView,Object.assign({boxRef:M,className:(0,c.classNames)(S.default.scroll,{[S.default.scrollDisabled]:!R}),autoHideScrollbar:!0},{children:(0,n.jsx)("div",Object.assign({className:S.default.in,style:{height:U.getTotalSize()}},{children:U.getVirtualItems().map((e=>{var t=e.key,r=e.index,i=e.start;return(0,n.jsx)("div",Object.assign({"data-index":r,ref:U.measureElement,className:(0,c.classNames)(S.default.item,{[S.default.itemHeader]:z(r)}),style:(0,s.default)({},B(r)?{position:"sticky"}:{position:"absolute",transform:`translateY(${i}px)`})},{children:G[r].element}),t)}))}),void 0)}),void 0),R&&(0,n.jsx)(v.StickersKeyboardGroups,{},void 0)]}),void 0)}),void 0)}},30765:(e,t,r)=>{"use strict";r.d(t,{StickersKeyboardGroup:()=>d});var i=r(419756),s=r(785893),a=r(659397),n=r(667294),o=r(279359),c=r(855636),l=r(897935);function d(e){var t=e.group,r=e.className,d=(0,i.default)(e,["group","className"]),u=(0,c.useStickersKeyboardSelect)().selectStockItem,m=(0,c.useStickersKeyboard)(),v=m.selectedStockItemId,h=m.stockItemsMap,f=(0,n.useRef)(null),p=(0,n.useState)(),b=p[0],k=p[1],I=e=>()=>{u(e)},E=(0,n.useMemo)((()=>{if(Array.isArray(t)||(t=[t]),h)return t.map((e=>{var t=h.get(e);if(t){var r=t.id;return(0,s.jsx)(o.StickersKeyboardGroupItem,{className:l.default.item,stockItem:t,active:r===v,onClick:I(r)},r)}}))}),[t,h,v]);(0,n.useLayoutEffect)((()=>{var e,t=f.current;if(t){var r=null==(e=t.children[0])?void 0:e.clientWidth;r&&k(r)}}),[f]);var S=Boolean(Array.isArray(t)&&Number(null==E?void 0:E.length)>1&&v&&t.includes(v));return(0,s.jsx)("div",Object.assign({ref:f,className:(0,a.classNames)(l.default.group,r,{[l.default.groupActive]:S,[l.default.groupHidden]:!b}),style:{"--group-item-width":`${b}px`}},d,{children:E}),void 0)}},279359:(e,t,r)=>{"use strict";r.d(t,{StickersKeyboardGroupItem:()=>h});var i=r(419756),s=r(785893),a=r(659397),n=r(667294),o=r(690409),c=r(180271),l=r(94566),d=r(823347),u=r(248961),m=r(442489),v=new Map([[u.Tab.VMOJI,(0,s.jsx)(c.default,{},u.Tab.VMOJI)],[u.Tab.RECENT,(0,s.jsx)(l.default,{},u.Tab.RECENT)],[u.Tab.FAVORITE,(0,s.jsx)(d.default,{},u.Tab.FAVORITE)]]);function h(e){e.index;var t,r,c=e.stockItem,l=e.active,d=(0,i.default)(e,["index","stockItem","active"]),u=(0,n.useState)(!0),h=u[0],f=u[1],p=null==c?void 0:c.product.title,b=null==c||null==(t=c.product)?void 0:t.is_new,k=v.get(null==c?void 0:c.id),I=new o.BaseUrlBuilder({size:24,images:null==c||null==(r=c.product)?void 0:r.previews}).build();return(0,n.useEffect)((()=>{k&&f(!1)}),[k]),(0,s.jsx)("div",Object.assign({},d,{children:(0,s.jsx)("div",Object.assign({className:(0,a.classNames)(m.default.in,{[m.default.inActive]:l,[m.default.inHidden]:h,[m.default.inPlaceholder]:!I&&!k,[m.default.inIndicator]:b})},{children:k?(0,s.jsx)("div",Object.assign({"aria-label":p,className:(0,a.classNames)(m.default.icon,m.default.iconService)},{children:k}),void 0):(0,s.jsx)("img",{alt:p,className:(0,a.classNames)(m.default.icon),loading:"lazy",src:I,onLoad:()=>{f(!1)}},void 0)}),void 0)}),void 0)}},601137:(e,t,r)=>{"use strict";r.d(t,{StickersKeyboardGroups:()=>f});var i,s=r(419756),a=r(785893),n=r(659397),o=r(975803),c=r(154289),l=r(667294),d=r(30765),u=r(862412),m=r(272505),v=r(855636),h=r(130146);function f(e){var t=e.className,r=(0,s.default)(e,["className"]),f=(0,v.useStickersKeyboard)(),p=f.getGroupIndex,b=f.isGroupedStockItem,k=f.stockItemsGroups,I=f.selectedStockItemId,E=f.prevSelectedStockItemId,S=(0,l.useRef)(null),_=(0,l.useState)(!1),g=_[0],j=_[1],y=(0,l.useState)(!0),C=y[0],T=y[1],w=(0,l.useMemo)((()=>(null==k?void 0:k.map((e=>(0,a.jsx)(d.StickersKeyboardGroup,{className:h.default.groupIn,group:e},String(e)))))||[]),[k]),x=w.length,R=(0,c.useVirtualizer)({count:x,overscan:15,horizontal:!0,getScrollElement:()=>S.current,estimateSize:()=>32,onChange:e=>{var t=e.range,r=t.startIndex,i=t.endIndex;j(r>0),T(i<w.length-1)}}),O=(0,u.useSmoothScroll)(R).scrollTo,A=e=>R.getVirtualItems().find((t=>t.index===e)),N=e=>()=>{var t,r=R.range,s=r.startIndex,a=r.endIndex,n=null==(t=R.scrollElement)?void 0:t.getBoundingClientRect();if(n){var o=n.width;switch(e){case i.LEFT:var c=A(s-1);if(!c)return;var l=c.size,d=c.end;O({offset:d+2*l-o});break;case i.RIGHT:var u=A(a-1);if(!u)return;var m=u.size,v=u.start;O({offset:v-m})}}};return(0,m.useHorizontalScroll)(S),(0,l.useEffect)((()=>{var e,t,r;if(I&&k){var i=p(I),s=p(E),a=b(E);if(void 0!==i&&!(a&&i>Number(s))){var n=A(i);if(n){var o=n.start,c=null==(e=R.scrollElement)?void 0:e.getBoundingClientRect(),l=null==(t=R.scrollElement)||null==(r=t.getElementsByClassName(h.default.groupIn)[0])?void 0:r.getBoundingClientRect();l&&c&&O({offset:o+l.width/2-c.width/2})}}}}),[I,k]),(0,a.jsxs)("div",Object.assign({className:(0,n.classNames)(h.default.groups,t)},r,{children:[(0,a.jsx)("div",{className:(0,n.classNames)(h.default.shadow,h.default.shadowLeft,{[h.default.shadowVisible]:g})},void 0),(0,a.jsx)("div",{className:(0,n.classNames)(h.default.shadow,h.default.shadowRight,{[h.default.shadowVisible]:C})},void 0),(0,a.jsx)("div",Object.assign({className:(0,n.classNames)(h.default.chevron,h.default.chevronLeft,{[h.default.chevronActive]:g}),onClick:N(i.LEFT)},{children:(0,a.jsx)(o.default,{},void 0)}),void 0),(0,a.jsx)("div",Object.assign({onClick:N(i.RIGHT),className:(0,n.classNames)(h.default.chevron,h.default.chevronRight,{[h.default.chevronActive]:C})},{children:(0,a.jsx)(o.default,{},void 0)}),void 0),(0,a.jsx)("div",Object.assign({ref:S,className:h.default.in},{children:(0,a.jsx)("div",Object.assign({className:h.default.items,style:{width:R.getTotalSize()}},{children:Boolean(w.length)&&R.getVirtualItems().map((e=>{var t=e.key,r=e.index,i=e.start;return(0,a.jsx)("div",Object.assign({"data-index":r,ref:R.measureElement,className:(0,n.classNames)(h.default.group),style:{transform:`translateX(${i}px)`}},{children:w[r]}),t)}))}),void 0)}),void 0)]}),void 0)}!function(e){e.LEFT="left",e.RIGHT="right"}(i||(i={}))},978697:(e,t,r)=>{"use strict";r.d(t,{PeerInfo:()=>u});var i=r(419756),s=r(785893),a=r(86894),n=r(641308),o=r(619141),c=r(393930),l=r(763840),d=r(926464);function u(e){var t=e.isStyle,r=(0,i.default)(e,["isStyle"]),u=(0,c.useLang)().translate,m=(0,l.usePeerInfo)().peerInfo;if(!m)return null;var v=m.first_name_gen,h=m.photo_50;return(0,s.jsx)(o.TextTooltip,Object.assign({forcePortal:!0,text:(0,s.jsx)(a.Caption,Object.assign({className:d.default.popper,level:"2"},{children:u(t?"stickers_picker_peer_has_style":"stickers_picker_peer_has_pack",{name:v})}),void 0),offsetDistance:8,offsetSkidding:50,placement:"bottom-end"},{children:(0,s.jsx)(a.Avatar,Object.assign({src:h,size:16,badge:(0,s.jsx)(n.default,{className:d.default.icon},void 0)},r),void 0)}),void 0)}},905213:(e,t,r)=>{"use strict";r.d(t,{StickersKeyboardHeader:()=>k});var i=r(419756),s=r(785893),a=r(86894),n=r(659397),o=r(961943),c=r(31221),l=r(986536),d=r(978697),u=r(52653),m=r(393930),v=r(763840),h=r(855636),f=r(127927),p=r(754542),b={[f.StickerEmojiKeyboardVariant.WIDE]:p.default.headerWide,[f.StickerEmojiKeyboardVariant.COMPACT]:p.default.headerCompact,[f.StickerEmojiKeyboardVariant.REGULAR]:p.default.headerRegular};function k(e){var t=e.stockItem,r=e.className,k=(0,i.default)(e,["stockItem","className"]),I=(0,m.useLang)().translate,E=(0,v.usePeerInfo)().peerInfo,S=(0,f.useStickersEmojiKeyboard)().variant,_=(0,h.useStickersKeyboard)(),g=_.stockItemsAvailableToGift,j=_.onVmojiEditClick,y=_.onStockItemGiftClick,C=_.onStockItemSettingsClick;if(r=(0,n.classNames)(p.default.header,b[S],r),!t)return(0,s.jsx)("div",Object.assign({className:r},k,{children:(0,s.jsx)(u.Skeleton,{width:128,height:"var(--vkui--font_subhead--line_height--regular)"},void 0)}),void 0);var T=t.can_gift,w=t.product,x=w.id,R=w.title,O=w.base_id,A=w.style_ids,N=w.vmoji_avatar,K=Boolean(T),P=void 0!==O,M=Boolean(N),V=Boolean((null==A?void 0:A.length)||P||M),H=Boolean(T&&E&&(null==g?void 0:g.includes(x)));return(0,s.jsxs)("div",Object.assign({className:(0,n.classNames)(p.default.header,r)},k,{children:[(0,s.jsx)(a.Subhead,Object.assign({className:p.default.title,weight:"3"},{children:I(R)}),void 0),V&&C&&(0,s.jsx)(o.default,{className:(0,n.classNames)(p.default.icon,p.default.settings),onClick:()=>null==C?void 0:C(t)},void 0),M&&j&&(0,s.jsx)("div",Object.assign({className:(0,n.classNames)(p.default.brush,p.default.headerAside),onClick:()=>N&&(null==j?void 0:j(N))},{children:(0,s.jsx)(c.default,{className:p.default.icon},void 0)}),void 0),K&&(0,s.jsxs)(s.Fragment,{children:[H&&(0,s.jsx)(d.PeerInfo,{className:p.default.headerAside,isStyle:P},void 0),Boolean(y)&&(0,s.jsx)(l.default,{className:(0,n.classNames)(p.default.icon,p.default.headerAside),onClick:()=>null==y?void 0:y(t,E)},void 0)]},void 0)]}),void 0)}},789706:(e,t,r)=>{"use strict";r.d(t,{RECENT_STICKERS_DEFAULT_LIMIT:()=>E,StickersKeyboardProvider:()=>S});var i=r(887757),s=r(692137),a=r(722122),n=r(419756),o=r(785893),c=r(659397),l=r(583682),d=r(667294),u=r(194182),m=r(248961),v=r(763840),h=r(127927),f=r(855636),p={[h.StickerEmojiKeyboardVariant.WIDE]:86,[h.StickerEmojiKeyboardVariant.COMPACT]:80,[h.StickerEmojiKeyboardVariant.REGULAR]:92},b={[h.StickerEmojiKeyboardVariant.WIDE]:4,[h.StickerEmojiKeyboardVariant.COMPACT]:3,[h.StickerEmojiKeyboardVariant.REGULAR]:3},k={[h.StickerEmojiKeyboardVariant.WIDE]:8,[h.StickerEmojiKeyboardVariant.COMPACT]:6,[h.StickerEmojiKeyboardVariant.REGULAR]:8},I={[h.StickerEmojiKeyboardVariant.WIDE]:6,[h.StickerEmojiKeyboardVariant.COMPACT]:8,[h.StickerEmojiKeyboardVariant.REGULAR]:8},E=32;function S(e){var t=e.queue,r=e.activeProductId,E=e.onStickerSend,S=e.onVmojiEditClick,_=e.onVmojiCreateClick,g=e.onStockItemGiftClick,j=e.onStockItemSettingsClick,y=(0,n.default)(e,["queue","activeProductId","onStickerSend","onVmojiEditClick","onVmojiCreateClick","onStockItemGiftClick","onStockItemSettingsClick"]),C=(0,u.useAPI)(),T=(0,v.usePeerInfo)().peerInfo,w=(0,f.useStickersKeyboard)().isServiceStockItem,x=(0,h.useStickersEmojiKeyboard)(),R=x.variant,O=x.isVisible,A=(0,d.useRef)(new l.LazyLoadQueue),N=(0,d.useRef)(),K=(0,d.useRef)([]),P=(0,d.useState)(),M=P[0],V=P[1],H=(0,d.useState)(),L=H[0],G=H[1],D=(0,d.useState)(),z=D[0],B=D[1],F=(0,d.useState)(),U=F[0],W=F[1],Z=(0,d.useState)(),J=Z[0],q=Z[1],Y=(0,d.useState)(),$=Y[0],Q=Y[1],X=(0,d.useState)(),ee=X[0],te=X[1],re=(0,d.useMemo)((()=>{var e=new Map,t=[],r=new Map,i=0;if(M&&z&&U){U.length&&(e.set(m.Tab.FAVORITE,{id:m.Tab.FAVORITE,index:i,referrer:f.StickerSendReferrer.FAVORITE,product:{title:"stickers_picker_favorite",stickers:U}}),t.push(m.Tab.FAVORITE),i++),z.length&&(e.set(m.Tab.RECENT,{id:m.Tab.RECENT,referrer:f.StickerSendReferrer.RECENT,index:i,product:{title:"stickers_picker_recently_used",stickers:z}}),t.push(m.Tab.RECENT),i++),-1!==(null==M?void 0:M.findIndex((e=>void 0!==e.product.vmoji_avatar)))||L||(e.set(m.Tab.VMOJI,{id:m.Tab.VMOJI,index:i,referrer:f.StickerSendReferrer.KEYBOARD,product:{title:"stickers_picker_vmoji"}}),t.push(m.Tab.VMOJI),i++),M.forEach((s=>{var n=s.product,o=n.id,c=n.vmoji_avatar;if(e.set(o,(0,a.default)({id:o,index:i,referrer:f.StickerSendReferrer.KEYBOARD},s)),c){var l=r.get(c.id);l||(l=t.push([])-1,r.set(c.id,l));var d=t[l];Array.isArray(d)&&d.push(o)}else t.push(o);i++}));var s=K.current;return(0,c.isEqual)(t,s)&&(t=s),{stockItemsMap:e,stockItemsGroups:t}}}),[M,z,U]),ie=(0,d.useReducer)(((e,t)=>{if(e&&(N.current=e),t){var r=null==re?void 0:re.stockItemsMap.get(t);if(r){var i=r.id;C.cache.setStickersActiveTab(i),(e=>{if(!w(e)){var t=null==M?void 0:M.find((t=>t.product.id===e));t&&M&&t.product.is_new&&(t.product.is_new=!1,C.cache.setStockItems(M,{notify:!1}),C.store.markStickerPackAsViewed({pack_id:e}))}})(i)}}return t}),void 0),se=ie[0],ae=ie[1],ne=function(){var e=(0,s.default)(i.mark((function e(){var t,r,s,a,n,o;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([C.cache.getStockItems({active:!0}),C.cache.getGlobalHashes(),C.cache.getRecentStickers(),C.cache.getFavoriteStickers(),C.cache.getStickersImageConfigs()]);case 2:t=e.sent,r=t[0],s=t[1],a=t[2],n=t[3],o=t[4],G(C.cache.hasVmojiCharacter),B(a),W(n),q(o),te(null==s?void 0:s.store_new_items),V(r);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,d.useEffect)((()=>(M&&C.cache.reload(),ne(),C.cache.addEventListener("change",ne),()=>{C.cache.removeEventListener("change",ne)})),[C,O]),(0,d.useEffect)((()=>{if(Q(void 0),T){var e,t=T.id;e=t,C.store.getStickerPacksAvailableForGift({user_id:e}).then(Q)}}),[T]);var oe=p[R],ce=b[R],le=I[R],de=k[R];return(0,o.jsx)(f.StickersKeyboardContext.Provider,Object.assign({value:{queue:t||A.current,activeProductId:r,stickersSize:oe,stickersCountPerRow:ce,stickersVerticalGap:le,stickersHorizontalGap:de,stockItems:M,stockItemsMap:null==re?void 0:re.stockItemsMap,stockItemsGroups:null==re?void 0:re.stockItemsGroups,selectedStockItemId:se,setSelectedStockItemId:ae,prevSelectedStockItemId:N.current,recentStickers:z,favoriteStickers:U,hasVmojiCharacter:L,storeNewItemsCount:ee,stickerImageConfigs:J,stockItemsAvailableToGift:$,onStickerSend:E,onVmojiEditClick:S,onVmojiCreateClick:_,onStockItemGiftClick:g,onStockItemSettingsClick:j}},y),void 0)}},940821:(e,t,r)=>{"use strict";r.d(t,{StickersKeyboardSelectProvider:()=>n});var i=r(419756),s=r(785893),a=r(855636);function n(e){var t=e.selectStockItem,r=(0,i.default)(e,["selectStockItem"]);return(0,s.jsx)(a.StickersKeyboardSelectContext.Provider,Object.assign({value:{selectStockItem:t}},r),void 0)}},448882:(e,t,r)=>{"use strict";r.d(t,{rowVariantModifier:()=>k,StickersKeyboardRow:()=>I});var i=r(887757),s=r(692137),a=r(419756),n=r(785893),o=r(667294),c=r(659397),l=r(86894),d=r(690409),u=r(123018),m=r(194182),v=r(855636),h=r(789706),f=r(127927),p=r(439942),b=new Map([[l.Appearance.LIGHT,d.Theme.LIGHT],[l.Appearance.DARK,d.Theme.DARK]]),k={[f.StickerEmojiKeyboardVariant.WIDE]:p.default.rowWide,[f.StickerEmojiKeyboardVariant.COMPACT]:p.default.rowCompact,[f.StickerEmojiKeyboardVariant.REGULAR]:p.default.rowRegular};function I(e){var t=e.stickers,r=e.stockItem,d=e.className,I=(0,a.default)(e,["stickers","stockItem","className"]),E=(0,m.useAPI)(),S=(0,l.useAppearance)(),_=(0,f.useStickersEmojiKeyboard)().variant,g=(0,v.useStickersKeyboard)(),j=g.queue,y=g.stickersSize,C=g.favoriteStickers,T=g.stickersCountPerRow,w=g.stickerImageConfigs,x=g.addToFavorite,R=g.removeFromFavorite,O=g.onStickerSend,A=(e,t)=>(0,s.default)(i.mark((function r(){var s,a;return i.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return O(e,t),r.next=3,E.cache.getRecentStickers();case 3:if(s=r.sent){r.next=6;break}return r.abrupt("return");case 6:if(!(-1!==s.findIndex((t=>t.sticker_id===e.sticker_id)))){r.next=9;break}return r.abrupt("return");case 9:a=s.length>=h.RECENT_STICKERS_DEFAULT_LIMIT?s.length-h.RECENT_STICKERS_DEFAULT_LIMIT+1:0,s.splice(0,a,e),E.cache.setRecentStickers(s,{notify:!1});case 12:case"end":return r.stop()}}),r)}))),N=(e,t)=>()=>{t?R(e):x(e)},K=(0,o.useMemo)((()=>(null==t?void 0:t.map((e=>{var i=null==r?void 0:r.referrer;if(t&&w){var s=w.items,a=w.default_id,o=e.sticker_id,c=e.is_allowed,l=Boolean(null==C?void 0:C.find((t=>t.sticker_id===e.sticker_id)));return(0,n.jsx)(u.Sticker,{loading:"lazy",className:p.default.sticker,name:String(o),size:y,queue:j,sticker:e,theme:b.get(S),configs:s,favorite:l,disabled:!c,defaultConfigId:a,onClick:A(e,i),onFavoriteClick:N(e,l)},o)}})))||(0,c.createArray)(T).map((e=>(0,n.jsx)(u.Sticker,{className:p.default.sticker,size:y},e)))),[j,t,S,y,r,C,w]);return(0,n.jsx)("div",Object.assign({className:(0,c.classNames)(p.default.row,p.default.rowStickers,k[_],d)},I,{children:K}),void 0)}},618759:(e,t,r)=>{"use strict";r.d(t,{StickersKeyboardVmojiRow:()=>m});var i=r(419756),s=r(785893),a=r(86894),n=r(448882),o=r(393930),c=r(855636),l=r(127927),d=r(490472),u=r(124453);function m(e){e.className;var t=(0,i.default)(e,["className"]),r=(0,a.useAppearance)(),m=(0,o.useLang)().translate,v=(0,l.useStickersEmojiKeyboard)().variant,h=(0,d.useHelpHints)().getHintResource,f=(0,c.useStickersKeyboard)().onVmojiCreateClick,p=r===a.Appearance.LIGHT?d.KeyboardStickersVmojiResourceKey.VMOJI_ONBOARDING_LIGHT:d.KeyboardStickersVmojiResourceKey.VMOJI_ONBOARDING_DARK,b=h(d.HelpHintId.KEYBOARD_STICKERS_VMOJI,p);return(0,s.jsx)("div",Object.assign({className:n.rowVariantModifier[v]},t,{children:(0,s.jsxs)("div",Object.assign({className:u.default.card},{children:[(0,s.jsx)("figure",{className:u.default.image,style:{backgroundImage:`url(${null==b?void 0:b.value})`}},void 0),f&&(0,s.jsx)("div",Object.assign({className:u.default.button},{children:(0,s.jsx)(a.Button,Object.assign({size:"s",mode:"outline",appearance:"accent",onClick:f},{children:m("stickers_picker_vmoji_create_character")}),void 0)}),void 0)]}),void 0)}),void 0)}},398785:(e,t,r)=>{"use strict";r.d(t,{Tabbar:()=>v});var i=r(419756),s=r(785893),a=r(659397),n=r(147650),o=r(393657),c=r(569456),l=r(928708),d=r(194182),u=r(248961),m=r(963849);function v(e){var t=e.activeTab,r=e.shopIndicatorMode,v=e.onShopClick,h=e.onTabChange,f=e.className,p=(0,i.default)(e,["activeTab","shopIndicatorMode","onShopClick","onTabChange","className"]),b=(0,d.useAPI)(),k=e=>()=>{null==h||h(e)};return(0,s.jsxs)("div",Object.assign({className:(0,a.classNames)(m.default.tabbar,f)},p,{children:[(0,s.jsx)(l.TabbarItem,Object.assign({className:m.default.item,active:t===u.Tab.EMOJI,onClick:k(u.Tab.EMOJI)},{children:(0,s.jsx)(n.default,{},void 0)}),void 0),(0,s.jsx)(l.TabbarItem,Object.assign({className:m.default.item,active:t===u.Tab.STICKERS,onClick:k(u.Tab.STICKERS)},{children:(0,s.jsx)(o.default,{},void 0)}),void 0),(0,s.jsx)(l.TabbarItem,Object.assign({className:m.default.item,indicator:r,onClick:e=>{b.store.markAsViewed({type:"stickers",reset:String(["store_new_items","global_promotion"])}),null==v||v(e)}},{children:(0,s.jsx)(c.default,{},void 0)}),void 0)]}),void 0)}},928708:(e,t,r)=>{"use strict";r.d(t,{TabbarItemIndicator:()=>i,TabbarItem:()=>l});var i,s=r(419756),a=r(785893),n=r(659397),o=r(81251);!function(e){e.NONE="none",e.PRIMARY="primary",e.SECONDARY="secondary",e.DESTRUCTIVE="destructive"}(i||(i={}));var c={[i.NONE]:o.default.indicatorNone,[i.PRIMARY]:o.default.indicatorPrimary,[i.SECONDARY]:o.default.indicatorSecondary,[i.DESTRUCTIVE]:o.default.indicatorDestructive};function l(e){var t=e.active,r=e.indicator,l=void 0===r?i.NONE:r,d=e.className,u=e.children,m=(0,s.default)(e,["active","indicator","className","children"]);return(0,a.jsx)("div",Object.assign({className:(0,n.classNames)(d,o.default.item,o.default.indicator,c[l],{[o.default.itemActive]:t})},m,{children:u}),void 0)}},194182:(e,t,r)=>{"use strict";r.d(t,{APIContext:()=>a,useAPI:()=>n});var i=r(667294),s=r(928525),a=(0,i.createContext)(new s.API({userId:0,onAPIRequest:()=>Promise.reject()}));function n(){return(0,i.useContext)(a)}},364759:(e,t,r)=>{"use strict";r.d(t,{EmojiKeyboardContext:()=>n,useEmojiKeyboard:()=>o});var i=r(722122),s=r(667294),a=r(194182),n=(0,s.createContext)({});function o(){var e=(0,a.useAPI)(),t=(0,s.useContext)(n),r=t.emojiCountPerRow,o=t.setRecentEmoji,c=t.onEmojiInsert;return(0,i.default)({},t,{insertEmoji:t=>{c(t),(t=>{var i=new Map(e.cache.recentEmoji),s=i.get(t)||0;i.set(t,s+1);var a=[...i].reverse().slice(0,2*r);o(a),e.cache.setRecentEmoji(a)})(t)}})}},490472:(e,t,r)=>{"use strict";r.d(t,{HelpHintsContext:()=>o,HelpHintId:()=>i,KeyboardStickersVmojiResourceKey:()=>s,useHelpHints:()=>c});var i,s,a=r(722122),n=r(667294),o=(0,n.createContext)(void 0);function c(){var e=(0,n.useContext)(o),t=t=>null==e?void 0:e.items.find((e=>e.id===t));return(0,a.default)({},e,{getHint:t,getHintResource:(e,r)=>{var i,s=t(e);if(s)return null==s||null==(i=s.resources)?void 0:i.find((e=>e.key===r))}})}!function(e){e.KEYBOARD_STICKERS_VMOJI="keyboard:stickers_vmoji"}(i||(i={})),function(e){e.VMOJI_ONBOARDING_LIGHT="vmoji_kb_onboarding_light",e.VMOJI_ONBOARDING_DARK="vmoji_kb_onboarding_dark"}(s||(s={}))},272505:(e,t,r)=>{"use strict";r.d(t,{useHorizontalScroll:()=>s});var i=r(667294);function s(e){(0,i.useEffect)((()=>{var t=e.current;if(t){var r=e=>{e.deltaX||(t.scrollLeft+=e.deltaY)};return t.addEventListener("wheel",r,{passive:!0}),()=>{t.removeEventListener("wheel",r)}}}),[e])}},393930:(e,t,r)=>{"use strict";r.d(t,{LangContext:()=>a,useLang:()=>n});var i=r(785893),s=r(667294),a=(0,s.createContext)(void 0);function n(){var e=(0,s.useContext)(a);return{translate:(t,r)=>{if(!t||!e)return(0,i.jsx)(i.Fragment,{children:" "},void 0);var s=e.keys;return t in s?s[t].replace(/{([^]+?)}/g,((e,t)=>{var i=null==r?void 0:r[t];return void 0===i?"":String(i)})):t}}}},763840:(e,t,r)=>{"use strict";r.d(t,{PeerInfoContext:()=>s,usePeerInfo:()=>a});var i=r(667294),s=(0,i.createContext)({});function a(){return(0,i.useContext)(s)}},862412:(e,t,r)=>{"use strict";r.d(t,{useSmoothScroll:()=>n});var i=r(659397),s=r(667294),a=r(101438);function n(e){var t=(0,s.useRef)(0);return{scrollTo:(0,s.useCallback)((0,i.debounce)((function(r){var i=void 0===r?{}:r,s=i.offset,n=void 0===s?0:s,o=i.duration,c=void 0===o?300:o;t.current=Date.now();var l=e.scrollOffset,d=t.current,u=()=>{if(t.current===d){var r=Date.now()-d,i=(0,a.easeOutQuart)(Math.min(r/c,1)),s=l+(n-l)*i;r<c&&requestAnimationFrame(u),e.scrollToOffset(s)}};requestAnimationFrame(u)}),150),[e])}}},127927:(e,t,r)=>{"use strict";r.d(t,{StickerEmojiKeyboardVariant:()=>i,StickersEmojiKeyboardContext:()=>n,useStickersEmojiKeyboard:()=>o});var i,s=r(667294),a=r(248961);!function(e){e.COMPACT="compact",e.REGULAR="3_in_row",e.WIDE="4_in_row"}(i||(i={}));var n=(0,s.createContext)({variant:i.REGULAR,activeTab:a.Tab.EMOJI,setActiveTab:()=>{}});function o(){return(0,s.useContext)(n)}},855636:(e,t,r)=>{"use strict";r.d(t,{StickerSendReferrer:()=>i,StickersKeyboardContext:()=>l,useStickersKeyboard:()=>d,StickersKeyboardSelectContext:()=>u,useStickersKeyboardSelect:()=>m});var i,s=r(722122),a=r(887757),n=r(692137),o=r(667294),c=r(194182);!function(e){e.RECENT="recent",e.FAVORITE="favourite",e.KEYBOARD="keyboard"}(i||(i={}));var l=(0,o.createContext)({});function d(){var e=(0,c.useAPI)(),t=(0,o.useContext)(l),r=t.favoriteStickers,i=t.stockItemsGroups,d=function(){var t=(0,n.default)(a.mark((function t(i){var s,n,o;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.cache.getGlobalHashes();case 2:if(s=t.sent){t.next=5;break}return t.abrupt("return");case 5:if(n=i.sticker_id,o=s.favorite_stickers_limit,e.store.addStickersToFavorite({sticker_ids:String(n)}),r){t.next=10;break}return t.abrupt("return");case 10:e.cache.setFavoriteStickers([i,...r].slice(0,o));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u=function(){var t=(0,n.default)(a.mark((function t(i){var s,n;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=i.sticker_id,e.store.removeStickersFromFavorite({sticker_ids:String(s)}),r){t.next=4;break}return t.abrupt("return");case 4:if(n=r.findIndex((e=>e.sticker_id===s)),-1!==n){t.next=8;break}return t.abrupt("return");case 8:r.splice(n,1),e.cache.setFavoriteStickers(r);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,s.default)({},t,{addToFavorite:d,getGroupIndex:e=>e?null==i?void 0:i.findIndex((t=>(Array.isArray(t)||(t=[t]),t.includes(e)))):void 0,removeFromFavorite:u,isServiceStockItem:e=>"number"!=typeof e,isGroupedStockItem:e=>i&&void 0!==e&&!i.includes(e)})}var u=(0,o.createContext)({});function m(){return(0,o.useContext)(u)}},928525:(e,t,r)=>{"use strict";r.d(t,{API:()=>a});var i,s=r(861440);!function(e){e.VMOJI="vmoji",e.STORE="store",e.ACCOUNT="account",e.MESSAGES="messages"}(i||(i={}));class a{constructor(e){var t=this,r=e.userId,a=e.onAPIRequest;this.onAPIRequest=a,this.cache=new s.APICache({userId:r,api:this});for(var n=function(e){t[e]=new Proxy(Object.create(null),{get:(r,i)=>r=>t.request({group:e,method:i,params:r})})},o=0,c=Object.values(i);o<c.length;o++){n(c[o])}}request(e){var t=e.group,r=e.method,i=e.params,s=void 0===i?{}:i;return this.onAPIRequest?this.onAPIRequest(`${t}.${r}`,s):Promise.reject(new Error("Root dependency for API not provided"))}}},861440:(e,t,r)=>{"use strict";r.d(t,{APICache:()=>l});var i=r(722122),s=r(887757),a=r(692137),n=r(659397),o=r(248961),c=r(641984);class l extends o.Cache{constructor(e){var t=e.userId,r=e.api;super(t),this.reloading=!1,this.loadedStockItemsChunks=new Map,this.api=r;var i=e=>{var t=e.key,r=e.newValue;t===l.CACHE_UPDATE_EVENT_NAME&&null!==r&&this.dispatchEvent("change")};window.addEventListener("storage",i),this.destroy=()=>{window.removeEventListener("storage",i)}}getStockItem(e){var t=this,r=e.productId,i=e.stickerId;return(0,a.default)(s.mark((function e(){var a,n;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getStockItems();case 2:if((a=e.sent)&&(r&&(n=a.find((e=>e.product.id===r))),i&&!n&&(n=a.find((e=>{var t=e.product.stickers;return t&&-1!==t.findIndex((e=>e.sticker_id===i))})))),!n){e.next=6;break}return e.abrupt("return",n);case 6:if(!r){e.next=10;break}return e.next=9,t.api.store.getStockItemByProductId({type:"stickers",product_id:String(r)}).catch((()=>{}));case 9:n=e.sent;case 10:if(!n){e.next=13;break}return t.updateStockItems([n]),e.abrupt("return",n);case 13:if(!i){e.next=17;break}return e.next=16,t.api.store.getStockItemByStickerId({sticker_id:i}).catch((()=>{}));case 16:n=e.sent;case 17:return n&&t.updateStockItems([n]),e.abrupt("return",n);case 19:case"end":return e.stop()}}),e)})))()}reload(){var e=this;return(0,a.default)(s.mark((function t(){var r,i,a,n,o,c,l,d,u,m;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.reloading){t.next=2;break}return t.abrupt("return",!0);case 2:return e.reloading=!0,t.next=5,e.getGlobalHashes();case 5:return r=t.sent,e.reloadHelpHints(),e.reloadVmojiAvatar(),t.next=10,Promise.all([e.api.store.hasNewItems({type:"stickers",version_hash:String(null==r?void 0:r.stickers_version_hash)}).catch((()=>null)),e.getStockItems()]);case 10:if(i=t.sent,a=i[0],n=i[1],a){t.next=16;break}return e.reloading=!1,t.abrupt("return",!1);case 16:return a.sticker_packs_version_hashes||(a.sticker_packs_version_hashes=null==r?void 0:r.sticker_packs_version_hashes),o=a.stickers_version_hash,c=a.sticker_packs_version_hashes,l=a.favorite_stickers_version_hash,d=a.image_configs_version_hash,u=a.sticker_packs_chunk_size_limit,o!==(null==r?void 0:r.stickers_version_hash)&&(n=void 0),m=[e.reloadStockItems(n,c,u),e.reloadRecentStickers()],l!==(null==r?void 0:r.favorite_stickers_version_hash)&&m.push(e.reloadFavoriteStickers()),d!==(null==r?void 0:r.image_configs_version_hash)&&m.push(e.reloadStickersImageConfigs()),t.abrupt("return",Promise.all(m).then((t=>{e.reloading=!1;var r=-1===t.findIndex((e=>!e));return r&&a&&(e.setGlobalHashes(a),e.refresh()),r})));case 23:case"end":return t.stop()}}),t)})))()}refresh(){try{localStorage.setItem(l.CACHE_UPDATE_EVENT_NAME,""),localStorage.removeItem(l.CACHE_UPDATE_EVENT_NAME)}catch(e){}}reloadHelpHints(){var e=this;return(0,a.default)(s.mark((function t(){var r,a;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getHelpHints();case 2:if(!((r=t.sent)&&Date.now()-r.date<c.DAY)){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,e.api.account.getHelpHints().then((e=>(0,i.default)({},e,{date:Date.now()}))).catch((()=>{}));case 7:a=t.sent,e.setHelpHints(a);case 9:case"end":return t.stop()}}),t)})))()}reloadVmojiAvatar(){this.hasVmojiCharacter||this.api.vmoji.getAvatar().then((e=>{var t=e.characters;this.setHasVmojiCharacter(Boolean(null==t?void 0:t.length))}))}reloadStockItems(e,t,r){var i=this;return void 0===r&&(r=25),(0,a.default)(s.mark((function a(){var o,c,l,d,u,m,v,h;return s.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(u=null==(o=e)||null==(c=o.filter((e=>{var r=e.product.id,i=e.version_hash,s=null==t?void 0:t.find((e=>e.pack_id===r));return!!s&&s.hash!==i})))?void 0:c.map((e=>e.product.id)),!(m=!u)){s.next=6;break}return s.next=5,i.api.store.getProducts({type:"stickers",filters:"active"}).then((e=>e.items.map((e=>e.id)))).catch((()=>{}));case 5:u=s.sent;case 6:if(null==(l=u)?void 0:l.length){s.next=8;break}return s.abrupt("return",!0);case 8:return s.next=10,Promise.all((0,n.chunkArray)(u,r).map((e=>{var t=String(e);return i.loadedStockItemsChunks.get(t)||i.api.store.getStockItems({type:"stickers",product_ids:t}).then((e=>(i.loadedStockItemsChunks.set(t,e),e)))}))).then((e=>e.reduce(((e,t)=>{var r=t.items;return e=e.concat(r)}),[]).filter((e=>!Array.isArray(e))))).catch((()=>null));case 10:if(v=s.sent){s.next=13;break}return s.abrupt("return",!1);case 13:return(null==(d=e)?void 0:d.length)&&(h=new Map(v.map((e=>[e.product.id,e]))),e=e.map((e=>h.get(e.product.id)||e)),v=e),v&&u&&m&&(v=v.sort(((e,t)=>{var r,i,s=e.product.id,a=t.product.id;return Number(null==(r=u)?void 0:r.indexOf(s))-Number(null==(i=u)?void 0:i.indexOf(a))}))),s.next=17,i.setStockItems(v);case 17:return i.loadedStockItemsChunks.clear(),s.abrupt("return",!0);case 19:case"end":return s.stop()}}),a)})))()}reloadStickersImageConfigs(){var e=this;return(0,a.default)(s.mark((function t(){var r;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.api.store.getStickersImageConfigs().catch((()=>null));case 2:if(r=t.sent){t.next=5;break}return t.abrupt("return",!1);case 5:return e.setStickersImageConfigs(r),t.abrupt("return",!0);case 7:case"end":return t.stop()}}),t)})))()}reloadFavoriteStickers(){var e=this;return(0,a.default)(s.mark((function t(){var r;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.api.store.getFavoriteStickers().then((e=>e.items)).catch((()=>null));case 2:if(r=t.sent){t.next=5;break}return t.abrupt("return",!1);case 5:return t.next=7,e.setFavoriteStickers(r);case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t)})))()}reloadRecentStickers(){var e=this;return(0,a.default)(s.mark((function t(){var r;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.api.messages.getRecentStickers().then((e=>e.items)).catch((()=>null));case 2:return(r=t.sent)&&e.setRecentStickers(r),t.abrupt("return",!0);case 5:case"end":return t.stop()}}),t)})))()}}l.CACHE_UPDATE_EVENT_NAME=`${o.Cache.DB_NAME}_cache_update`},248961:(e,t,r)=>{"use strict";r.d(t,{CacheKey:()=>s,Tab:()=>a,Cache:()=>u});var i,s,a,n=r(887757),o=r(692137),c=r(923807),l=r(891047);!function(e){e.OBJECT="object",e.STRING="string",e.NUMBER="number",e.BOOLEAN="boolean",e.STRING_NUMBER="string_number"}(i||(i={})),function(e){e.HELP_HINTS="helpHints",e.RECENT_EMOJI="recentEmoji",e.STOCK_ITEMS_KEY="stockItems",e.GLOBAL_HASHES_KEY="globalHashes",e.TABBAR_ACTIVE_TAB="tabbarActiveTab",e.RECENT_STICKERS_KEY="recentStickers",e.HAS_VMOJI_CHARACTER="hasVmojiCharacter",e.STICKERS_ACTIVE_TAB="stickersActiveTab",e.FAVORITE_STICKERS_KEY="favoriteStickers",e.STICKERS_IMAGE_CONFIGS="stickersImageConfigs"}(s||(s={})),function(e){e.EMOJI="emoji",e.STICKERS="stickers",e.FAVORITE="favorite",e.VMOJI="vmoji",e.RECENT="recent"}(a||(a={}));var d=Object.values(a);class u extends c.EventDispatcher{constructor(e){super(),this.userId=e,this.store=(0,l.createStore)(u.DB_NAME,"cache")}getStockItems(e){var t=(void 0===e?{}:e).active;return this.getItem(s.STOCK_ITEMS_KEY).then((e=>(e&&(e=e.sort(((e,t)=>{var r=e.product.vmoji_avatar,i=t.product.vmoji_avatar;return Number(Boolean(i))-Number(Boolean(r))})),t&&(e=e.filter((e=>e.product.active)))),e)))}setStockItems(e,t){return this.setItem(s.STOCK_ITEMS_KEY,e,t)}updateStockItems(e,t){var r=this;return(0,o.default)(n.mark((function i(){var a,o;return n.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,r.getStockItems();case 2:return(a=i.sent)&&(o=new Map(a.map((e=>[e.product.id,e]))),e.forEach((e=>{var t=e.product.id;o.set(t,e)})),a=[...o.values()]),i.abrupt("return",r.setItem(s.STOCK_ITEMS_KEY,a||e,t));case 5:case"end":return i.stop()}}),i)})))()}getGlobalHashes(){return this.getItem(s.GLOBAL_HASHES_KEY)}setGlobalHashes(e){return this.setItem(s.GLOBAL_HASHES_KEY,e)}getRecentStickers(){return this.getItem(s.RECENT_STICKERS_KEY)}setRecentStickers(e,t){return this.setItem(s.RECENT_STICKERS_KEY,e,t)}getFavoriteStickers(){return this.getItem(s.FAVORITE_STICKERS_KEY)}setFavoriteStickers(e){return this.setItem(s.FAVORITE_STICKERS_KEY,e)}getStickersImageConfigs(){return this.getItem(s.STICKERS_IMAGE_CONFIGS)}setStickersImageConfigs(e){return this.setItem(s.STICKERS_IMAGE_CONFIGS,e)}get recentEmoji(){return this.getItemSync(s.RECENT_EMOJI,i.OBJECT)}setRecentEmoji(e){return this.setItemSync(s.RECENT_EMOJI,e,i.OBJECT)}get stickersActiveTab(){return this.getItemSync(s.STICKERS_ACTIVE_TAB,i.STRING_NUMBER)}setStickersActiveTab(e){return this.setItemSync(s.STICKERS_ACTIVE_TAB,e,i.STRING_NUMBER)}get tabbarActiveTab(){var e=this.getItemSync(s.TABBAR_ACTIVE_TAB,i.STRING);if(!e||d.includes(e))return e}setTabbarActiveTab(e){return this.setItemSync(s.TABBAR_ACTIVE_TAB,e,i.STRING)}getHelpHints(){return this.getItem(s.HELP_HINTS)}setHelpHints(e){return this.setItem(s.HELP_HINTS,e)}get hasVmojiCharacter(){return this.getItemSync(s.HAS_VMOJI_CHARACTER,i.BOOLEAN)}setHasVmojiCharacter(e){return this.setItemSync(s.HAS_VMOJI_CHARACTER,e,i.BOOLEAN)}clear(){return(0,l.clear)(this.store)}getItem(e){var t=this;return(0,o.default)(n.mark((function r(){var i;return n.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=t.buildItemKey(e),i=u.cache.get(e),r.abrupt("return",(0,l.get)(e,t.store).then((e=>e||i)).catch((()=>i)));case 3:case"end":return r.stop()}}),r)})))()}setItem(e,t,r){var i=this;return void 0===r&&(r={}),(0,o.default)(n.mark((function s(){var a,o,c;return n.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a=r.notify,o=void 0===a||a,c=i.buildItemKey(e),u.cache.set(c,t),s.next=5,(0,l.set)(c,t,i.store).catch((()=>{}));case 5:o&&i.dispatchEvent("change",e);case 6:case"end":return s.stop()}}),s)})))()}deleteItem(e){var t=this.buildItemKey(e);return u.cache.delete(t),(0,l.del)(t,this.store).then((()=>{this.dispatchEvent("change",e)}))}buildItemKey(e){return`${e}-${u.VERSION}-${this.userId}`}getItemSync(e,t){e=this.buildSyncItemKey(e);try{var r=localStorage.getItem(e);if(!r)return;switch(t){case i.OBJECT:try{r=JSON.parse(r)}catch(e){return}break;case i.NUMBER:r=Number(r)||0;break;case i.STRING_NUMBER:r=Number(r)||r;break;case i.BOOLEAN:r=Boolean(Number(r))}return r}catch(t){return u.cache.get(e)}}setItemSync(e,t,r){switch(e=this.buildSyncItemKey(e),r){case i.OBJECT:t=JSON.stringify(t);break;case i.BOOLEAN:t=String(Number(t))}try{localStorage.setItem(e,t)}catch(r){u.cache.set(e,t)}}buildSyncItemKey(e){return`${u.DB_NAME}_${e}_${u.VERSION}_${this.userId}`}}u.DB_NAME="stickers",u.VERSION=2,u.cache=new Map},641984:(e,t,r)=>{"use strict";r.d(t,{DAY:()=>i});var i=864e5},101438:(e,t,r)=>{"use strict";function i(e){return 1-Math.pow(1-e,4)}r.d(t,{easeOutQuart:()=>i})},440941:(e,t,r)=>{"use strict";var i;r.d(t,{Lang:()=>s});class s{static subscribe(e){return window.addEventListener(s.UPDATE_EVENT,e),()=>{window.removeEventListener(s.UPDATE_EVENT,e)}}}s.url=new URL("/js/lang-pack.js","https://vk.ru"),s.UPDATE_EVENT="stickers_lang_update";var a=null==(i=window.vk)?void 0:i.lang;s.url.searchParams.set("format","json"),s.url.searchParams.set("cache_age","600"),s.url.searchParams.set("name","stickers_picker"),void 0!==a&&s.url.searchParams.set("lang",String(a)),fetch(s.url).then((e=>e.json())).then((e=>{s.pack=e,dispatchEvent(new Event(s.UPDATE_EVENT))}))},358456:(e,t,r)=>{"use strict";function i(e){return encodeURIComponent(e.replace(/\uFE0F/gi,"")).replace(/%/gi,"").toLowerCase()}r.d(t,{unicodeToByteHex:()=>i})},876863:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={emoji:"Emoji-module__emoji--E0R4u"}},774319:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={item:"EmojiItem-module__item--yFc2D",itemActive:"EmojiItem-module__itemActive--AkzuT"}},933712:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={keyboard:"EmojiKeyboard-module__keyboard--seIf5",scroll:"EmojiKeyboard-module__scroll--IQE8t",in:"EmojiKeyboard-module__in--MpLVw",item:"EmojiKeyboard-module__item--ioycj",itemHeader:"EmojiKeyboard-module__itemHeader--WIejT"}},899031:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={header:"EmojiKeyboardHeader-module__header--T8vBm",headerWide:"EmojiKeyboardHeader-module__headerWide--yGFlj",headerRegular:"EmojiKeyboardHeader-module__headerRegular--Je2cy",headerCompact:"EmojiKeyboardHeader-module__headerCompact--Sobgg",title:"EmojiKeyboardHeader-module__title--le2O6"}},979693:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={row:"EmojiKeyboardRow-module__row--p7nYm",rowWide:"EmojiKeyboardRow-module__rowWide--_1FqS",rowRegular:"EmojiKeyboardRow-module__rowRegular--QI3uo",rowCompact:"EmojiKeyboardRow-module__rowCompact--FjwVK",emoji:"EmojiKeyboardRow-module__emoji--MMe5H"}},661083:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={skeleton:"Skeleton-module__skeleton--y3Nn_"}},476001:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={keyboard:"StickersEmojiKeyboard-module__keyboard--IAgeR",keyboardWide:"StickersEmojiKeyboard-module__keyboardWide--UuFIy",keyboardCompact:"StickersEmojiKeyboard-module__keyboardCompact--bRYQD",keyboardRegular:"StickersEmojiKeyboard-module__keyboardRegular--HDFFy",in:"StickersEmojiKeyboard-module__in--nnOLo",content:"StickersEmojiKeyboard-module__content--NnOYn",item:"StickersEmojiKeyboard-module__item--e0bty",itemTransformed:"StickersEmojiKeyboard-module__itemTransformed--_w86k"}},887886:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={keyboard:"StickersKeyboard-module__keyboard--C86fi",scroll:"StickersKeyboard-module__scroll--LH1QR",scrollDisabled:"StickersKeyboard-module__scrollDisabled--jluHC",in:"StickersKeyboard-module__in--rc5Tc",item:"StickersKeyboard-module__item--g6jbo",itemHeader:"StickersKeyboard-module__itemHeader--PBLkp"}},897935:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={group:"StickersKeyboardGroup-module__group--vrLiD",groupActive:"StickersKeyboardGroup-module__groupActive--x9pK0",groupHidden:"StickersKeyboardGroup-module__groupHidden--RlGsH",item:"StickersKeyboardGroup-module__item--UZ62j"}},442489:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={in:"StickersKeyboardGroupItem-module__in--pKAYF",inPlaceholder:"StickersKeyboardGroupItem-module__inPlaceholder--fPYdQ",inActive:"StickersKeyboardGroupItem-module__inActive--VnSe5",inHidden:"StickersKeyboardGroupItem-module__inHidden--xHiol",icon:"StickersKeyboardGroupItem-module__icon--lmHKf",iconService:"StickersKeyboardGroupItem-module__iconService--JE5Pa",inIndicator:"StickersKeyboardGroupItem-module__inIndicator--krsEN"}},130146:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={groups:"StickersKeyboardGroups-module__groups--wrSRW",in:"StickersKeyboardGroups-module__in--Gd19P",items:"StickersKeyboardGroups-module__items--jvNnC",group:"StickersKeyboardGroups-module__group--yc83Y",groupIn:"StickersKeyboardGroups-module__groupIn--QaWHg",chevron:"StickersKeyboardGroups-module__chevron--LbHbr",shadow:"StickersKeyboardGroups-module__shadow--TkuFg",shadowVisible:"StickersKeyboardGroups-module__shadowVisible--noQkU",shadowLeft:"StickersKeyboardGroups-module__shadowLeft--UJOe7",shadowRight:"StickersKeyboardGroups-module__shadowRight--u7UbB",chevronActive:"StickersKeyboardGroups-module__chevronActive--yuxkP",chevronLeft:"StickersKeyboardGroups-module__chevronLeft--fV5nj",chevronRight:"StickersKeyboardGroups-module__chevronRight--LAenO"}},926464:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={popper:"PeerInfo-module__popper--zfcdJ",icon:"PeerInfo-module__icon--QzOQL"}},754542:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={header:"StickersKeyboardHeader-module__header--XoIRC",headerWide:"StickersKeyboardHeader-module__headerWide--MqJ_r",headerRegular:"StickersKeyboardHeader-module__headerRegular--eytC7",headerCompact:"StickersKeyboardHeader-module__headerCompact--zdD4p",headerAside:"StickersKeyboardHeader-module__headerAside--_UZ4k",title:"StickersKeyboardHeader-module__title--cCIDg",icon:"StickersKeyboardHeader-module__icon--CGri7",settings:"StickersKeyboardHeader-module__settings--QVxII",brush:"StickersKeyboardHeader-module__brush--iGjZ1",counter:"StickersKeyboardHeader-module__counter--gXRxa"}},439942:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={row:"StickersKeyboardRow-module__row--DzKPF",rowWide:"StickersKeyboardRow-module__rowWide--fdCiC",rowRegular:"StickersKeyboardRow-module__rowRegular--_fql3",rowCompact:"StickersKeyboardRow-module__rowCompact--O2aKY",rowStickers:"StickersKeyboardRow-module__rowStickers--RcxNf",sticker:"StickersKeyboardRow-module__sticker--rcpAJ"}},124453:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={card:"StickersKeyboardVmojiRow-module__card--ETJRr",image:"StickersKeyboardVmojiRow-module__image--tOQ2Z",button:"StickersKeyboardVmojiRow-module__button--iKdxO"}},963849:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={tabbar:"Tabbar-module__tabbar--px5Db",item:"Tabbar-module__item--Wbo6F"}},81251:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i={item:"TabbarItem-module__item--xsZ69",itemActive:"TabbarItem-module__itemActive--Fl5la",indicator:"TabbarItem-module__indicator--F2KsU",indicatorNone:"TabbarItem-module__indicatorNone--SBiZS",indicatorPrimary:"TabbarItem-module__indicatorPrimary--vnWCH",indicatorSecondary:"TabbarItem-module__indicatorSecondary--sVtQs",indicatorDestructive:"TabbarItem-module__indicatorDestructive--usYTd"}},209146:(e,t,r)=>{"use strict";r.r(t),r.d(t,{StickerPickerViewer:()=>m});var i=r(785893),s=r(973935),a=r(873589),n=r(447768),o=r(39196),c=r(730304),l=r(351554),d=r(394912),u=r(480143);class m{constructor(){this.currentParent=null,this.onlyEmoji=!1,this.SELECTOR="StickerPickerViewer",this.IS_OPEN_SELECTOR="StickerPickerViewer--isOpen",this.IS_OPEN_BODY_SELECTOR="StickerPickerIsOpen",this.CLOSE_TIMEOUT=300,this.OPEN_TIMEOUT=100,this.updateAfterHideTransitionEnd=()=>{this.dispatchCustomEvent({isVisible:!1,packId:void 0}),window.document.body.classList.remove(this.IS_OPEN_BODY_SELECTOR),this.removeUpdateAfterHideTransitionEnd()},this.addUpdateAfterHideTransitionEnd=()=>{var e;null===(e=this.wrapper)||void 0===e||e.addEventListener("transitionend",this.updateAfterHideTransitionEnd)},this.removeUpdateAfterHideTransitionEnd=()=>{var e;null===(e=this.wrapper)||void 0===e||e.removeEventListener("transitionend",this.updateAfterHideTransitionEnd)},this.positionSizeManager=new d.PositionSizeManager(this),this.api=new u.API}hide(){this.stopShowing(),this.closeTimeoutId=setTimeout((()=>{this.hidePicker()}),this.CLOSE_TIMEOUT)}stopHiding(){clearTimeout(this.closeTimeoutId),this.removeUpdateAfterHideTransitionEnd()}stopShowing(){clearTimeout(this.openTimeoutId)}show(e){e&&(this.optId=(0,a.data)(e.parentNode,"optId"),this.openTimeoutId=setTimeout((()=>{null===this.currentParent||this.wrapper&&!this.wrapper.children.length?this.buildPicker(e):this.currentParent!==e.parentElement?this.rebuildPicker(e):(this.stopHiding(),requestAnimationFrame((()=>{this.showPicker()}))),this.positionSizeManager.manageSizeAndPosition()}),this.OPEN_TIMEOUT))}destroy(){this.wrapper&&(s.unmountComponentAtNode(this.wrapper),this.wrapper.remove())}rebuildPicker(e){var t;null===(t=this.wrapper)||void 0===t||t.remove(),this.stopHiding(),this.buildPicker(e)}buildPicker(e){const t=e.parentElement;t&&(t.insertAdjacentHTML("beforeend",`\n            <div class="${this.SELECTOR}"></div>\n        `),this.wrapper=t.querySelector("."+this.SELECTOR),this.wrapper&&(this.wrapper.onmouseenter=()=>this.stopHiding(),this.wrapper.onmouseleave=()=>this.hide(),this.wrapper.onclick=e=>e.stopPropagation(),s.render((0,i.jsx)(n.StickerPicker,{onlyEmoji:this.onlyEmoji,packIdToOpen:this.packId},void 0),this.wrapper),requestAnimationFrame((()=>{this.showPicker()}))),this.currentParent=t)}showPicker(){var e;null===(e=this.wrapper)||void 0===e||e.classList.add(this.IS_OPEN_SELECTOR),this.dispatchCustomEvent({packId:this.packId,isVisible:!0}),this.moveStickersHints(),this.initPeerId(),window.document.body.classList.add(this.IS_OPEN_BODY_SELECTOR)}hidePicker(){this.wrapper&&(this.addUpdateAfterHideTransitionEnd(),this.wrapper.classList.remove(this.IS_OPEN_SELECTOR),this.packId=void 0,this.moveStickersHints(),this.clearPeerId())}dispatchCustomEvent(e){var t;null===(t=this.wrapper)||void 0===t||t.dispatchEvent((0,o.createEvent)(e))}get isShown(){var e;return null===(e=this.wrapper)||void 0===e?void 0:e.classList.contains(this.IS_OPEN_SELECTOR)}get isDown(){return this.positionSizeManager.isDown}moveStickersHints(){(0,c.moveStickersHintsToStickerPicker)(this.optId,!0)}showPack(e,t){var r,i;const s=(0,l.getClosestTextInput)(t);if(!s||!e)return;const a=null===(i=null===(r=s.parentNode)||void 0===r?void 0:r.parentNode)||void 0===i?void 0:i.querySelector("._emoji_btn");if(!a)return;this.packId=e,this.show(a),s.focus();const n=e=>{var t;(null===(t=e.target.classList)||void 0===t?void 0:t.contains("sticker_img"))||(this.hidePicker(),document.removeEventListener("click",n))};document.addEventListener("click",n)}initPeerId(){var e;this.peerId=(null===(e=window.reforgedME)||void 0===e?void 0:e.stickersSelectedPeerId)||window.cur.peer}clearPeerId(){this.peerId=void 0}}},447768:(e,t,r)=>{"use strict";r.d(t,{StickerPicker:()=>b});var i=r(785893),s=r(86894),a=r(248961),n=r(521005),o=r(480143),c=r(944340),l=r(798262),d=r(239914),u=r(751595),m=r(194141),v=r(354454),h=r(844142);const f=()=>window.StickerPickerViewer.optId,p=(0,m.getVariant)(),b=({onlyEmoji:e,packIdToOpen:t})=>{const{isVisible:r,packId:m}=(0,v.useUpdateOnEvents)({isVisible:!0,packId:t}),b=e?a.Tab.EMOJI:void 0;return(0,i.jsx)(s.ConfigProvider,Object.assign({platform:s.Platform.VKCOM,scheme:"inherit"},{children:(0,i.jsx)(n.StickersEmojiKeyboard,{userId:window.vk.id,isVisible:r,visibleTab:b,variant:p,activeProductId:m,onAPIRequest:o.onAPIRequest,onShopClick:()=>{var e;(0,l.statlogsValueEvent)("sticker_picker","tab_open","shop");const t=f();null===(e=window.Emoji)||void 0===e||e.showStickersStore(t)},onTabChange:({tab:e,stockItem:t})=>{t||(0,l.statlogsValueEvent)("sticker_picker","tab_open",e)},onEmojiInsert:e=>{var t;(0,l.statlogsValueEvent)("sticker_picker","emoji_click");const r=(0,d.emojiSymbolToByteHex)(e),i=f();null===(t=window.Emoji)||void 0===t||t.addEmoji(i,r)},onStickerSend:(e,t="keyboard")=>{var r;const i=f();e.sticker_id&&(null===(r=window.Emoji)||void 0===r||r.stickerClick(i,e.sticker_id,null,t))},onVmojiEditClick:({character_id:e})=>{(0,c.showVmojiConstructor)(void 0,{character_id:e})},onVmojiCreateClick:()=>{var e;null===(e=window.Emoji)||void 0===e||e.createVmojiAvatar()},onStockItemGiftClick:e=>{const{id:t}=e.product,{Emoji:r,StickerPickerViewer:i}=window,{peerId:s}=i,a={sticker_referrer:"stickers_keyboard2"};s&&(h.Ranges.isUserIdTransitional(s)||h.Ranges.isChatOrChannelPeer(s))?null==r||r.giftSticker(t,s,null,a):null==r||r.giftSticker(t,"",null,a)},onStockItemSettingsClick:e=>{var t;const{id:r,vmoji_avatar:i}=e.product;i?null===(t=window.Emoji)||void 0===t||t.showVmojiAvatar(window.vk.id,i.character_id,r):(0,u.previewStickerProduct)(r,{settings:!0})}},void 0)}),void 0)}},354454:(e,t,r)=>{"use strict";r.d(t,{useUpdateOnEvents:()=>a});var i=r(667294),s=r(39196);const a=e=>{const[t,r]=(0,i.useReducer)(((e,t)=>Object.assign(Object.assign({},e),t)),e);return(0,i.useEffect)((()=>{function e({detail:e}){r(e)}const{wrapper:t}=window.StickerPickerViewer;return null==t||t.addEventListener(s.EVENT_KEY,e),()=>{null==t||t.removeEventListener(s.EVENT_KEY,e)}}),[]),t}},480143:(e,t,r)=>{"use strict";r.d(t,{onAPIRequest:()=>n,API:()=>o});var i=r(189798),s=r(928525);const a=["store.getStockItems"],n=(e,t={})=>(0,i.api)(e,t,{grouping:!a.includes(e)});class o{constructor(){this.api=new s.API({userId:window.vk.id,onAPIRequest:n})}getPack(e){return this.api.cache.getStockItem(e)}}},39196:(e,t,r)=>{"use strict";r.d(t,{EVENT_KEY:()=>i,createEvent:()=>s});const i="sticker_picker_event",s=e=>new CustomEvent(i,{detail:e})},394912:(e,t,r)=>{"use strict";r.d(t,{PositionSizeManager:()=>s});var i=r(850624);class s{constructor(e){this.IN_VK_WIDGET=window.vk.widget,this.CSS_VAR_HEIGHT="--sticker-picker-viewer-height",this.CSS_VAR_WIDTH="--sticker-picker-viewer-width",this.CSS_VAR_VERTICAL_MARGIN_FROM_ELEMENT="--vertical-margin-from-element",this.UP_POSITION_SELECTOR="StickerPickerViewer--up",this.DOWN_POSITION_SELECTOR="StickerPickerViewer--down",this.MIN_PICKER_HEIGHT=this.IN_VK_WIDGET?88:240,this.MAX_PICKER_HEIGHT=548,this.MARGIN_FROM_EDGES=32,this.MARGIN_FROM_ELEMENT=6,this.viewer=e}manageSizeAndPosition(){const{position:e,height:t}=this.viewer;e&&t?this.setPositionAndSize():this.repositionAndResize()}repositionAndResize(){const{wrapper:e,currentParent:t}=this.viewer;if(!e||!t)return;const{top:r,bottom:i}=t.getBoundingClientRect(),s=window.innerHeight,a=r-this.MARGIN_FROM_ELEMENT,n=s-i+this.MARGIN_FROM_ELEMENT;let o;if(n<a){this.setPositionUp();const e=parseInt(getComputedStyle(document.body).getPropertyValue("--header-height"));o=a-this.MARGIN_FROM_EDGES-e}else this.setPositionDown(),o=n-this.MARGIN_FROM_EDGES;o>=this.MAX_PICKER_HEIGHT?o=this.MAX_PICKER_HEIGHT:o<=this.MIN_PICKER_HEIGHT&&(o=this.MIN_PICKER_HEIGHT),o=Math.floor(o),e.style.setProperty(this.CSS_VAR_HEIGHT,`${o}px`),this.setMarginFromBaseElement()}setPositionAndSize(){const{wrapper:e,position:t,height:r}=this.viewer;switch(null==e||e.style.setProperty(this.CSS_VAR_HEIGHT,`${r}px`),this.setMarginFromBaseElement(),t){case i.STICKER_PICKER_POSITION.UP:this.setPositionUp();break;case i.STICKER_PICKER_POSITION.DOWN:this.setPositionDown();break;default:this.setPositionUp()}}setMarginFromBaseElement(){const{wrapper:e,currentParent:t}=this.viewer;if(!t||!e)return;const{height:r}=t.getBoundingClientRect();e.style.setProperty(this.CSS_VAR_VERTICAL_MARGIN_FROM_ELEMENT,`${r+this.MARGIN_FROM_ELEMENT}px`)}setPositionDown(){const{wrapper:e}=this.viewer;null==e||e.classList.add(this.DOWN_POSITION_SELECTOR),null==e||e.classList.remove(this.UP_POSITION_SELECTOR)}setPositionUp(){const{wrapper:e}=this.viewer;null==e||e.classList.add(this.UP_POSITION_SELECTOR),null==e||e.classList.remove(this.DOWN_POSITION_SELECTOR)}get isDown(){const{wrapper:e}=this.viewer;return null==e?void 0:e.classList.contains(this.DOWN_POSITION_SELECTOR)}}},351554:(e,t,r)=>{"use strict";r.d(t,{getClosestTextInput:()=>i});const i=e=>{if(e.getAttribute("contenteditable"))return e;const t=e.closest(".js-im-page, .fc_tab, .mv_chat");return t?t.matches(".fc_tab")?t.querySelector(".fc_editable"):t.matches(".js-im-page")?document.querySelector("._im_text"):t.matches(".mv_chat")?t.querySelector(".mv_chat_reply_input"):null:null}},194141:(e,t,r)=>{"use strict";r.d(t,{getVariant:()=>o});var i=r(127927);const{COMPACT:s,REGULAR:a,WIDE:n}=i.StickerEmojiKeyboardVariant;function o(){const{vk:e,innerWidth:t}=window;if(e.widget){if(t<360)return s;if(t<430)return a}return n}},850624:(e,t,r)=>{"use strict";var i;r.d(t,{STICKER_PICKER_POSITION:()=>i}),function(e){e.UP="up",e.DOWN="down"}(i||(i={}))}}]);try{stManager.done("dist/fba43c7a1c8ad19aa306e4c66812a52a.d7ab345c37273764361f.js")}catch(e){}