//---------------------------------------------------------------------------
#include <iostream>
#include <vcl.h>
#pragma hdrstop
#include<fstream>
#include<string>
#include "Unit3.h"
#include "Unit1.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TForm3 *Form3;
//---------------------------------------------------------------------------
__fastcall TForm3::TForm3(TComponent* Owner)
	: TForm(Owner)
{
}
//---------------------------------------------------------------------------
char turn = 'X';
char check=0;
int wp1=0;
int wp2=0;

void __fastcall TForm3::Button_Click(TObject *Sender)
{
    TButton *senderB = (TButton*)Sender;
	senderB->Caption=turn;
	senderB->Enabled=false;
	if (turn == 'X')
	{
		turn ='O';

	}else  turn = 'X';

	if (Label6->Caption == '1')
	{
		Label6->Caption = '2';

	}else  Label6->Caption = '1';



bool message = false;
if (Button1->Caption==Button2->Caption && Button2->Caption==Button3->Caption && Button2->Enabled==false)
{

	Application->Title="Конец игры!";
	message=true;
	if (Button2->Caption=='X')
	{
			check='X';
	}else check='O';
	ShowMessage("Победили " + Button2->Caption);
	Button1->Enabled=true;     Button1->Caption="";
	Button2->Enabled=true;     Button2->Caption="";
	Button3->Enabled=true;     Button3->Caption="";
	Button4->Enabled=true;     Button4->Caption="";
	Button5->Enabled=true;     Button5->Caption="";
	Button6->Enabled=true;     Button6->Caption="";
	Button7->Enabled=true;     Button7->Caption="";
	Button8->Enabled=true;     Button8->Caption="";
	Button9->Enabled=true;     Button9->Caption="";
}
if (Button4->Caption==Button5->Caption && Button5->Caption==Button6->Caption && Button5->Enabled==false)
{
	Application->Title="Конец игры!";
	message=true;
	if (Button5->Caption=='X')
	{
			check='X';
	}else check='O';
	ShowMessage("Победили " + Button5->Caption);
    Button1->Enabled=true;     Button1->Caption="";
	Button2->Enabled=true;     Button2->Caption="";
	Button3->Enabled=true;     Button3->Caption="";
	Button4->Enabled=true;     Button4->Caption="";
	Button5->Enabled=true;     Button5->Caption="";
	Button6->Enabled=true;     Button6->Caption="";
	Button7->Enabled=true;     Button7->Caption="";
	Button8->Enabled=true;     Button8->Caption="";
	Button9->Enabled=true;     Button9->Caption="";
}
if (Button7->Caption==Button8->Caption && Button8->Caption==Button9->Caption && Button8->Enabled==false)
{
	Application->Title="Конец игры!";
	message=true;
	if (Button8->Caption=='X')
	{
			check='X';
	}else check='O';
	ShowMessage("Победили " + Button8->Caption);
    Button1->Enabled=true;     Button1->Caption="";
	Button2->Enabled=true;     Button2->Caption="";
	Button3->Enabled=true;     Button3->Caption="";
	Button4->Enabled=true;     Button4->Caption="";
	Button5->Enabled=true;     Button5->Caption="";
	Button6->Enabled=true;     Button6->Caption="";
	Button7->Enabled=true;     Button7->Caption="";
	Button8->Enabled=true;     Button8->Caption="";
	Button9->Enabled=true;     Button9->Caption="";
}
if (Button1->Caption==Button4->Caption && Button4->Caption==Button7->Caption && Button4->Enabled==false)
{
	Application->Title="Конец игры!";
	message=true;
	if (Button4->Caption=='X')
	{
			check='X';
	}else check='O';
	ShowMessage("Победили " + Button4->Caption);
	Button1->Enabled=true;     Button1->Caption="";
	Button2->Enabled=true;     Button2->Caption="";
	Button3->Enabled=true;     Button3->Caption="";
	Button4->Enabled=true;     Button4->Caption="";
	Button5->Enabled=true;     Button5->Caption="";
	Button6->Enabled=true;     Button6->Caption="";
	Button7->Enabled=true;     Button7->Caption="";
	Button8->Enabled=true;     Button8->Caption="";
	Button9->Enabled=true;     Button9->Caption="";
}
if (Button2->Caption==Button5->Caption && Button5->Caption==Button8->Caption && Button5->Enabled==false)
{
	Application->Title="Конец игры!";
	message=true;
	if (Button5->Caption=='X')
	{
			check='X';
	}else check='O';
	ShowMessage("Победили " + Button5->Caption);
	Button1->Enabled=true;     Button1->Caption="";
	Button2->Enabled=true;     Button2->Caption="";
	Button3->Enabled=true;     Button3->Caption="";
	Button4->Enabled=true;     Button4->Caption="";
	Button5->Enabled=true;     Button5->Caption="";
	Button6->Enabled=true;     Button6->Caption="";
	Button7->Enabled=true;     Button7->Caption="";
	Button8->Enabled=true;     Button8->Caption="";
	Button9->Enabled=true;     Button9->Caption="";
}
if (Button3->Caption==Button6->Caption && Button9->Caption==Button3->Caption && Button6->Enabled==false)
{
	Application->Title="Конец игры!";
	message=true;
	if (Button6->Caption=='X')
	{
			check='X';
	}else check='O';
	ShowMessage("Победили " + Button6->Caption);
	Button1->Enabled=true;     Button1->Caption="";
	Button2->Enabled=true;     Button2->Caption="";
	Button3->Enabled=true;     Button3->Caption="";
	Button4->Enabled=true;     Button4->Caption="";
	Button5->Enabled=true;     Button5->Caption="";
	Button6->Enabled=true;     Button6->Caption="";
	Button7->Enabled=true;     Button7->Caption="";
	Button8->Enabled=true;     Button8->Caption="";
	Button9->Enabled=true;     Button9->Caption="";
}
if (Button1->Caption==Button5->Caption && Button5->Caption==Button9->Caption && Button5->Enabled==false)
{
	Application->Title="Конец игры!";
	message=true;
	if (Button5->Caption=='X')
	{
			check='X';
	}else check='O';
	ShowMessage("Победили " + Button5->Caption);
Button1->Enabled=true;     Button1->Caption="";
	Button2->Enabled=true;     Button2->Caption="";
	Button3->Enabled=true;     Button3->Caption="";
	Button4->Enabled=true;     Button4->Caption="";
	Button5->Enabled=true;     Button5->Caption="";
	Button6->Enabled=true;     Button6->Caption="";
	Button7->Enabled=true;     Button7->Caption="";
	Button8->Enabled=true;     Button8->Caption="";
	Button9->Enabled=true;     Button9->Caption="";
}
if (Button3->Caption==Button5->Caption && Button5->Caption==Button7->Caption && Button5->Enabled==false)
{
	message=true;
	if (Button5->Caption=='X')
	{
			check='X';
	}else check='O';
	Application->Title="Конец игры!";
	ShowMessage("Победили " + Button5->Caption);
	Button1->Enabled=true;     Button1->Caption="";
	Button2->Enabled=true;     Button2->Caption="";
	Button3->Enabled=true;     Button3->Caption="";
	Button4->Enabled=true;     Button4->Caption="";
	Button5->Enabled=true;     Button5->Caption="";
	Button6->Enabled=true;     Button6->Caption="";
	Button7->Enabled=true;     Button7->Caption="";
	Button8->Enabled=true;     Button8->Caption="";
	Button9->Enabled=true;     Button9->Caption="";
}

if (message==false && Button1->Enabled==false && Button2->Enabled==false && Button3->Enabled==false && Button4->Enabled==false && Button5->Enabled==false && Button6->Enabled==false && Button7->Enabled==false && Button8->Enabled==false && Button9->Enabled==false)
{
	message=true;
	check='N';
	Application->Title="Конец игры!";
	ShowMessage("Ничья");
	Button1->Enabled=true;     Button1->Caption="";
	Button2->Enabled=true;     Button2->Caption="";
	Button3->Enabled=true;     Button3->Caption="";
	Button4->Enabled=true;     Button4->Caption="";
	Button5->Enabled=true;     Button5->Caption="";
	Button6->Enabled=true;     Button6->Caption="";
	Button7->Enabled=true;     Button7->Caption="";
	Button8->Enabled=true;     Button8->Caption="";
	Button9->Enabled=true;     Button9->Caption="";
}
	if (check=='X')
	{
		wp1=wp1+1;
		Label2->Caption=wp1;
		check=0;
	}
	else if (check=='O')
	{
		wp2=wp2+1;
		Label4->Caption=wp2;
		check=0;
	}

}
//---------------------------------------------------------------------------
void __fastcall TForm3::Button10Click(TObject *Sender)
{
	 Form1->Show();
	 Close();
	Button1->Enabled=true;     Button1->Caption="";
	Button2->Enabled=true;     Button2->Caption="";
	Button3->Enabled=true;     Button3->Caption="";
	Button4->Enabled=true;     Button4->Caption="";
	Button5->Enabled=true;     Button5->Caption="";
	Button6->Enabled=true;     Button6->Caption="";
	Button7->Enabled=true;     Button7->Caption="";
	Button8->Enabled=true;     Button8->Caption="";
	Button9->Enabled=true;     Button9->Caption="";
	Label2->Caption="0";        Label4->Caption="0";
}
//---------------------------------------------------------------------------

